import{j as t}from"./react/jsx-runtime.js.Cm6upDnr.js";import{C as c}from"./@react-three/fiber/dist/react-three-fiber.esm.js.uSMXqHGH.js";import{r as m}from"./react/index.js.IuPGg7Py.js";import{m as u,V as l}from"./three/build/three.module.js.jQmR1wrA.js";import{G as f}from"./three/examples/jsm/loaders/GLTFLoader.js.CYs29Pxo.js";import{F as d}from"./@mantine/core/esm/components/FileButton/FileButton.mjs.BW0nGNg_.js";import{B as x}from"./@mantine/core/esm/components/Button/Button.mjs.fQTTXiA1.js";import{S as h}from"./@react-three/drei/core/Sky.js.CNOpaHRB.js";import{H as j}from"./@react-three/drei/web/Html.js.EOuKIWIz.js";import{g,u as w}from"./@react-three/fiber/dist/index-ba8afaa4.esm.js.CC8UC62r.js";import{O as b}from"./@react-three/drei/core/OrbitControls.js.DSQN8AZM.js";import"./react/jsx-runtime.js_commonjs-module.DrftVG1b.js";import"./react/cjs/react-jsx-runtime.production.min.js.C9aFBgD_.js";import"./react/cjs/react-jsx-runtime.production.min.js_commonjs-exports.Y3wesJj2.js";import"./react-use-measure/dist/web.js.0CDZZggC.js";import"./debounce/index.js.A01yxaYv.js";import"./@chevrotain/cst-dts-gen/lib/src/api.js.Cpj98o6Y.js";import"./its-fine/dist/index.js.CBEqHD9G.js";import"./react-reconciler/constants.js.cziiqKC3.js";import"./react-reconciler/constants.js_commonjs-module.BUUaCVL8.js";import"./react-reconciler/cjs/react-reconciler-constants.production.min.js.BLy92Rht.js";import"./react-reconciler/cjs/react-reconciler-constants.production.min.js_commonjs-exports.Y3wesJj2.js";import"./react-reconciler/index.js.DwfphOJC.js";import"./react-reconciler/index.js_commonjs-module.DhgsKDqp.js";import"./react-reconciler/cjs/react-reconciler.production.min.js.C-zayX3I.js";import"./scheduler/index.js.DPKlw4YW.js";import"./scheduler/index.js_commonjs-module.IyF5mD2q.js";import"./scheduler/cjs/scheduler.production.min.js.BiBLb9Ep.js";import"./scheduler/cjs/scheduler.production.min.js_commonjs-exports.vhg0vpYA.js";import"./react/index.js_commonjs-module.DhgsKDqp.js";import"./react/cjs/react.production.min.js.DpCWH6XP.js";import"./react/cjs/react.production.min.js_commonjs-exports.Y3wesJj2.js";import"./three/examples/jsm/utils/BufferGeometryUtils.js.CptqS1uw.js";import"./@mantine/core/esm/core/MantineProvider/use-props/use-props.mjs.CZPYrlnm.js";import"./@mantine/core/esm/core/utils/filter-props/filter-props.mjs.DgbN-LSt.js";import"./@mantine/core/esm/core/MantineProvider/MantineThemeProvider/MantineThemeProvider.mjs.BPh_bbWQ.js";import"./@mantine/core/esm/core/MantineProvider/default-theme.mjs.BRxKM_1h.js";import"./@mantine/core/esm/core/utils/units-converters/rem.mjs.BeePrqDx.js";import"./@mantine/core/esm/core/MantineProvider/color-functions/default-variant-colors-resolver/default-variant-colors-resolver.mjs.CisYDkTQ.js";import"./@mantine/core/esm/core/MantineProvider/color-functions/darken/darken.mjs.DnTPCeWV.js";import"./@mantine/core/esm/core/MantineProvider/color-functions/to-rgba/to-rgba.mjs.Dj1cs63r.js";import"./@mantine/core/esm/core/MantineProvider/color-functions/get-gradient/get-gradient.mjs.BkGAWj8o.js";import"./@mantine/core/esm/core/MantineProvider/color-functions/get-theme-color/get-theme-color.mjs.D6X7-U-t.js";import"./@mantine/core/esm/core/MantineProvider/color-functions/parse-theme-color/parse-theme-color.mjs.6r2l6-t0.js";import"./@mantine/core/esm/core/MantineProvider/color-functions/get-primary-shade/get-primary-shade.mjs.BT34rltv.js";import"./@mantine/core/esm/core/MantineProvider/color-functions/luminance/luminance.mjs.DEs9d8Ge.js";import"./@mantine/core/esm/core/MantineProvider/color-functions/rgba/rgba.mjs.BzaxkAWp.js";import"./@mantine/core/esm/core/MantineProvider/default-colors.mjs.BxmwQtie.js";import"./@mantine/core/esm/core/MantineProvider/merge-mantine-theme/merge-mantine-theme.mjs.hPOQC5_C.js";import"./@mantine/core/esm/core/utils/deep-merge/deep-merge.mjs.VM1LrXZc.js";import"./@mantine/hooks/esm/use-merged-ref/use-merged-ref.mjs.D3CE6DNm.js";import"./@mantine/core/esm/core/utils/get-size/get-size.mjs.Did5qDJb.js";import"./@mantine/core/esm/core/utils/is-number-like/is-number-like.mjs.BeYmabCi.js";import"./@mantine/core/esm/core/styles-api/create-vars-resolver/create-vars-resolver.mjs.BkjTnGuP.js";import"./@mantine/core/esm/core/styles-api/use-styles/use-styles.mjs.DULnKD6v.js";import"./@mantine/core/esm/core/MantineProvider/Mantine.context.mjs.DQnFFdij.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-class-name/get-class-name.mjs.5IGmkENY.js";import"./clsx/dist/clsx.mjs.B-dksMZM.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-class-name/get-global-class-names/get-global-class-names.mjs.2On0w0FQ.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-class-name/get-options-class-names/get-options-class-names.mjs.aU0XBM3c.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-class-name/resolve-class-names/resolve-class-names.mjs.JktKmBsT.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-class-name/get-resolved-class-names/get-resolved-class-names.mjs.BpywiirN.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-class-name/get-root-class-name/get-root-class-name.mjs.BU4AdQqA.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-class-name/get-selector-class-name/get-selector-class-name.mjs.Dph5IRsQ.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-class-name/get-static-class-names/get-static-class-names.mjs.msKG441_.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-class-name/get-theme-class-names/get-theme-class-names.mjs.Cab0-wCp.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-class-name/get-variant-class-name/get-variant-class-name.mjs.s-pjaDyR.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-style/get-style.mjs.DCsQcqYf.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-style/get-theme-styles/get-theme-styles.mjs.BbxnTk1I.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-style/resolve-styles/resolve-styles.mjs.BK6pl5Id.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-style/resolve-style/resolve-style.mjs.B2bBkNYf.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-style/resolve-vars/resolve-vars.mjs.DiYWxM_h.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-style/resolve-vars/merge-vars.mjs.B-cuAop3.js";import"./@mantine/core/esm/core/styles-api/use-styles/use-transformed-styles.mjs.BlMVF9oO.js";import"./@mantine/core/esm/core/Box/Box.mjs.DCWdc-3G.js";import"./@mantine/core/esm/core/factory/create-polymorphic-component.mjs.gPQ06cEU.js";import"./@mantine/core/esm/core/InlineStyles/InlineStyles.mjs.Bl-U_aqN.js";import"./@mantine/core/esm/core/InlineStyles/styles-to-string/styles-to-string.mjs.B4dLVhC8.js";import"./@mantine/core/esm/core/InlineStyles/css-object-to-string/css-object-to-string.mjs.wiNyG105.js";import"./@mantine/core/esm/core/utils/keys/keys.mjs.HiGXOwLp.js";import"./@mantine/core/esm/core/utils/camel-to-kebab-case/camel-to-kebab-case.mjs.CCVVwPe_.js";import"./@mantine/core/esm/core/Box/get-box-mod/get-box-mod.mjs.BDYhQ2X4.js";import"./@mantine/core/esm/core/Box/get-box-style/get-box-style.mjs.BG2n9q_o.js";import"./@mantine/core/esm/core/Box/style-props/extract-style-props/extract-style-props.mjs.Gd6dO5hu.js";import"./@mantine/core/esm/core/Box/style-props/style-props-data.mjs.CKVblm_8.js";import"./@mantine/core/esm/core/Box/style-props/parse-style-props/parse-style-props.mjs.BbG0dOnJ.js";import"./@mantine/core/esm/core/Box/style-props/resolvers/index.mjs.DSYKVuKU.js";import"./@mantine/core/esm/core/Box/style-props/resolvers/border-resolver/border-resolver.mjs.BcqMhLrH.js";import"./@mantine/core/esm/core/MantineProvider/color-functions/colors-tuple/colors-tuple.mjs.DZU73T7t.js";import"./@mantine/core/esm/core/Box/style-props/resolvers/color-resolver/color-resolver.mjs.DHcy2QLT.js";import"./@mantine/core/esm/core/Box/style-props/resolvers/font-family-resolver/font-family-resolver.mjs.X4El5QHn.js";import"./@mantine/core/esm/core/Box/style-props/resolvers/font-size-resolver/font-size-resolver.mjs.Dt8BGtXE.js";import"./@mantine/core/esm/core/Box/style-props/resolvers/identity-resolver/identity-resolver.mjs.C82aAysl.js";import"./@mantine/core/esm/core/Box/style-props/resolvers/line-height-resolver/line-height-resolver.mjs.BGPyEj3w.js";import"./@mantine/core/esm/core/Box/style-props/resolvers/size-resolver/size-resolver.mjs.BY_6QEPX.js";import"./@mantine/core/esm/core/Box/style-props/resolvers/spacing-resolver/spacing-resolver.mjs.Bmqfr8sn.js";import"./@mantine/core/esm/core/Box/style-props/parse-style-props/sort-media-queries.mjs.DxKN08Rt.js";import"./@mantine/core/esm/core/Box/use-random-classname/use-random-classname.mjs.BMipyipx.js";import"./@mantine/core/esm/core/factory/polymorphic-factory.mjs.BrYUG9A2.js";import"./@mantine/core/esm/core/factory/factory.mjs.E2rTOrRU.js";import"./@mantine/core/esm/components/Loader/Loader.mjs.D0tTjBtk.js";import"./@mantine/core/esm/components/Loader/loaders/Bars.mjs.Dca9kpr3.js";import"./@mantine/core/esm/components/Loader/Loader.module.css.mjs.B682ZTPg.js";import"./@mantine/core/esm/components/Loader/loaders/Dots.mjs.CT0RKEpf.js";import"./@mantine/core/esm/components/Loader/loaders/Oval.mjs.BR5iPvc-.js";import"./@mantine/core/esm/components/Transition/Transition.mjs.D_Qg_8an.js";import"./@mantine/core/esm/components/Transition/get-transition-styles/get-transition-styles.mjs.CKzbHSLw.js";import"./@mantine/core/esm/components/Transition/transitions.mjs.DhsuB2Uh.js";import"./@mantine/core/esm/components/Transition/use-transition.mjs.DFJ58YzZ.js";import"./react-dom/index.js.DLK93kQg.js";import"./react-dom/index.js_commonjs-module.DhgsKDqp.js";import"./react-dom/cjs/react-dom.production.min.js.BaU55GLq.js";import"./react-dom/cjs/react-dom.production.min.js_commonjs-exports.Y3wesJj2.js";import"./@mantine/hooks/esm/use-reduced-motion/use-reduced-motion.mjs.Bsopbra6.js";import"./@mantine/hooks/esm/use-media-query/use-media-query.mjs.Dx8jf72I.js";import"./@mantine/hooks/esm/use-did-update/use-did-update.mjs.Di8RN7PN.js";import"./@mantine/core/esm/components/UnstyledButton/UnstyledButton.mjs.Di0EfK2U.js";import"./@mantine/core/esm/components/UnstyledButton/UnstyledButton.module.css.mjs.DAaS_h3t.js";import"./@mantine/core/esm/components/Button/ButtonGroup/ButtonGroup.mjs.2B7058bG.js";import"./@mantine/core/esm/components/Button/Button.module.css.mjs.C78j5JaW.js";import"./@babel/runtime/helpers/esm/extends.js.CF3RwP-h.js";import"./three-stdlib/objects/Sky.js.0dy_9urI.js";import"./three-stdlib/_polyfill/constants.js.DuRMXTgx.js";import"./react-dom/client.js.C0Clj67_.js";import"./react-dom/client.js_commonjs-exports.CmYd1H8K.js";import"./zustand/esm/index.js.Cv_BSyMC.js";import"./suspend-react/index.js.BKIKQNXN.js";import"./three-stdlib/controls/OrbitControls.js.DqJlVqcH.js";const qr=()=>{const[o,p]=m.useState(),e=r=>{if(!r)throw new Error("未选择文件");p(window.URL.createObjectURL(r))};return t.jsxs("div",{className:"h-full relative w-full",children:[t.jsx("div",{className:"absolute left-2 top-2 z-10",children:t.jsx(d,{onChange:e,accept:"model/gltf-binary,.glb,.gltf",children:r=>t.jsx(x,{...r,children:"Upload image"})})}),t.jsx(v,{url:o})]})},v=o=>t.jsxs(c,{className:"h-full w-full",children:[t.jsx(h,{}),t.jsx(m.Suspense,{fallback:t.jsx(j,{className:"flex flex-col h-full items-center justify-center w-full",children:t.jsx("p",{className:"text-lg whitespace-nowrap",children:"加载中..."})}),children:o.url&&t.jsx(M,{url:o.url})})]}),M=({url:o})=>{const{scene:p}=g(f,o,a=>{}),{camera:e}=w(),r=m.useRef(null),s=m.useMemo(()=>new u().setFromObject(p),[p]),i=m.useMemo(()=>new l().copy(s.getCenter(new l)),[s]);return m.useEffect(()=>{if(!r.current)return;const n=s.getSize(new l).length()/Math.tan(Math.PI/180*e.fov*.5);r.current.target.copy(i),r.current.object.position.set(i.x,i.y,i.z+n),r.current.update()},[s,e,i]),t.jsx("primitive",{object:p,children:t.jsx(b,{ref:r,target:i,enableDamping:!0,dampingFactor:.1})})};export{qr as SelectModel,qr as default};
