import{j as t}from"./react/jsx-runtime.js.Uqq-hvb5.js";import{C as c}from"./@react-three/fiber/dist/react-three-fiber.esm.js.js0O8qBn.js";import{r as m}from"./react/index.js.4247Uq6c.js";import{B as u,V as l}from"./three/build/three.module.js.ZP5wlr6b.js";import{G as f}from"./three/examples/jsm/loaders/GLTFLoader.js.Rt_UCwIJ.js";import{F as d}from"./@mantine/core/esm/components/FileButton/FileButton.mjs.PhxVjX3o.js";import{B as x}from"./@mantine/core/esm/components/Button/Button.mjs.rdJRcjxY.js";import{S as h}from"./@react-three/drei/core/Sky.js.0WKJnSvl.js";import{H as j}from"./@react-three/drei/web/Html.js.ev0GDvwX.js";import{f as g,u as w}from"./@react-three/fiber/dist/index-db8af450.esm.js.eaJ-IQWK.js";import{O as b}from"./@react-three/drei/core/OrbitControls.js.oswvk1sn.js";import"./react/jsx-runtime.js_commonjs-module.6qyWXiSQ.js";import"./react/cjs/react-jsx-runtime.production.min.js.HelFttYW.js";import"./react/cjs/react-jsx-runtime.production.min.js_commonjs-exports.qAWgAA3K.js";import"./@babel/runtime/helpers/esm/extends.js.dGVwEr9R.js";import"./react-use-measure/dist/web.js.7oM1nbYC.js";import"./debounce/index.js.PBfixFVC.js";import"./@theatre/core/dist/index.js.BxvA29o6.js";import"./@theatre/core/dist/index.js_commonjs-module.faBto2_-.js";import"./@theatre/dataverse/dist/index.js.QyAqcXqM.js";import"./@theatre/dataverse/dist/index.js_commonjs-exports.VJ-iiqMQ.js";import"./its-fine/dist/index.js.9iirpWVO.js";import"./react-reconciler/constants.js.tdY7ep42.js";import"./react-reconciler/constants.js_commonjs-module.bv1OTdJD.js";import"./react-reconciler/cjs/react-reconciler-constants.production.min.js.tOVHsOnT.js";import"./react-reconciler/cjs/react-reconciler-constants.production.min.js_commonjs-exports.qAWgAA3K.js";import"./react-reconciler/index.js.tbOlkM-I.js";import"./react-reconciler/index.js_commonjs-module.DxcPXuYc.js";import"./react-reconciler/cjs/react-reconciler.production.min.js.oU8HEBMo.js";import"./scheduler/index.js.42U5Wdl4.js";import"./scheduler/index.js_commonjs-module.Ek0c21B3.js";import"./scheduler/cjs/scheduler.production.min.js.fBgAgojj.js";import"./scheduler/cjs/scheduler.production.min.js_commonjs-exports.9KBFuG-S.js";import"./react/index.js_commonjs-module.DxcPXuYc.js";import"./react/cjs/react.production.min.js.NYNXRWg1.js";import"./react/cjs/react.production.min.js_commonjs-exports.qAWgAA3K.js";import"./three/examples/jsm/utils/BufferGeometryUtils.js.HI5fMuq_.js";import"./@mantine/core/esm/core/MantineProvider/use-props/use-props.mjs.tBosgCdQ.js";import"./@mantine/core/esm/core/MantineProvider/MantineThemeProvider/MantineThemeProvider.mjs.juLuSzjJ.js";import"./@mantine/core/esm/core/MantineProvider/default-theme.mjs.3_TBVLw4.js";import"./@mantine/core/esm/core/MantineProvider/default-colors.mjs.dJljRtcl.js";import"./@mantine/core/esm/core/MantineProvider/color-functions/default-variant-colors-resolver/default-variant-colors-resolver.mjs.IU413hDf.js";import"./@mantine/core/esm/core/MantineProvider/color-functions/parse-theme-color/parse-theme-color.mjs.PTJxWSrv.js";import"./@mantine/core/esm/core/MantineProvider/color-functions/get-primary-shade/get-primary-shade.mjs.cz0VuX7X.js";import"./@mantine/core/esm/core/MantineProvider/color-functions/get-gradient/get-gradient.mjs.1pYh92xX.js";import"./@mantine/core/esm/core/MantineProvider/color-functions/get-theme-color/get-theme-color.mjs.kFsCQQeT.js";import"./@mantine/core/esm/core/MantineProvider/color-functions/darken/darken.mjs.p0vUnQ_4.js";import"./@mantine/core/esm/core/MantineProvider/color-functions/to-rgba/to-rgba.mjs.ULdv3tvu.js";import"./@mantine/core/esm/core/MantineProvider/color-functions/rgba/rgba.mjs.vZsQ0QWn.js";import"./@mantine/core/esm/core/utils/units-converters/rem.mjs.Vi1x7Y7A.js";import"./@mantine/core/esm/core/MantineProvider/merge-mantine-theme/merge-mantine-theme.mjs.vV3X55eA.js";import"./@mantine/core/esm/core/utils/deep-merge/deep-merge.mjs.gqG_-4q8.js";import"./@mantine/core/esm/core/utils/filter-props/filter-props.mjs.Eri4suxO.js";import"./@mantine/hooks/esm/use-merged-ref/use-merged-ref.mjs.8oqygT_9.js";import"./@mantine/core/esm/components/Button/ButtonGroup/ButtonGroup.mjs.x2cFnE2_.js";import"./@mantine/core/esm/components/Button/Button.module.mjs.gtx5kuzx.js";import"./@mantine/core/esm/core/factory/factory.mjs.tBUv85pj.js";import"./@mantine/core/esm/core/styles-api/use-styles/use-styles.mjs.rFckW_rJ.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-class-name/get-class-name.mjs.qAAUr9_E.js";import"./clsx/dist/clsx.mjs.2Jv0kmJG.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-class-name/get-static-class-names/get-static-class-names.mjs.bDUwy0vm.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-class-name/get-theme-class-names/get-theme-class-names.mjs.zjdyVYWG.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-class-name/resolve-class-names/resolve-class-names.mjs.tSNOBLCh.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-class-name/get-global-class-names/get-global-class-names.mjs.3UBN_EHG.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-class-name/get-variant-class-name/get-variant-class-name.mjs.yW7WxmPL.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-class-name/get-root-class-name/get-root-class-name.mjs.3tHOXwtH.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-class-name/get-selector-class-name/get-selector-class-name.mjs.Cu1cOY9I.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-class-name/get-resolved-class-names/get-resolved-class-names.mjs.XNqdRUEQ.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-class-name/get-options-class-names/get-options-class-names.mjs.x62VzdlX.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-style/get-style.mjs.V4HoTSFa.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-style/get-theme-styles/get-theme-styles.mjs.pFMzwL0_.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-style/resolve-styles/resolve-styles.mjs.IyReLsYL.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-style/resolve-style/resolve-style.mjs.goQ1jzB1.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-style/resolve-vars/resolve-vars.mjs.cRDkGF_1.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-style/resolve-vars/merge-vars.mjs.zzDogTMB.js";import"./@mantine/core/esm/core/MantineProvider/Mantine.context.mjs.c56K0rNB.js";import"./@mantine/core/esm/core/Box/Box.mjs.be2KtG4b.js";import"./@mantine/core/esm/core/Box/get-box-style/get-box-style.mjs.HWdMnYhe.js";import"./@mantine/core/esm/core/Box/use-random-classname/use-random-classname.mjs.fN_FeWcx.js";import"./@mantine/core/esm/core/Box/get-box-mod/get-box-mod.mjs.hwUKSWRh.js";import"./@mantine/core/esm/core/Box/style-props/extract-style-props/extract-style-props.mjs._EU4TKzc.js";import"./@mantine/core/esm/core/Box/style-props/parse-style-props/parse-style-props.mjs.sK6qgmvS.js";import"./@mantine/core/esm/core/Box/style-props/resolvers/index.mjs.riHh-7bW.js";import"./@mantine/core/esm/core/Box/style-props/resolvers/color-resolver/color-resolver.mjs.LBJSWTSq.js";import"./@mantine/core/esm/core/Box/style-props/resolvers/font-size-resolver/font-size-resolver.mjs.94Hw6a3X.js";import"./@mantine/core/esm/core/Box/style-props/resolvers/spacing-resolver/spacing-resolver.mjs.iojAMUpY.js";import"./@mantine/core/esm/core/Box/style-props/resolvers/identity-resolver/identity-resolver.mjs.XccjSiAA.js";import"./@mantine/core/esm/core/Box/style-props/resolvers/size-resolver/size-resolver.mjs.xBkTYM63.js";import"./@mantine/core/esm/core/Box/style-props/resolvers/line-height-resolver/line-height-resolver.mjs.t1AZsK_R.js";import"./@mantine/core/esm/core/Box/style-props/parse-style-props/sort-media-queries.mjs.8pfzPrLi.js";import"./@mantine/core/esm/core/utils/keys/keys.mjs.U2sJ5kXD.js";import"./@mantine/core/esm/core/Box/style-props/style-props-data.mjs.dPCt8o6M.js";import"./@mantine/core/esm/core/utils/is-number-like/is-number-like.mjs.IzWfUMVh.js";import"./@mantine/core/esm/core/InlineStyles/InlineStyles.mjs.YRVeOOJy.js";import"./@mantine/core/esm/core/InlineStyles/styles-to-string/styles-to-string.mjs.wjYeAz3N.js";import"./@mantine/core/esm/core/InlineStyles/css-object-to-string/css-object-to-string.mjs.v0zCVQW-.js";import"./@mantine/core/esm/core/utils/camel-to-kebab-case/camel-to-kebab-case.mjs.LoXfoZeq.js";import"./@mantine/core/esm/core/factory/create-polymorphic-component.mjs.3nxxLJut.js";import"./@mantine/core/esm/core/styles-api/create-vars-resolver/create-vars-resolver.mjs.GczIqpiB.js";import"./@mantine/core/esm/components/UnstyledButton/UnstyledButton.mjs.TGzOsaJw.js";import"./@mantine/core/esm/components/UnstyledButton/UnstyledButton.module.mjs.FWWU3iMa.js";import"./@mantine/core/esm/core/factory/polymorphic-factory.mjs.VXCBrRNF.js";import"./@mantine/core/esm/components/Loader/Loader.mjs.4dlI2wDl.js";import"./@mantine/core/esm/components/Loader/loaders/Bars.mjs.pzL2rwdC.js";import"./@mantine/core/esm/components/Loader/Loader.module.mjs.LYAkXAsI.js";import"./@mantine/core/esm/components/Loader/loaders/Oval.mjs.JGxG5qd8.js";import"./@mantine/core/esm/components/Loader/loaders/Dots.mjs.Q7Iebhvw.js";import"./@mantine/core/esm/core/utils/get-size/get-size.mjs.y4HlCTUg.js";import"./three-stdlib/objects/Sky.js.7WuzW9oY.js";import"./three-stdlib/_polyfill/constants.js.JukYpBJB.js";import"./react-dom/client.js.5ay3bIYj.js";import"./react-dom/client.js_commonjs-exports.FHoryJeI.js";import"./react-dom/index.js.CRFhJLVO.js";import"./react-dom/index.js_commonjs-module.DxcPXuYc.js";import"./react-dom/cjs/react-dom.production.min.js.Zb8U3-o4.js";import"./react-dom/cjs/react-dom.production.min.js_commonjs-exports.qAWgAA3K.js";import"./zustand/esm/index.js.zIjYpMGI.js";import"./suspend-react/index.js.7rE_FwbT.js";import"./three-stdlib/controls/OrbitControls.js.PcY-_4-s.js";const zr=()=>{const[o,p]=m.useState(),e=r=>{if(!r)throw new Error("未选择文件");p(window.URL.createObjectURL(r))};return t.jsxs("div",{className:"h-full relative w-full",children:[t.jsx("div",{className:"absolute left-2 top-2 z-10",children:t.jsx(d,{onChange:e,accept:"model/gltf-binary,.glb,.gltf",children:r=>t.jsx(x,{...r,children:"Upload image"})})}),t.jsx(v,{url:o})]})},v=o=>t.jsxs(c,{className:"h-full w-full",children:[t.jsx(h,{}),t.jsx(m.Suspense,{fallback:t.jsx(j,{className:"flex flex-col h-full items-center justify-center w-full",children:t.jsx("p",{className:"text-lg whitespace-nowrap",children:"加载中..."})}),children:o.url&&t.jsx(M,{url:o.url})})]}),M=({url:o})=>{const{scene:p}=g(f,o,a=>{}),{camera:e}=w(),r=m.useRef(null),s=m.useMemo(()=>new u().setFromObject(p),[p]),i=m.useMemo(()=>new l().copy(s.getCenter(new l)),[s]);return m.useEffect(()=>{if(!r.current)return;const n=s.getSize(new l).length()/Math.tan(Math.PI/180*e.fov*.5);r.current.target.copy(i),r.current.object.position.set(i.x,i.y,i.z+n),r.current.update()},[s,e,i]),t.jsx("primitive",{object:p,children:t.jsx(b,{ref:r,target:i,enableDamping:!0,dampingFactor:.1})})};export{zr as SelectModel,zr as default};
//# sourceMappingURL=index.CdiYei-L.js.map
