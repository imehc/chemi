{"version":3,"file":"index.w7wsOvB9.js","sources":["../../src/demo2/12/Button.tsx","../../src/demo2/12/MaterialMenu.tsx","../../src/demo2/12/ArmChair.tsx","../../src/demo2/12/Room.tsx","../../src/demo2/12/index.tsx"],"sourcesContent":["import { useFrame } from '@react-three/fiber';\nimport { useRef, useState } from 'react';\nimport { MathUtils, Mesh, Texture } from 'three';\n\nexport default function Button({\n  id,\n  texture,\n  position,\n  setSelected,\n  roughness,\n}: {\n  id: number;\n  texture: Texture;\n  position: [number, number, number];\n  setSelected(n: number): void;\n  roughness?: number;\n}) {\n  const ref = useRef<Mesh>(null);\n  const [hovered, setHovered] = useState(false);\n  useFrame((_, delta) => {\n    if (!ref.current) return;\n    ref.current.scale.y =\n      ref.current.scale.x =\n      ref.current.scale.z =\n        MathUtils.lerp(ref.current.scale.y, hovered ? 1.5 : 1, 0.25);\n    hovered && ref.current.rotateY(delta * 5);\n  });\n  return (\n    <mesh\n      ref={ref}\n      position={position}\n      onPointerOver={() => setHovered(true)}\n      onPointerOut={() => setHovered(false)}\n      onPointerDown={() => setSelected(id)}\n    >\n      <sphereGeometry />\n      <meshStandardMaterial\n        map={texture}\n        roughness={roughness}\n        envMapIntensity={1.5}\n      />\n    </mesh>\n  );\n}\n","import { Hud, OrthographicCamera, Environment } from '@react-three/drei';\nimport { useLoader } from '@react-three/fiber';\nimport { TextureLoader } from 'three';\nimport Button from './Button';\n\nexport default function MaterialMenu({\n  setSelected,\n}: {\n  setSelected(n: number): void;\n}) {\n  const texture = useLoader(TextureLoader, [\n    '/v212/img/fabric_pattern_05.jpg',\n    '/v212/img/leather_red.jpg',\n    '/v212/img/fabric_pattern_07.jpg',\n    '/v212/img/book_pattern.jpg',\n    '/v212/img/denim_fabric_02.jpg',\n  ]);\n\n  return (\n    <Hud>\n      <OrthographicCamera makeDefault position={[0, 0, 2]} zoom={50} />\n      <Environment preset=\"forest\" />\n      <Button\n        id={0}\n        texture={texture[0]}\n        position={[-6, -6, 0]}\n        setSelected={setSelected}\n      />\n      <Button\n        id={1}\n        texture={texture[1]}\n        position={[-3, -6, 0]}\n        roughness={0.2}\n        setSelected={setSelected}\n      />\n      <Button\n        id={2}\n        texture={texture[2]}\n        position={[-0, -6, 0]}\n        setSelected={setSelected}\n      />\n      <Button\n        id={3}\n        texture={texture[3]}\n        position={[3, -6, 0]}\n        roughness={0.5}\n        setSelected={setSelected}\n      />\n      <Button\n        id={4}\n        texture={texture[4]}\n        position={[6, -6, 0]}\n        setSelected={setSelected}\n      />\n    </Hud>\n  );\n}\n","import { useGLTF } from '@react-three/drei';\nimport { useMemo, useRef, useState } from 'react';\nimport { Mesh } from 'three';\nimport { GLTFResult } from '~/types/use_gltf';\nimport MaterialMenu from './MaterialMenu';\n\nexport default function ArmChair() {\n  const [selected, setSelected] = useState(0);\n\n  const ref = useRef<Mesh>(null);\n  const { nodes, materials } = useGLTF(\n    '/v212/models/armchair-transformed.glb'\n  ) as GLTFResult;\n\n  const materialOverrides = useMemo(() => {\n    return {\n      0: materials.fabric_pattern_05,\n      1: materials.red_leather,\n      2: materials.fabric_pattern_7,\n      3: materials.book_pattern,\n      4: materials.denim_fabric_02,\n    };\n  }, [materials]);\n\n  return (\n    <>\n      <group dispose={null} position={[1.5, 0.299, 1.5]}>\n        <group rotation={[Math.PI / 2, 0, 0]} scale={0.01}>\n          <mesh\n            ref={ref}\n            geometry={nodes.armchair001_1.geometry}\n            material={\n              materialOverrides[selected as keyof typeof materialOverrides]\n            }\n            castShadow\n            receiveShadow\n          />\n          <mesh\n            geometry={nodes.armchair001_3.geometry}\n            material={materials.wooden_legs}\n            castShadow\n          />\n        </group>\n      </group>\n      <MaterialMenu setSelected={setSelected} />\n    </>\n  );\n}\n\nuseGLTF.preload('/v212/models/armchair-transformed.glb');\n","import { useGLTF } from '@react-three/drei';\nimport { GLTFResult } from '~/types/use_gltf';\n\nexport default function Room() {\n  const { nodes, materials } = useGLTF(\n    '/v212/models/room-transformed.glb'\n  ) as GLTFResult;\n\n  return (\n    <>\n      <group dispose={null} position-y={0.3}>\n        <group rotation={[Math.PI / 2, 0, 0]} scale={0.01}>\n          <mesh\n            geometry={nodes.room_1.geometry}\n            material={materials.ground_1}\n            receiveShadow\n          />\n          <mesh\n            geometry={nodes.room_2.geometry}\n            material={materials.wall_1_2}\n            castShadow\n            receiveShadow\n          />\n          <mesh\n            geometry={nodes.room_3.geometry}\n            material={materials.room_5_30}\n            receiveShadow\n          />\n          <mesh\n            geometry={nodes.room_4.geometry}\n            material={materials.white}\n            castShadow\n            receiveShadow\n          />\n          <mesh\n            geometry={nodes.room_5.geometry}\n            material={materials.flltgrey}\n            material-transparent={true}\n            material-opacity={0.1}\n          />\n          <mesh\n            geometry={nodes.room_6.geometry}\n            material={materials.dkgrey}\n            receiveShadow\n          />\n          <mesh\n            geometry={nodes.room_7.geometry}\n            material={materials.amber}\n            castShadow\n          />\n          <mesh\n            geometry={nodes.room_8.geometry}\n            material={materials.yellow_green}\n            castShadow\n          />\n          <mesh\n            geometry={nodes.room_9.geometry}\n            material={materials.flbrown}\n            castShadow\n          />\n        </group>\n      </group>\n    </>\n  );\n}\n\nuseGLTF.preload('/models/room-transformed.glb');\n","import {\n  Environment,\n  Html,\n  OrbitControls,\n  useProgress,\n} from '@react-three/drei';\nimport { Canvas } from '@react-three/fiber';\nimport { Suspense } from 'react';\nimport ArmChair from './ArmChair';\nimport Room from './Room';\n\n/**\n * 物料拾取 copy\n */\nexport const Demo2v12 = () => {\n  return (\n    <>\n      <Canvas shadows camera={{ position: [2.25, 1, 2.25] }}>\n        <Suspense fallback={<Loader />}>\n          <Environment\n            preset=\"forest\"\n            background\n            ground={{\n              height: 2,\n              radius: 115,\n              scale: 100,\n            }}\n          />\n          <directionalLight\n            position={[5, 1.5, 3]}\n            intensity={2}\n            castShadow\n            shadow-mapSize-width={1024}\n            shadow-mapSize-height={1024}\n            shadow-bias={-0.0001}\n          />\n          <Room />\n          <ArmChair />\n          <OrbitControls\n            target={[1.5, 0.8, 1.5]}\n            minPolarAngle={0}\n            maxPolarAngle={Math.PI / 2 + Math.PI / 12}\n          />\n        </Suspense>\n      </Canvas>\n      <div id=\"instructions\">\n        Models from\n        <a href=\"https://sweethome3d.com\" target=\"_blank\" rel=\"noreferrer\">\n          Sweet Home 3D\n        </a>\n        <br />\n        Textures from\n        <a href=\"https://polyhaven.com\" target=\"_blank\" rel=\"noreferrer\">\n          Poly Haven\n        </a>\n      </div>\n    </>\n  );\n};\n\nfunction Loader() {\n  const { progress } = useProgress();\n  return (\n    <Html center className=\"text-white\">\n      {progress} % loaded\n    </Html>\n  );\n}\n\nexport default Demo2v12;\n"],"names":["Button","id","texture","position","setSelected","roughness","ref","useRef","hovered","setHovered","useState","useFrame","_","delta","MathUtils","jsxs","jsx","MaterialMenu","useLoader","TextureLoader","Hud","OrthographicCamera","Environment","ArmChair","selected","nodes","materials","useGLTF","materialOverrides","useMemo","Fragment","Room","Demo2v12","Canvas","Suspense","Loader","OrbitControls","progress","useProgress","Html"],"mappings":"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"}