import{j as t}from"./react/jsx-runtime.js.Cm6upDnr.js";import{r as a}from"./react/index.js.IuPGg7Py.js";import{S as O,q as R,bv as M,E as B,bw as N,A as P,a as E,a9 as L,aT as v,a_ as _,z as G,M as k,P as A,g as D,bx as H}from"./three/build/three.module.js.jQmR1wrA.js";import{O as S}from"./three/examples/jsm/controls/OrbitControls.js.CPcWrYht.js";import{G as T}from"./three/examples/jsm/loaders/GLTFLoader.js.CYs29Pxo.js";import{R as W}from"./three/examples/jsm/loaders/RGBELoader.js.D3_zvnr4.js";import{D as q}from"./three/examples/jsm/loaders/DRACOLoader.js.dk8l8Eub.js";import"./react/jsx-runtime.js_commonjs-module.DrftVG1b.js";import"./react/cjs/react-jsx-runtime.production.min.js.C9aFBgD_.js";import"./react/cjs/react-jsx-runtime.production.min.js_commonjs-exports.Y3wesJj2.js";import"./@chevrotain/cst-dts-gen/lib/src/api.js.Cpj98o6Y.js";import"./react/index.js_commonjs-module.DhgsKDqp.js";import"./react/cjs/react.production.min.js.DpCWH6XP.js";import"./react/cjs/react.production.min.js_commonjs-exports.Y3wesJj2.js";import"./three/examples/jsm/utils/BufferGeometryUtils.js.CptqS1uw.js";const ae=()=>{const h=a.useRef(null),s=a.useMemo(()=>{const e=new O;return e.background=new R(3355443),e.fog=new M(3355443,10,15),e.environment=new W().load("/models/car/venice_sunset_1k.hdr"),e.environment.mapping=B,e.fog=new M(3355443,10,15),e},[]),l=a.useMemo(()=>{const e=new N(40,40,16777215,16777215);return e.material.opacity=1,e.material.depthWrite=!1,e.material.transparent=!0,e.material.opacity=.3,e},[]),d=a.useMemo(()=>{const e=new P(40,window.innerWidth/window.innerHeight,.3,100);return e.position.set(-5,1.4,-4.5),e},[]),i=a.useMemo(()=>{const e=new E({antialias:!0});return e.setPixelRatio(window.devicePixelRatio),e.setSize(window.innerWidth,window.innerHeight),e},[]),g=a.useCallback((e,n)=>{const o=new S(e,n);return o.maxDistance=9,o.maxPolarAngle=L.degToRad(90),o.target.set(0,.5,0),o.update(),o},[]),p=a.useMemo(()=>new v({color:16711680,metalness:1,roughness:.5,clearcoat:1,clearcoatRoughness:.03}),[]),c=a.useMemo(()=>new _({color:16777215,metalness:1,roughness:.5}),[]),u=a.useMemo(()=>new v({color:16777215,metalness:.25,roughness:0,transmission:1}),[]);return a.useEffect(()=>{const e=[],{current:n}=h;if(!n)return;s.add(l);const o=g(d,n);n.appendChild(i.domElement);const w=new q;w.setDecoderPath("https://www.gstatic.com/draco/v1/decoders/");const x=new T;x.setDRACOLoader(w),x.load("/models/car/ferrari.glb",m=>{const r=m.scene.children[0];e.push(r.getObjectByName("rim_fl")),e.push(r.getObjectByName("rim_fr")),e.push(r.getObjectByName("rim_rr")),e.push(r.getObjectByName("rim_rl")),r.getObjectByName("body").material=p;for(const j in e)if(Object.prototype.hasOwnProperty.call(e,j)){const C=e[j];C.material=c}r.getObjectByName("trim").material=c,r.getObjectByName("glass").material=u;const y=new G().load("/car/models/ferrari_ao.png"),f=new k(new A(.655*4,1.3*4),new D({map:y,blending:H,toneMapped:!1,transparent:!0}));f.rotation.x=-Math.PI/2,f.renderOrder=2,r.add(f),s.add(r)});const b=()=>{o.update();const m=-performance.now()/1e3;for(let r=0;r<e.length;r++)e[r].rotation.x=m*Math.PI*2;l.position.z=-m%1,i.render(s,d),requestAnimationFrame(b)};return b(),()=>{i.dispose(),n.removeChild(i.domElement),s.remove(l)}},[p,d,g,u,l,c,i,s]),t.jsxs("div",{text:"#bbb sm",bg:"#333",w:"screen",h:"screen",className:"overflow-hidden overscroll-none",position:"fixed left-0 top-0",children:[t.jsxs("div",{id:"info",children:[t.jsxs("div",{className:"inline-block",mx:"10px",children:[t.jsx("input",{type:"color",defaultValue:"#ff0000",onChange:e=>p.color.set(e.target.value)}),t.jsx("br",{}),t.jsx("span",{children:"Body"})]}),t.jsxs("div",{className:"inline-block",mx:"10px",children:[t.jsx("input",{type:"color",defaultValue:"#ffffff",onChange:e=>c.color.set(e.target.value)}),t.jsx("br",{}),t.jsx("span",{children:"Hub"})]}),t.jsxs("div",{className:"inline-block",mx:"10px",children:[t.jsx("input",{type:"color",defaultValue:"#ffffff",onChange:e=>u.color.set(e.target.value)}),t.jsx("br",{}),t.jsx("span",{children:"Glass"})]})]}),t.jsx("div",{ref:h})]})};export{ae as CarColor,ae as default};
