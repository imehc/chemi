{"version":3,"file":"troika-worker-utils.esm.js.Tf5pxf5n.js","sources":["../../../../node_modules/.pnpm/troika-worker-utils@0.47.2/node_modules/troika-worker-utils/dist/troika-worker-utils.esm.js"],"sourcesContent":["/**\n * Main content for the worker that handles the loading and execution of\n * modules within it.\n */\nfunction workerBootstrap() {\n  var modules = Object.create(null);\n\n  // Handle messages for registering a module\n  function registerModule(ref, callback) {\n    var id = ref.id;\n    var name = ref.name;\n    var dependencies = ref.dependencies; if ( dependencies === void 0 ) dependencies = [];\n    var init = ref.init; if ( init === void 0 ) init = function(){};\n    var getTransferables = ref.getTransferables; if ( getTransferables === void 0 ) getTransferables = null;\n\n    // Only register once\n    if (modules[id]) { return }\n\n    try {\n      // If any dependencies are modules, ensure they're registered and grab their value\n      dependencies = dependencies.map(function (dep) {\n        if (dep && dep.isWorkerModule) {\n          registerModule(dep, function (depResult) {\n            if (depResult instanceof Error) { throw depResult }\n          });\n          dep = modules[dep.id].value;\n        }\n        return dep\n      });\n\n      // Rehydrate functions\n      init = rehydrate((\"<\" + name + \">.init\"), init);\n      if (getTransferables) {\n        getTransferables = rehydrate((\"<\" + name + \">.getTransferables\"), getTransferables);\n      }\n\n      // Initialize the module and store its value\n      var value = null;\n      if (typeof init === 'function') {\n        value = init.apply(void 0, dependencies);\n      } else {\n        console.error('worker module init function failed to rehydrate');\n      }\n      modules[id] = {\n        id: id,\n        value: value,\n        getTransferables: getTransferables\n      };\n      callback(value);\n    } catch(err) {\n      if (!(err && err.noLog)) {\n        console.error(err);\n      }\n      callback(err);\n    }\n  }\n\n  // Handle messages for calling a registered module's result function\n  function callModule(ref, callback) {\n    var ref$1;\n\n    var id = ref.id;\n    var args = ref.args;\n    if (!modules[id] || typeof modules[id].value !== 'function') {\n      callback(new Error((\"Worker module \" + id + \": not found or its 'init' did not return a function\")));\n    }\n    try {\n      var result = (ref$1 = modules[id]).value.apply(ref$1, args);\n      if (result && typeof result.then === 'function') {\n        result.then(handleResult, function (rej) { return callback(rej instanceof Error ? rej : new Error('' + rej)); });\n      } else {\n        handleResult(result);\n      }\n    } catch(err) {\n      callback(err);\n    }\n    function handleResult(result) {\n      try {\n        var tx = modules[id].getTransferables && modules[id].getTransferables(result);\n        if (!tx || !Array.isArray(tx) || !tx.length) {\n          tx = undefined; //postMessage is very picky about not passing null or empty transferables\n        }\n        callback(result, tx);\n      } catch(err) {\n        console.error(err);\n        callback(err);\n      }\n    }\n  }\n\n  function rehydrate(name, str) {\n    var result = void 0;\n    self.troikaDefine = function (r) { return result = r; };\n    var url = URL.createObjectURL(\n      new Blob(\n        [(\"/** \" + (name.replace(/\\*/g, '')) + \" **/\\n\\ntroikaDefine(\\n\" + str + \"\\n)\")],\n        {type: 'application/javascript'}\n      )\n    );\n    try {\n      importScripts(url);\n    } catch(err) {\n      console.error(err);\n    }\n    URL.revokeObjectURL(url);\n    delete self.troikaDefine;\n    return result\n  }\n\n  // Handler for all messages within the worker\n  self.addEventListener('message', function (e) {\n    var ref = e.data;\n    var messageId = ref.messageId;\n    var action = ref.action;\n    var data = ref.data;\n    try {\n      // Module registration\n      if (action === 'registerModule') {\n        registerModule(data, function (result) {\n          if (result instanceof Error) {\n            postMessage({\n              messageId: messageId,\n              success: false,\n              error: result.message\n            });\n          } else {\n            postMessage({\n              messageId: messageId,\n              success: true,\n              result: {isCallable: typeof result === 'function'}\n            });\n          }\n        });\n      }\n      // Invocation\n      if (action === 'callModule') {\n        callModule(data, function (result, transferables) {\n          if (result instanceof Error) {\n            postMessage({\n              messageId: messageId,\n              success: false,\n              error: result.message\n            });\n          } else {\n            postMessage({\n              messageId: messageId,\n              success: true,\n              result: result\n            }, transferables || undefined);\n          }\n        });\n      }\n    } catch(err) {\n      postMessage({\n        messageId: messageId,\n        success: false,\n        error: err.stack\n      });\n    }\n  });\n}\n\n/**\n * Fallback for `defineWorkerModule` that behaves identically but runs in the main\n * thread, for when the execution environment doesn't support web workers or they\n * are disallowed due to e.g. CSP security restrictions.\n */\nfunction defineMainThreadModule(options) {\n  var moduleFunc = function() {\n    var args = [], len = arguments.length;\n    while ( len-- ) args[ len ] = arguments[ len ];\n\n    return moduleFunc._getInitResult().then(function (initResult) {\n      if (typeof initResult === 'function') {\n        return initResult.apply(void 0, args)\n      } else {\n        throw new Error('Worker module function was called but `init` did not return a callable function')\n      }\n    })\n  };\n  moduleFunc._getInitResult = function() {\n    // We can ignore getTransferables in main thread. TODO workerId?\n    var dependencies = options.dependencies;\n    var init = options.init;\n\n    // Resolve dependencies\n    dependencies = Array.isArray(dependencies) ? dependencies.map(function (dep) { return dep && dep._getInitResult ? dep._getInitResult() : dep; }\n    ) : [];\n\n    // Invoke init with the resolved dependencies\n    var initPromise = Promise.all(dependencies).then(function (deps) {\n      return init.apply(null, deps)\n    });\n\n    // Cache the resolved promise for subsequent calls\n    moduleFunc._getInitResult = function () { return initPromise; };\n\n    return initPromise\n  };\n  return moduleFunc\n}\n\nvar supportsWorkers = function () {\n  var supported = false;\n\n  // Only attempt worker initialization in browsers; elsewhere it would just be\n  // noise e.g. loading into a Node environment for SSR.\n  if (typeof window !== 'undefined' && typeof window.document !== 'undefined') {\n    try {\n      // TODO additional checks for things like importScripts within the worker?\n      //  Would need to be an async check.\n      var worker = new Worker(\n        URL.createObjectURL(new Blob([''], { type: 'application/javascript' }))\n      );\n      worker.terminate();\n      supported = true;\n    } catch (err) {\n      if (typeof process !== 'undefined' && process.env.NODE_ENV === 'test') ; else {\n        console.log(\n          (\"Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: [\" + (err.message) + \"]\")\n        );\n      }\n    }\n  }\n\n  // Cached result\n  supportsWorkers = function () { return supported; };\n  return supported\n};\n\nvar _workerModuleId = 0;\nvar _messageId = 0;\nvar _allowInitAsString = false;\nvar workers = Object.create(null);\nvar registeredModules = Object.create(null); //workerId -> Set<unregisterFn>\nvar openRequests = Object.create(null);\n\n\n/**\n * Define a module of code that will be executed with a web worker. This provides a simple\n * interface for moving chunks of logic off the main thread, and managing their dependencies\n * among one another.\n *\n * @param {object} options\n * @param {function} options.init\n * @param {array} [options.dependencies]\n * @param {function} [options.getTransferables]\n * @param {string} [options.name]\n * @param {string} [options.workerId]\n * @return {function(...[*]): {then}}\n */\nfunction defineWorkerModule(options) {\n  if ((!options || typeof options.init !== 'function') && !_allowInitAsString) {\n    throw new Error('requires `options.init` function')\n  }\n  var dependencies = options.dependencies;\n  var init = options.init;\n  var getTransferables = options.getTransferables;\n  var workerId = options.workerId;\n\n  if (!supportsWorkers()) {\n    return defineMainThreadModule(options)\n  }\n\n  if (workerId == null) {\n    workerId = '#default';\n  }\n  var id = \"workerModule\" + (++_workerModuleId);\n  var name = options.name || id;\n  var registrationPromise = null;\n\n  dependencies = dependencies && dependencies.map(function (dep) {\n    // Wrap raw functions as worker modules with no dependencies\n    if (typeof dep === 'function' && !dep.workerModuleData) {\n      _allowInitAsString = true;\n      dep = defineWorkerModule({\n        workerId: workerId,\n        name: (\"<\" + name + \"> function dependency: \" + (dep.name)),\n        init: (\"function(){return (\\n\" + (stringifyFunction(dep)) + \"\\n)}\")\n      });\n      _allowInitAsString = false;\n    }\n    // Grab postable data for worker modules\n    if (dep && dep.workerModuleData) {\n      dep = dep.workerModuleData;\n    }\n    return dep\n  });\n\n  function moduleFunc() {\n    var args = [], len = arguments.length;\n    while ( len-- ) args[ len ] = arguments[ len ];\n\n    // Register this module if needed\n    if (!registrationPromise) {\n      registrationPromise = callWorker(workerId,'registerModule', moduleFunc.workerModuleData);\n      var unregister = function () {\n        registrationPromise = null;\n        registeredModules[workerId].delete(unregister);\n      }\n      ;(registeredModules[workerId] || (registeredModules[workerId] = new Set())).add(unregister);\n    }\n\n    // Invoke the module, returning a promise\n    return registrationPromise.then(function (ref) {\n      var isCallable = ref.isCallable;\n\n      if (isCallable) {\n        return callWorker(workerId,'callModule', {id: id, args: args})\n      } else {\n        throw new Error('Worker module function was called but `init` did not return a callable function')\n      }\n    })\n  }\n  moduleFunc.workerModuleData = {\n    isWorkerModule: true,\n    id: id,\n    name: name,\n    dependencies: dependencies,\n    init: stringifyFunction(init),\n    getTransferables: getTransferables && stringifyFunction(getTransferables)\n  };\n  return moduleFunc\n}\n\n/**\n * Terminate an active Worker by a workerId that was passed to defineWorkerModule.\n * This only terminates the Worker itself; the worker module will remain available\n * and if you call it again its Worker will be respawned.\n * @param {string} workerId\n */\nfunction terminateWorker(workerId) {\n  // Unregister all modules that were registered in that worker\n  if (registeredModules[workerId]) {\n    registeredModules[workerId].forEach(function (unregister) {\n      unregister();\n    });\n  }\n  // Terminate the Worker object\n  if (workers[workerId]) {\n    workers[workerId].terminate();\n    delete workers[workerId];\n  }\n}\n\n/**\n * Stringifies a function into a form that can be deserialized in the worker\n * @param fn\n */\nfunction stringifyFunction(fn) {\n  var str = fn.toString();\n  // If it was defined in object method/property format, it needs to be modified\n  if (!/^function/.test(str) && /^\\w+\\s*\\(/.test(str)) {\n    str = 'function ' + str;\n  }\n  return str\n}\n\n\nfunction getWorker(workerId) {\n  var worker = workers[workerId];\n  if (!worker) {\n    // Bootstrap the worker's content\n    var bootstrap = stringifyFunction(workerBootstrap);\n\n    // Create the worker from the bootstrap function content\n    worker = workers[workerId] = new Worker(\n      URL.createObjectURL(\n        new Blob(\n          [(\"/** Worker Module Bootstrap: \" + (workerId.replace(/\\*/g, '')) + \" **/\\n\\n;(\" + bootstrap + \")()\")],\n          {type: 'application/javascript'}\n        )\n      )\n    );\n\n    // Single handler for response messages from the worker\n    worker.onmessage = function (e) {\n      var response = e.data;\n      var msgId = response.messageId;\n      var callback = openRequests[msgId];\n      if (!callback) {\n        throw new Error('WorkerModule response with empty or unknown messageId')\n      }\n      delete openRequests[msgId];\n      callback(response);\n    };\n  }\n  return worker\n}\n\n// Issue a call to the worker with a callback to handle the response\nfunction callWorker(workerId, action, data) {\n  return new Promise(function (resolve, reject) {\n    var messageId = ++_messageId;\n    openRequests[messageId] = function (response) {\n      if (response.success) {\n        resolve(response.result);\n      } else {\n        reject(new Error((\"Error in worker \" + action + \" call: \" + (response.error))));\n      }\n    };\n    getWorker(workerId).postMessage({\n      messageId: messageId,\n      action: action,\n      data: data\n    });\n  })\n}\n\nexport { defineWorkerModule, stringifyFunction, terminateWorker };\n"],"names":["workerBootstrap","modules","registerModule","ref","callback","id","name","dependencies","init","getTransferables","dep","depResult","rehydrate","value","err","callModule","ref$1","args","result","handleResult","rej","tx","str","r","url","e","messageId","action","data","transferables","defineMainThreadModule","options","moduleFunc","len","initResult","initPromise","deps","supportsWorkers","supported","worker","_workerModuleId","_messageId","_allowInitAsString","workers","registeredModules","openRequests","defineWorkerModule","workerId","registrationPromise","stringifyFunction","callWorker","unregister","isCallable","terminateWorker","fn","getWorker","bootstrap","response","msgId","resolve","reject"],"mappings":"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","x_google_ignoreList":[0]}