import{aK as Xe,aL as Ke,ai as Ve,V as m,aj as R,ak as S,Q as we,A as Z,O as X,al as Ae,G as d}from"../../three/build/three.module.js.jQmR1wrA.js";var We=Object.defineProperty,Ge=(y,h,f)=>h in y?We(y,h,{enumerable:!0,configurable:!0,writable:!0,value:f}):y[h]=f,n=(y,h,f)=>(Ge(y,typeof h!="symbol"?h+"":h,f),f);const K=new Xe,je=new Ke,Be=Math.cos(70*(Math.PI/180)),De=(y,h)=>(y%h+h)%h;class Je extends Ve{constructor(h,f){super(),n(this,"object"),n(this,"domElement"),n(this,"enabled",!0),n(this,"target",new m),n(this,"minDistance",0),n(this,"maxDistance",1/0),n(this,"minZoom",0),n(this,"maxZoom",1/0),n(this,"minPolarAngle",0),n(this,"maxPolarAngle",Math.PI),n(this,"minAzimuthAngle",-1/0),n(this,"maxAzimuthAngle",1/0),n(this,"enableDamping",!1),n(this,"dampingFactor",.05),n(this,"enableZoom",!0),n(this,"zoomSpeed",1),n(this,"enableRotate",!0),n(this,"rotateSpeed",1),n(this,"enablePan",!0),n(this,"panSpeed",1),n(this,"screenSpacePanning",!0),n(this,"keyPanSpeed",7),n(this,"zoomToCursor",!1),n(this,"autoRotate",!1),n(this,"autoRotateSpeed",2),n(this,"reverseOrbit",!1),n(this,"reverseHorizontalOrbit",!1),n(this,"reverseVerticalOrbit",!1),n(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),n(this,"mouseButtons",{LEFT:R.ROTATE,MIDDLE:R.DOLLY,RIGHT:R.PAN}),n(this,"touches",{ONE:S.ROTATE,TWO:S.DOLLY_PAN}),n(this,"target0"),n(this,"position0"),n(this,"zoom0"),n(this,"_domElementKeyEvents",null),n(this,"getPolarAngle"),n(this,"getAzimuthalAngle"),n(this,"setPolarAngle"),n(this,"setAzimuthalAngle"),n(this,"getDistance"),n(this,"listenToKeyEvents"),n(this,"stopListenToKeyEvents"),n(this,"saveState"),n(this,"reset"),n(this,"update"),n(this,"connect"),n(this,"dispose"),this.object=h,this.domElement=f,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>c.phi,this.getAzimuthalAngle=()=>c.theta,this.setPolarAngle=t=>{let o=De(t,2*Math.PI),a=c.phi;a<0&&(a+=2*Math.PI),o<0&&(o+=2*Math.PI);let i=Math.abs(o-a);2*Math.PI-i<i&&(o<a?o+=2*Math.PI:a+=2*Math.PI),p.phi=o-a,e.update()},this.setAzimuthalAngle=t=>{let o=De(t,2*Math.PI),a=c.theta;a<0&&(a+=2*Math.PI),o<0&&(o+=2*Math.PI);let i=Math.abs(o-a);2*Math.PI-i<i&&(o<a?o+=2*Math.PI:a+=2*Math.PI),p.theta=o-a,e.update()},this.getDistance=()=>e.object.position.distanceTo(e.target),this.listenToKeyEvents=t=>{t.addEventListener("keydown",J),this._domElementKeyEvents=t},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",J),this._domElementKeyEvents=null},this.saveState=()=>{e.target0.copy(e.target),e.position0.copy(e.object.position),e.zoom0=e.object.zoom},this.reset=()=>{e.target.copy(e.target0),e.object.position.copy(e.position0),e.object.zoom=e.zoom0,e.object.updateProjectionMatrix(),e.dispatchEvent(ee),e.update(),l=r.NONE},this.update=(()=>{const t=new m,o=new m(0,1,0),a=new we().setFromUnitVectors(h.up,o),i=a.clone().invert(),u=new m,b=new we,O=2*Math.PI;return function(){const Me=e.object.position;a.setFromUnitVectors(h.up,o),i.copy(a).invert(),t.copy(Me).sub(e.target),t.applyQuaternion(a),c.setFromVector3(t),e.autoRotate&&l===r.NONE&&W(Le()),e.enableDamping?(c.theta+=p.theta*e.dampingFactor,c.phi+=p.phi*e.dampingFactor):(c.theta+=p.theta,c.phi+=p.phi);let g=e.minAzimuthAngle,E=e.maxAzimuthAngle;isFinite(g)&&isFinite(E)&&(g<-Math.PI?g+=O:g>Math.PI&&(g-=O),E<-Math.PI?E+=O:E>Math.PI&&(E-=O),g<=E?c.theta=Math.max(g,Math.min(E,c.theta)):c.theta=c.theta>(g+E)/2?Math.max(g,c.theta):Math.min(E,c.theta)),c.phi=Math.max(e.minPolarAngle,Math.min(e.maxPolarAngle,c.phi)),c.makeSafe(),e.enableDamping===!0?e.target.addScaledVector(D,e.dampingFactor):e.target.add(D),e.zoomToCursor&&Y||e.object.isOrthographicCamera?c.radius=B(c.radius):c.radius=B(c.radius*P),t.setFromSpherical(c),t.applyQuaternion(i),Me.copy(e.target).add(t),e.object.matrixAutoUpdate||e.object.updateMatrix(),e.object.lookAt(e.target),e.enableDamping===!0?(p.theta*=1-e.dampingFactor,p.phi*=1-e.dampingFactor,D.multiplyScalar(1-e.dampingFactor)):(p.set(0,0,0),D.set(0,0,0));let C=!1;if(e.zoomToCursor&&Y){let k=null;if(e.object instanceof Z&&e.object.isPerspectiveCamera){const z=t.length();k=B(z*P);const F=z-k;e.object.position.addScaledVector(ne,F),e.object.updateMatrixWorld()}else if(e.object.isOrthographicCamera){const z=new m(T.x,T.y,0);z.unproject(e.object),e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/P)),e.object.updateProjectionMatrix(),C=!0;const F=new m(T.x,T.y,0);F.unproject(e.object),e.object.position.sub(F).add(z),e.object.updateMatrixWorld(),k=t.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),e.zoomToCursor=!1;k!==null&&(e.screenSpacePanning?e.target.set(0,0,-1).transformDirection(e.object.matrix).multiplyScalar(k).add(e.object.position):(K.origin.copy(e.object.position),K.direction.set(0,0,-1).transformDirection(e.object.matrix),Math.abs(e.object.up.dot(K.direction))<Be?h.lookAt(e.target):(je.setFromNormalAndCoplanarPoint(e.object.up,e.target),K.intersectPlane(je,e.target))))}else e.object instanceof X&&e.object.isOrthographicCamera&&(C=P!==1,C&&(e.object.zoom=Math.max(e.minZoom,Math.min(e.maxZoom,e.object.zoom/P)),e.object.updateProjectionMatrix()));return P=1,Y=!1,C||u.distanceToSquared(e.object.position)>oe||8*(1-b.dot(e.object.quaternion))>oe?(e.dispatchEvent(ee),u.copy(e.object.position),b.copy(e.object.quaternion),C=!1,!0):!1}})(),this.connect=t=>{t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),e.domElement=t,e.domElement.style.touchAction="none",e.domElement.addEventListener("contextmenu",Pe),e.domElement.addEventListener("pointerdown",ge),e.domElement.addEventListener("pointercancel",Ee),e.domElement.addEventListener("wheel",ye)},this.dispose=()=>{var t,o,a,i,u,b;e.domElement&&(e.domElement.style.touchAction="auto"),(t=e.domElement)==null||t.removeEventListener("contextmenu",Pe),(o=e.domElement)==null||o.removeEventListener("pointerdown",ge),(a=e.domElement)==null||a.removeEventListener("pointercancel",Ee),(i=e.domElement)==null||i.removeEventListener("wheel",ye),(u=e.domElement)==null||u.ownerDocument.removeEventListener("pointermove",q),(b=e.domElement)==null||b.ownerDocument.removeEventListener("pointerup",Q),e._domElementKeyEvents!==null&&e._domElementKeyEvents.removeEventListener("keydown",J)};const e=this,ee={type:"change"},V={type:"start"},te={type:"end"},r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=r.NONE;const oe=1e-6,c=new Ae,p=new Ae;let P=1;const D=new m,M=new d,w=new d,L=new d,A=new d,j=new d,x=new d,I=new d,v=new d,_=new d,ne=new m,T=new d;let Y=!1;const s=[],H={};function Le(){return 2*Math.PI/60/60*e.autoRotateSpeed}function U(){return Math.pow(.95,e.zoomSpeed)}function W(t){e.reverseOrbit||e.reverseHorizontalOrbit?p.theta+=t:p.theta-=t}function ae(t){e.reverseOrbit||e.reverseVerticalOrbit?p.phi+=t:p.phi-=t}const ie=(()=>{const t=new m;return function(a,i){t.setFromMatrixColumn(i,0),t.multiplyScalar(-a),D.add(t)}})(),se=(()=>{const t=new m;return function(a,i){e.screenSpacePanning===!0?t.setFromMatrixColumn(i,1):(t.setFromMatrixColumn(i,0),t.crossVectors(e.object.up,t)),t.multiplyScalar(a),D.add(t)}})(),N=(()=>{const t=new m;return function(a,i){const u=e.domElement;if(u&&e.object instanceof Z&&e.object.isPerspectiveCamera){const b=e.object.position;t.copy(b).sub(e.target);let O=t.length();O*=Math.tan(e.object.fov/2*Math.PI/180),ie(2*a*O/u.clientHeight,e.object.matrix),se(2*i*O/u.clientHeight,e.object.matrix)}else u&&e.object instanceof X&&e.object.isOrthographicCamera?(ie(a*(e.object.right-e.object.left)/e.object.zoom/u.clientWidth,e.object.matrix),se(i*(e.object.top-e.object.bottom)/e.object.zoom/u.clientHeight,e.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),e.enablePan=!1)}})();function G(t){e.object instanceof Z&&e.object.isPerspectiveCamera||e.object instanceof X&&e.object.isOrthographicCamera?P/=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function re(t){e.object instanceof Z&&e.object.isPerspectiveCamera||e.object instanceof X&&e.object.isOrthographicCamera?P*=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),e.enableZoom=!1)}function le(t){if(!e.zoomToCursor||!e.domElement)return;Y=!0;const o=e.domElement.getBoundingClientRect(),a=t.clientX-o.left,i=t.clientY-o.top,u=o.width,b=o.height;T.x=a/u*2-1,T.y=-(i/b)*2+1,ne.set(T.x,T.y,1).unproject(e.object).sub(e.object.position).normalize()}function B(t){return Math.max(e.minDistance,Math.min(e.maxDistance,t))}function ce(t){M.set(t.clientX,t.clientY)}function xe(t){le(t),I.set(t.clientX,t.clientY)}function ue(t){A.set(t.clientX,t.clientY)}function Ie(t){w.set(t.clientX,t.clientY),L.subVectors(w,M).multiplyScalar(e.rotateSpeed);const o=e.domElement;o&&(W(2*Math.PI*L.x/o.clientHeight),ae(2*Math.PI*L.y/o.clientHeight)),M.copy(w),e.update()}function ve(t){v.set(t.clientX,t.clientY),_.subVectors(v,I),_.y>0?G(U()):_.y<0&&re(U()),I.copy(v),e.update()}function Ne(t){j.set(t.clientX,t.clientY),x.subVectors(j,A).multiplyScalar(e.panSpeed),N(x.x,x.y),A.copy(j),e.update()}function Re(t){le(t),t.deltaY<0?re(U()):t.deltaY>0&&G(U()),e.update()}function Se(t){let o=!1;switch(t.code){case e.keys.UP:N(0,e.keyPanSpeed),o=!0;break;case e.keys.BOTTOM:N(0,-e.keyPanSpeed),o=!0;break;case e.keys.LEFT:N(e.keyPanSpeed,0),o=!0;break;case e.keys.RIGHT:N(-e.keyPanSpeed,0),o=!0;break}o&&(t.preventDefault(),e.update())}function he(){if(s.length==1)M.set(s[0].pageX,s[0].pageY);else{const t=.5*(s[0].pageX+s[1].pageX),o=.5*(s[0].pageY+s[1].pageY);M.set(t,o)}}function pe(){if(s.length==1)A.set(s[0].pageX,s[0].pageY);else{const t=.5*(s[0].pageX+s[1].pageX),o=.5*(s[0].pageY+s[1].pageY);A.set(t,o)}}function me(){const t=s[0].pageX-s[1].pageX,o=s[0].pageY-s[1].pageY,a=Math.sqrt(t*t+o*o);I.set(0,a)}function _e(){e.enableZoom&&me(),e.enablePan&&pe()}function Ce(){e.enableZoom&&me(),e.enableRotate&&he()}function de(t){if(s.length==1)w.set(t.pageX,t.pageY);else{const a=$(t),i=.5*(t.pageX+a.x),u=.5*(t.pageY+a.y);w.set(i,u)}L.subVectors(w,M).multiplyScalar(e.rotateSpeed);const o=e.domElement;o&&(W(2*Math.PI*L.x/o.clientHeight),ae(2*Math.PI*L.y/o.clientHeight)),M.copy(w)}function fe(t){if(s.length==1)j.set(t.pageX,t.pageY);else{const o=$(t),a=.5*(t.pageX+o.x),i=.5*(t.pageY+o.y);j.set(a,i)}x.subVectors(j,A).multiplyScalar(e.panSpeed),N(x.x,x.y),A.copy(j)}function be(t){const o=$(t),a=t.pageX-o.x,i=t.pageY-o.y,u=Math.sqrt(a*a+i*i);v.set(0,u),_.set(0,Math.pow(v.y/I.y,e.zoomSpeed)),G(_.y),I.copy(v)}function ke(t){e.enableZoom&&be(t),e.enablePan&&fe(t)}function ze(t){e.enableZoom&&be(t),e.enableRotate&&de(t)}function ge(t){var o,a;e.enabled!==!1&&(s.length===0&&((o=e.domElement)==null||o.ownerDocument.addEventListener("pointermove",q),(a=e.domElement)==null||a.ownerDocument.addEventListener("pointerup",Q)),Ze(t),t.pointerType==="touch"?Ue(t):Ye(t))}function q(t){e.enabled!==!1&&(t.pointerType==="touch"?Fe(t):He(t))}function Q(t){var o,a,i;Te(t),s.length===0&&((o=e.domElement)==null||o.releasePointerCapture(t.pointerId),(a=e.domElement)==null||a.ownerDocument.removeEventListener("pointermove",q),(i=e.domElement)==null||i.ownerDocument.removeEventListener("pointerup",Q)),e.dispatchEvent(te),l=r.NONE}function Ee(t){Te(t)}function Ye(t){let o;switch(t.button){case 0:o=e.mouseButtons.LEFT;break;case 1:o=e.mouseButtons.MIDDLE;break;case 2:o=e.mouseButtons.RIGHT;break;default:o=-1}switch(o){case R.DOLLY:if(e.enableZoom===!1)return;xe(t),l=r.DOLLY;break;case R.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(e.enablePan===!1)return;ue(t),l=r.PAN}else{if(e.enableRotate===!1)return;ce(t),l=r.ROTATE}break;case R.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(e.enableRotate===!1)return;ce(t),l=r.ROTATE}else{if(e.enablePan===!1)return;ue(t),l=r.PAN}break;default:l=r.NONE}l!==r.NONE&&e.dispatchEvent(V)}function He(t){if(e.enabled!==!1)switch(l){case r.ROTATE:if(e.enableRotate===!1)return;Ie(t);break;case r.DOLLY:if(e.enableZoom===!1)return;ve(t);break;case r.PAN:if(e.enablePan===!1)return;Ne(t);break}}function ye(t){e.enabled===!1||e.enableZoom===!1||l!==r.NONE&&l!==r.ROTATE||(t.preventDefault(),e.dispatchEvent(V),Re(t),e.dispatchEvent(te))}function J(t){e.enabled===!1||e.enablePan===!1||Se(t)}function Ue(t){switch(Oe(t),s.length){case 1:switch(e.touches.ONE){case S.ROTATE:if(e.enableRotate===!1)return;he(),l=r.TOUCH_ROTATE;break;case S.PAN:if(e.enablePan===!1)return;pe(),l=r.TOUCH_PAN;break;default:l=r.NONE}break;case 2:switch(e.touches.TWO){case S.DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;_e(),l=r.TOUCH_DOLLY_PAN;break;case S.DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;Ce(),l=r.TOUCH_DOLLY_ROTATE;break;default:l=r.NONE}break;default:l=r.NONE}l!==r.NONE&&e.dispatchEvent(V)}function Fe(t){switch(Oe(t),l){case r.TOUCH_ROTATE:if(e.enableRotate===!1)return;de(t),e.update();break;case r.TOUCH_PAN:if(e.enablePan===!1)return;fe(t),e.update();break;case r.TOUCH_DOLLY_PAN:if(e.enableZoom===!1&&e.enablePan===!1)return;ke(t),e.update();break;case r.TOUCH_DOLLY_ROTATE:if(e.enableZoom===!1&&e.enableRotate===!1)return;ze(t),e.update();break;default:l=r.NONE}}function Pe(t){e.enabled!==!1&&t.preventDefault()}function Ze(t){s.push(t)}function Te(t){delete H[t.pointerId];for(let o=0;o<s.length;o++)if(s[o].pointerId==t.pointerId){s.splice(o,1);return}}function Oe(t){let o=H[t.pointerId];o===void 0&&(o=new d,H[t.pointerId]=o),o.set(t.pageX,t.pageY)}function $(t){const o=t.pointerId===s[0].pointerId?s[1]:s[0];return H[o.pointerId]}f!==void 0&&this.connect(f),this.update()}}export{Je as O};
