import{_ as f,a as s,b as E}from"../../../tslib/tslib.es6.mjs.tPnMwipl.js";import{t as a}from"./file.js.Dp8CGRsI.js";var P=[".DS_Store","Thumbs.db"];function j(r){return f(this,void 0,void 0,function(){return s(this,function(n){return l(r)&&w(r)?[2,T(r.dataTransfer,r.type)]:_(r)?[2,A(r)]:Array.isArray(r)&&r.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,D(r)]:[2,[]]})})}function w(r){return l(r.dataTransfer)}function _(r){return l(r)&&l(r.target)}function l(r){return typeof r=="object"&&r!==null}function A(r){return h(r.target.files).map(function(n){return a(n)})}function D(r){return f(this,void 0,void 0,function(){var n;return s(this,function(t){switch(t.label){case 0:return[4,Promise.all(r.map(function(e){return e.getFile()}))];case 1:return n=t.sent(),[2,n.map(function(e){return a(e)})]}})})}function T(r,n){return f(this,void 0,void 0,function(){var t,e;return s(this,function(i){switch(i.label){case 0:return r===null?[2,[]]:r.items?(t=h(r.items).filter(function(u){return u.kind==="file"}),n!=="drop"?[2,t]:[4,Promise.all(t.map(I))]):[3,2];case 1:return e=i.sent(),[2,v(g(e))];case 2:return[2,v(h(r.files).map(function(u){return a(u)}))]}})})}function v(r){return r.filter(function(n){return P.indexOf(n.name)===-1})}function h(r){if(r===null)return[];for(var n=[],t=0;t<r.length;t++){var e=r[t];n.push(e)}return n}function I(r){if(typeof r.webkitGetAsEntry!="function")return y(r);var n=r.webkitGetAsEntry();return n&&n.isDirectory?F(n):y(r)}function g(r){return r.reduce(function(n,t){return E(n,Array.isArray(t)?g(t):[t])},[])}function y(r){var n=r.getAsFile();if(!n)return Promise.reject(r+" is not a File");var t=a(n);return Promise.resolve(t)}function O(r){return f(this,void 0,void 0,function(){return s(this,function(n){return[2,r.isDirectory?F(r):k(r)]})})}function F(r){var n=r.createReader();return new Promise(function(t,e){var i=[];function u(){var b=this;n.readEntries(function(c){return f(b,void 0,void 0,function(){var m,d,p;return s(this,function(o){switch(o.label){case 0:if(c.length)return[3,5];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return m=o.sent(),t(m),[3,4];case 3:return d=o.sent(),e(d),[3,4];case 4:return[3,6];case 5:p=Promise.all(c.map(O)),i.push(p),u(),o.label=6;case 6:return[2]}})})},function(c){e(c)})}u()})}function k(r){return f(this,void 0,void 0,function(){return s(this,function(n){return[2,new Promise(function(t,e){r.file(function(i){var u=a(i,r.fullPath);t(u)},function(i){e(i)})})]})})}export{j as f};
//# sourceMappingURL=file-selector.js.zxg81M9y.js.map
