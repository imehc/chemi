import{a as L,c as I}from"../../dom/dist/floating-ui.dom.mjs.DWigF56i.js";import{r as f}from"../../../react/index.js.CiILtb88.js";import{r as J}from"../../../react-dom/index.js.LUY0HZwr.js";const T=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:u}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?L({element:n.current,padding:u}).fn(r):{}:n?L({element:n,padding:u}).fn(r):{}}}};var R=typeof document<"u"?f.useLayoutEffect:f.useEffect;function h(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,u;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!h(e[n],t[n]))return!1;return!0}if(u=Object.keys(e),r=u.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,u[n]))return!1;for(n=r;n--!==0;){const g=u[n];if(!(g==="_owner"&&e.$$typeof)&&!h(e[g],t[g]))return!1}return!0}return e!==e&&t!==t}function A(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function $(e,t){const r=A(e);return Math.round(t*r)/r}function v(e){const t=f.useRef(e);return R(()=>{t.current=e}),t}function U(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:u,elements:{reference:g,floating:q}={},transform:S=!0,whileElementsMounted:k,open:D}=e,[s,_]=f.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[x,B]=f.useState(n);h(x,n)||B(n);const[V,W]=f.useState(null),[z,G]=f.useState(null),C=f.useCallback(o=>{o!==a.current&&(a.current=o,W(o))},[]),F=f.useCallback(o=>{o!==d.current&&(d.current=o,G(o))},[]),i=g||V,l=q||z,a=f.useRef(null),d=f.useRef(null),y=f.useRef(s),H=k!=null,M=v(k),P=v(u),p=f.useCallback(()=>{if(!a.current||!d.current)return;const o={placement:t,strategy:r,middleware:x};P.current&&(o.platform=P.current),I(a.current,d.current,o).then(w=>{const m={...w,isPositioned:!0};E.current&&!h(y.current,m)&&(y.current=m,J.flushSync(()=>{_(m)}))})},[x,t,r,P]);R(()=>{D===!1&&y.current.isPositioned&&(y.current.isPositioned=!1,_(o=>({...o,isPositioned:!1})))},[D]);const E=f.useRef(!1);R(()=>(E.current=!0,()=>{E.current=!1}),[]),R(()=>{if(i&&(a.current=i),l&&(d.current=l),i&&l){if(M.current)return M.current(i,l,p);p()}},[i,l,p,M,H]);const O=f.useMemo(()=>({reference:a,floating:d,setReference:C,setFloating:F}),[C,F]),c=f.useMemo(()=>({reference:i,floating:l}),[i,l]),j=f.useMemo(()=>{const o={position:r,left:0,top:0};if(!c.floating)return o;const w=$(c.floating,s.x),m=$(c.floating,s.y);return S?{...o,transform:"translate("+w+"px, "+m+"px)",...A(c.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:w,top:m}},[r,S,c.floating,s.x,s.y]);return f.useMemo(()=>({...s,update:p,refs:O,elements:c,floatingStyles:j}),[s,p,O,c,j])}export{T as a,U as u};
