import{e as T,g as j,a as Z,b as _,c as tt,d as et,r as W,f as $,h as X,i as Y,j as I,m as H,k as K,l as V,n as N,o as Q,s as nt}from"../../utils/dist/floating-ui.utils.mjs.BpW8C7hz.js";function q(e,n,a){let{reference:c,floating:s}=e;const t=Y(n),f=K(n),d=Q(f),l=j(n),h=t==="y",g=c.x+c.width/2-s.width/2,o=c.y+c.height/2-s.height/2,m=c[d]/2-s[d]/2;let i;switch(l){case"top":i={x:g,y:c.y-s.height};break;case"bottom":i={x:g,y:c.y+c.height};break;case"right":i={x:c.x+c.width,y:o};break;case"left":i={x:c.x-s.width,y:o};break;default:i={x:c.x,y:c.y}}switch(X(n)){case"start":i[f]-=m*(a&&h?-1:1);break;case"end":i[f]+=m*(a&&h?-1:1);break}return i}const ct=async(e,n,a)=>{const{placement:c="bottom",strategy:s="absolute",middleware:t=[],platform:f}=a,d=t.filter(Boolean),l=await(f.isRTL==null?void 0:f.isRTL(n));let h=await f.getElementRects({reference:e,floating:n,strategy:s}),{x:g,y:o}=q(h,c,l),m=c,i={},r=0;for(let x=0;x<d.length;x++){const{name:u,fn:v}=d[x],{x:A,y:p,data:y,reset:w}=await v({x:g,y:o,initialPlacement:c,placement:m,strategy:s,middlewareData:i,rects:h,platform:f,elements:{reference:e,floating:n}});g=A??g,o=p??o,i={...i,[u]:{...i[u],...y}},w&&r<=50&&(r++,typeof w=="object"&&(w.placement&&(m=w.placement),w.rects&&(h=w.rects===!0?await f.getElementRects({reference:e,floating:n,strategy:s}):w.rects),{x:g,y:o}=q(h,m,l)),x=-1)}return{x:g,y:o,placement:m,strategy:s,middlewareData:i}};async function F(e,n){var a;n===void 0&&(n={});const{x:c,y:s,platform:t,rects:f,elements:d,strategy:l}=e,{boundary:h="clippingAncestors",rootBoundary:g="viewport",elementContext:o="floating",altBoundary:m=!1,padding:i=0}=T(n,e),r=$(i),u=d[m?o==="floating"?"reference":"floating":o],v=W(await t.getClippingRect({element:(a=await(t.isElement==null?void 0:t.isElement(u)))==null||a?u:u.contextElement||await(t.getDocumentElement==null?void 0:t.getDocumentElement(d.floating)),boundary:h,rootBoundary:g,strategy:l})),A=o==="floating"?{...f.floating,x:c,y:s}:f.reference,p=await(t.getOffsetParent==null?void 0:t.getOffsetParent(d.floating)),y=await(t.isElement==null?void 0:t.isElement(p))?await(t.getScale==null?void 0:t.getScale(p))||{x:1,y:1}:{x:1,y:1},w=W(t.convertOffsetParentRelativeRectToViewportRelativeRect?await t.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:A,offsetParent:p,strategy:l}):A);return{top:(v.top-w.top+r.top)/y.y,bottom:(w.bottom-v.bottom+r.bottom)/y.y,left:(v.left-w.left+r.left)/y.x,right:(w.right-v.right+r.right)/y.x}}const at=e=>({name:"arrow",options:e,async fn(n){const{x:a,y:c,placement:s,rects:t,platform:f,elements:d,middlewareData:l}=n,{element:h,padding:g=0}=T(e,n)||{};if(h==null)return{};const o=$(g),m={x:a,y:c},i=K(s),r=Q(i),x=await f.getDimensions(h),u=i==="y",v=u?"top":"left",A=u?"bottom":"right",p=u?"clientHeight":"clientWidth",y=t.reference[r]+t.reference[i]-m[i]-t.floating[r],w=m[i]-t.reference[i],b=await(f.getOffsetParent==null?void 0:f.getOffsetParent(h));let R=b?b[p]:0;(!R||!await(f.isElement==null?void 0:f.isElement(b)))&&(R=d.floating[p]||t.floating[r]);const D=y/2-w/2,M=R/2-x[r]/2-1,O=V(o[v],M),L=V(o[A],M),C=O,B=R-x[r]-L,P=R/2-x[r]/2+D,k=I(C,P,B),S=!l.arrow&&X(s)!=null&&P!==k&&t.reference[r]/2-(P<C?O:L)-x[r]/2<0,E=S?P<C?P-C:P-B:0;return{[i]:m[i]+E,data:{[i]:k,centerOffset:P-k-E,...S&&{alignmentOffset:E}},reset:S}}}),lt=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(n){var a,c;const{placement:s,middlewareData:t,rects:f,initialPlacement:d,platform:l,elements:h}=n,{mainAxis:g=!0,crossAxis:o=!0,fallbackPlacements:m,fallbackStrategy:i="bestFit",fallbackAxisSideDirection:r="none",flipAlignment:x=!0,...u}=T(e,n);if((a=t.arrow)!=null&&a.alignmentOffset)return{};const v=j(s),A=j(d)===d,p=await(l.isRTL==null?void 0:l.isRTL(h.floating)),y=m||(A||!x?[Z(d)]:_(d));!m&&r!=="none"&&y.push(...tt(d,x,r,p));const w=[d,...y],b=await F(n,u),R=[];let D=((c=t.flip)==null?void 0:c.overflows)||[];if(g&&R.push(b[v]),o){const C=et(s,f,p);R.push(b[C[0]],b[C[1]])}if(D=[...D,{placement:s,overflows:R}],!R.every(C=>C<=0)){var M,O;const C=(((M=t.flip)==null?void 0:M.index)||0)+1,B=w[C];if(B)return{data:{index:C,overflows:D},reset:{placement:B}};let P=(O=D.filter(k=>k.overflows[0]<=0).sort((k,S)=>k.overflows[1]-S.overflows[1])[0])==null?void 0:O.placement;if(!P)switch(i){case"bestFit":{var L;const k=(L=D.map(S=>[S.placement,S.overflows.filter(E=>E>0).reduce((E,z)=>E+z,0)]).sort((S,E)=>S[1]-E[1])[0])==null?void 0:L[0];k&&(P=k);break}case"initialPlacement":P=d;break}if(s!==P)return{reset:{placement:P}}}return{}}}};function G(e,n){return{top:e.top-n.height,right:e.right-n.width,bottom:e.bottom-n.height,left:e.left-n.width}}function J(e){return nt.some(n=>e[n]>=0)}const rt=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(n){const{rects:a}=n,{strategy:c="referenceHidden",...s}=T(e,n);switch(c){case"referenceHidden":{const t=await F(n,{...s,elementContext:"reference"}),f=G(t,a.reference);return{data:{referenceHiddenOffsets:f,referenceHidden:J(f)}}}case"escaped":{const t=await F(n,{...s,altBoundary:!0}),f=G(t,a.floating);return{data:{escapedOffsets:f,escaped:J(f)}}}default:return{}}}}};function U(e){const n=V(...e.map(t=>t.left)),a=V(...e.map(t=>t.top)),c=H(...e.map(t=>t.right)),s=H(...e.map(t=>t.bottom));return{x:n,y:a,width:c-n,height:s-a}}function it(e){const n=e.slice().sort((s,t)=>s.y-t.y),a=[];let c=null;for(let s=0;s<n.length;s++){const t=n[s];!c||t.y-c.y>c.height/2?a.push([t]):a[a.length-1].push(t),c=t}return a.map(s=>W(U(s)))}const ft=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(n){const{placement:a,elements:c,rects:s,platform:t,strategy:f}=n,{padding:d=2,x:l,y:h}=T(e,n),g=Array.from(await(t.getClientRects==null?void 0:t.getClientRects(c.reference))||[]),o=it(g),m=W(U(g)),i=$(d);function r(){if(o.length===2&&o[0].left>o[1].right&&l!=null&&h!=null)return o.find(u=>l>u.left-i.left&&l<u.right+i.right&&h>u.top-i.top&&h<u.bottom+i.bottom)||m;if(o.length>=2){if(Y(a)==="y"){const O=o[0],L=o[o.length-1],C=j(a)==="top",B=O.top,P=L.bottom,k=C?O.left:L.left,S=C?O.right:L.right,E=S-k,z=P-B;return{top:B,bottom:P,left:k,right:S,width:E,height:z,x:k,y:B}}const u=j(a)==="left",v=H(...o.map(O=>O.right)),A=V(...o.map(O=>O.left)),p=o.filter(O=>u?O.left===A:O.right===v),y=p[0].top,w=p[p.length-1].bottom,b=A,R=v,D=R-b,M=w-y;return{top:y,bottom:w,left:b,right:R,width:D,height:M,x:b,y}}return m}const x=await t.getElementRects({reference:{getBoundingClientRect:r},floating:c.floating,strategy:f});return s.reference.x!==x.reference.x||s.reference.y!==x.reference.y||s.reference.width!==x.reference.width||s.reference.height!==x.reference.height?{reset:{rects:x}}:{}}}};async function st(e,n){const{placement:a,platform:c,elements:s}=e,t=await(c.isRTL==null?void 0:c.isRTL(s.floating)),f=j(a),d=X(a),l=Y(a)==="y",h=["left","top"].includes(f)?-1:1,g=t&&l?-1:1,o=T(n,e);let{mainAxis:m,crossAxis:i,alignmentAxis:r}=typeof o=="number"?{mainAxis:o,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...o};return d&&typeof r=="number"&&(i=d==="end"?r*-1:r),l?{x:i*g,y:m*h}:{x:m*h,y:i*g}}const mt=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(n){var a,c;const{x:s,y:t,placement:f,middlewareData:d}=n,l=await st(n,e);return f===((a=d.offset)==null?void 0:a.placement)&&(c=d.arrow)!=null&&c.alignmentOffset?{}:{x:s+l.x,y:t+l.y,data:{...l,placement:f}}}}},dt=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(n){const{x:a,y:c,placement:s}=n,{mainAxis:t=!0,crossAxis:f=!1,limiter:d={fn:u=>{let{x:v,y:A}=u;return{x:v,y:A}}},...l}=T(e,n),h={x:a,y:c},g=await F(n,l),o=Y(j(s)),m=N(o);let i=h[m],r=h[o];if(t){const u=m==="y"?"top":"left",v=m==="y"?"bottom":"right",A=i+g[u],p=i-g[v];i=I(A,i,p)}if(f){const u=o==="y"?"top":"left",v=o==="y"?"bottom":"right",A=r+g[u],p=r-g[v];r=I(A,r,p)}const x=d.fn({...n,[m]:i,[o]:r});return{...x,data:{x:x.x-a,y:x.y-c}}}}},gt=function(e){return e===void 0&&(e={}),{options:e,fn(n){const{x:a,y:c,placement:s,rects:t,middlewareData:f}=n,{offset:d=0,mainAxis:l=!0,crossAxis:h=!0}=T(e,n),g={x:a,y:c},o=Y(s),m=N(o);let i=g[m],r=g[o];const x=T(d,n),u=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(l){const p=m==="y"?"height":"width",y=t.reference[m]-t.floating[p]+u.mainAxis,w=t.reference[m]+t.reference[p]-u.mainAxis;i<y?i=y:i>w&&(i=w)}if(h){var v,A;const p=m==="y"?"width":"height",y=["top","left"].includes(j(s)),w=t.reference[o]-t.floating[p]+(y&&((v=f.offset)==null?void 0:v[o])||0)+(y?0:u.crossAxis),b=t.reference[o]+t.reference[p]+(y?0:((A=f.offset)==null?void 0:A[o])||0)-(y?u.crossAxis:0);r<w?r=w:r>b&&(r=b)}return{[m]:i,[o]:r}}}},ut=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(n){const{placement:a,rects:c,platform:s,elements:t}=n,{apply:f=()=>{},...d}=T(e,n),l=await F(n,d),h=j(a),g=X(a),o=Y(a)==="y",{width:m,height:i}=c.floating;let r,x;h==="top"||h==="bottom"?(r=h,x=g===(await(s.isRTL==null?void 0:s.isRTL(t.floating))?"start":"end")?"left":"right"):(x=h,r=g==="end"?"top":"bottom");const u=i-l[r],v=m-l[x],A=!n.middlewareData.shift;let p=u,y=v;if(o){const b=m-l.left-l.right;y=g||A?V(v,b):b}else{const b=i-l.top-l.bottom;p=g||A?V(u,b):b}if(A&&!g){const b=H(l.left,0),R=H(l.right,0),D=H(l.top,0),M=H(l.bottom,0);o?y=m-2*(b!==0||R!==0?b+R:H(l.left,l.right)):p=i-2*(D!==0||M!==0?D+M:H(l.top,l.bottom))}await f({...n,availableWidth:y,availableHeight:p});const w=await s.getDimensions(t.floating);return m!==w.width||i!==w.height?{reset:{rects:!0}}:{}}}};export{ut as a,at as b,ct as c,lt as f,rt as h,ft as i,gt as l,mt as o,dt as s};
