import{e as L,g as V,a as Z,b as _,c as tt,d as et,r as W,f as $,h as Y,i as I,j as X,m as j,k as H,l as K,n as N,o as Q,s as nt}from"../../utils/dist/floating-ui.utils.mjs.DyY9BVk9.js";function q(e,n,a){let{reference:c,floating:s}=e;const t=Y(n),r=K(n),d=Q(r),l=V(n),h=t==="y",g=c.x+c.width/2-s.width/2,o=c.y+c.height/2-s.height/2,m=c[d]/2-s[d]/2;let i;switch(l){case"top":i={x:g,y:c.y-s.height};break;case"bottom":i={x:g,y:c.y+c.height};break;case"right":i={x:c.x+c.width,y:o};break;case"left":i={x:c.x-s.width,y:o};break;default:i={x:c.x,y:c.y}}switch(X(n)){case"start":i[r]-=m*(a&&h?-1:1);break;case"end":i[r]+=m*(a&&h?-1:1);break}return i}const ct=async(e,n,a)=>{const{placement:c="bottom",strategy:s="absolute",middleware:t=[],platform:r}=a,d=t.filter(Boolean),l=await(r.isRTL==null?void 0:r.isRTL(n));let h=await r.getElementRects({reference:e,floating:n,strategy:s}),{x:g,y:o}=q(h,c,l),m=c,i={},f=0;for(let x=0;x<d.length;x++){const{name:u,fn:v}=d[x],{x:A,y:p,data:y,reset:w}=await v({x:g,y:o,initialPlacement:c,placement:m,strategy:s,middlewareData:i,rects:h,platform:r,elements:{reference:e,floating:n}});g=A??g,o=p??o,i={...i,[u]:{...i[u],...y}},w&&f<=50&&(f++,typeof w=="object"&&(w.placement&&(m=w.placement),w.rects&&(h=w.rects===!0?await r.getElementRects({reference:e,floating:n,strategy:s}):w.rects),{x:g,y:o}=q(h,m,l)),x=-1)}return{x:g,y:o,placement:m,strategy:s,middlewareData:i}};async function F(e,n){var a;n===void 0&&(n={});const{x:c,y:s,platform:t,rects:r,elements:d,strategy:l}=e,{boundary:h="clippingAncestors",rootBoundary:g="viewport",elementContext:o="floating",altBoundary:m=!1,padding:i=0}=L(n,e),f=$(i),u=d[m?o==="floating"?"reference":"floating":o],v=W(await t.getClippingRect({element:(a=await(t.isElement==null?void 0:t.isElement(u)))==null||a?u:u.contextElement||await(t.getDocumentElement==null?void 0:t.getDocumentElement(d.floating)),boundary:h,rootBoundary:g,strategy:l})),A=o==="floating"?{x:c,y:s,width:r.floating.width,height:r.floating.height}:r.reference,p=await(t.getOffsetParent==null?void 0:t.getOffsetParent(d.floating)),y=await(t.isElement==null?void 0:t.isElement(p))?await(t.getScale==null?void 0:t.getScale(p))||{x:1,y:1}:{x:1,y:1},w=W(t.convertOffsetParentRelativeRectToViewportRelativeRect?await t.convertOffsetParentRelativeRectToViewportRelativeRect({elements:d,rect:A,offsetParent:p,strategy:l}):A);return{top:(v.top-w.top+f.top)/y.y,bottom:(w.bottom-v.bottom+f.bottom)/y.y,left:(v.left-w.left+f.left)/y.x,right:(w.right-v.right+f.right)/y.x}}const at=e=>({name:"arrow",options:e,async fn(n){const{x:a,y:c,placement:s,rects:t,platform:r,elements:d,middlewareData:l}=n,{element:h,padding:g=0}=L(e,n)||{};if(h==null)return{};const o=$(g),m={x:a,y:c},i=K(s),f=Q(i),x=await r.getDimensions(h),u=i==="y",v=u?"top":"left",A=u?"bottom":"right",p=u?"clientHeight":"clientWidth",y=t.reference[f]+t.reference[i]-m[i]-t.floating[f],w=m[i]-t.reference[i],R=await(r.getOffsetParent==null?void 0:r.getOffsetParent(h));let O=R?R[p]:0;(!O||!await(r.isElement==null?void 0:r.isElement(R)))&&(O=d.floating[p]||t.floating[f]);const D=y/2-w/2,T=O/2-x[f]/2-1,b=j(o[v],T),E=j(o[A],T),C=b,B=O-x[f]-E,P=O/2-x[f]/2+D,k=I(C,P,B),S=!l.arrow&&X(s)!=null&&P!==k&&t.reference[f]/2-(P<C?b:E)-x[f]/2<0,M=S?P<C?P-C:P-B:0;return{[i]:m[i]+M,data:{[i]:k,centerOffset:P-k-M,...S&&{alignmentOffset:M}},reset:S}}}),lt=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(n){var a,c;const{placement:s,middlewareData:t,rects:r,initialPlacement:d,platform:l,elements:h}=n,{mainAxis:g=!0,crossAxis:o=!0,fallbackPlacements:m,fallbackStrategy:i="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:x=!0,...u}=L(e,n);if((a=t.arrow)!=null&&a.alignmentOffset)return{};const v=V(s),A=V(d)===d,p=await(l.isRTL==null?void 0:l.isRTL(h.floating)),y=m||(A||!x?[Z(d)]:_(d));!m&&f!=="none"&&y.push(...tt(d,x,f,p));const w=[d,...y],R=await F(n,u),O=[];let D=((c=t.flip)==null?void 0:c.overflows)||[];if(g&&O.push(R[v]),o){const C=et(s,r,p);O.push(R[C[0]],R[C[1]])}if(D=[...D,{placement:s,overflows:O}],!O.every(C=>C<=0)){var T,b;const C=(((T=t.flip)==null?void 0:T.index)||0)+1,B=w[C];if(B)return{data:{index:C,overflows:D},reset:{placement:B}};let P=(b=D.filter(k=>k.overflows[0]<=0).sort((k,S)=>k.overflows[1]-S.overflows[1])[0])==null?void 0:b.placement;if(!P)switch(i){case"bestFit":{var E;const k=(E=D.map(S=>[S.placement,S.overflows.filter(M=>M>0).reduce((M,z)=>M+z,0)]).sort((S,M)=>S[1]-M[1])[0])==null?void 0:E[0];k&&(P=k);break}case"initialPlacement":P=d;break}if(s!==P)return{reset:{placement:P}}}return{}}}};function G(e,n){return{top:e.top-n.height,right:e.right-n.width,bottom:e.bottom-n.height,left:e.left-n.width}}function J(e){return nt.some(n=>e[n]>=0)}const rt=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(n){const{rects:a}=n,{strategy:c="referenceHidden",...s}=L(e,n);switch(c){case"referenceHidden":{const t=await F(n,{...s,elementContext:"reference"}),r=G(t,a.reference);return{data:{referenceHiddenOffsets:r,referenceHidden:J(r)}}}case"escaped":{const t=await F(n,{...s,altBoundary:!0}),r=G(t,a.floating);return{data:{escapedOffsets:r,escaped:J(r)}}}default:return{}}}}};function U(e){const n=j(...e.map(t=>t.left)),a=j(...e.map(t=>t.top)),c=H(...e.map(t=>t.right)),s=H(...e.map(t=>t.bottom));return{x:n,y:a,width:c-n,height:s-a}}function it(e){const n=e.slice().sort((s,t)=>s.y-t.y),a=[];let c=null;for(let s=0;s<n.length;s++){const t=n[s];!c||t.y-c.y>c.height/2?a.push([t]):a[a.length-1].push(t),c=t}return a.map(s=>W(U(s)))}const ft=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(n){const{placement:a,elements:c,rects:s,platform:t,strategy:r}=n,{padding:d=2,x:l,y:h}=L(e,n),g=Array.from(await(t.getClientRects==null?void 0:t.getClientRects(c.reference))||[]),o=it(g),m=W(U(g)),i=$(d);function f(){if(o.length===2&&o[0].left>o[1].right&&l!=null&&h!=null)return o.find(u=>l>u.left-i.left&&l<u.right+i.right&&h>u.top-i.top&&h<u.bottom+i.bottom)||m;if(o.length>=2){if(Y(a)==="y"){const b=o[0],E=o[o.length-1],C=V(a)==="top",B=b.top,P=E.bottom,k=C?b.left:E.left,S=C?b.right:E.right,M=S-k,z=P-B;return{top:B,bottom:P,left:k,right:S,width:M,height:z,x:k,y:B}}const u=V(a)==="left",v=H(...o.map(b=>b.right)),A=j(...o.map(b=>b.left)),p=o.filter(b=>u?b.left===A:b.right===v),y=p[0].top,w=p[p.length-1].bottom,R=A,O=v,D=O-R,T=w-y;return{top:y,bottom:w,left:R,right:O,width:D,height:T,x:R,y}}return m}const x=await t.getElementRects({reference:{getBoundingClientRect:f},floating:c.floating,strategy:r});return s.reference.x!==x.reference.x||s.reference.y!==x.reference.y||s.reference.width!==x.reference.width||s.reference.height!==x.reference.height?{reset:{rects:x}}:{}}}};async function st(e,n){const{placement:a,platform:c,elements:s}=e,t=await(c.isRTL==null?void 0:c.isRTL(s.floating)),r=V(a),d=X(a),l=Y(a)==="y",h=["left","top"].includes(r)?-1:1,g=t&&l?-1:1,o=L(n,e);let{mainAxis:m,crossAxis:i,alignmentAxis:f}=typeof o=="number"?{mainAxis:o,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...o};return d&&typeof f=="number"&&(i=d==="end"?f*-1:f),l?{x:i*g,y:m*h}:{x:m*h,y:i*g}}const mt=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(n){var a,c;const{x:s,y:t,placement:r,middlewareData:d}=n,l=await st(n,e);return r===((a=d.offset)==null?void 0:a.placement)&&(c=d.arrow)!=null&&c.alignmentOffset?{}:{x:s+l.x,y:t+l.y,data:{...l,placement:r}}}}},dt=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(n){const{x:a,y:c,placement:s}=n,{mainAxis:t=!0,crossAxis:r=!1,limiter:d={fn:u=>{let{x:v,y:A}=u;return{x:v,y:A}}},...l}=L(e,n),h={x:a,y:c},g=await F(n,l),o=Y(V(s)),m=N(o);let i=h[m],f=h[o];if(t){const u=m==="y"?"top":"left",v=m==="y"?"bottom":"right",A=i+g[u],p=i-g[v];i=I(A,i,p)}if(r){const u=o==="y"?"top":"left",v=o==="y"?"bottom":"right",A=f+g[u],p=f-g[v];f=I(A,f,p)}const x=d.fn({...n,[m]:i,[o]:f});return{...x,data:{x:x.x-a,y:x.y-c}}}}},gt=function(e){return e===void 0&&(e={}),{options:e,fn(n){const{x:a,y:c,placement:s,rects:t,middlewareData:r}=n,{offset:d=0,mainAxis:l=!0,crossAxis:h=!0}=L(e,n),g={x:a,y:c},o=Y(s),m=N(o);let i=g[m],f=g[o];const x=L(d,n),u=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(l){const p=m==="y"?"height":"width",y=t.reference[m]-t.floating[p]+u.mainAxis,w=t.reference[m]+t.reference[p]-u.mainAxis;i<y?i=y:i>w&&(i=w)}if(h){var v,A;const p=m==="y"?"width":"height",y=["top","left"].includes(V(s)),w=t.reference[o]-t.floating[p]+(y&&((v=r.offset)==null?void 0:v[o])||0)+(y?0:u.crossAxis),R=t.reference[o]+t.reference[p]+(y?0:((A=r.offset)==null?void 0:A[o])||0)-(y?u.crossAxis:0);f<w?f=w:f>R&&(f=R)}return{[m]:i,[o]:f}}}},ut=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(n){const{placement:a,rects:c,platform:s,elements:t}=n,{apply:r=()=>{},...d}=L(e,n),l=await F(n,d),h=V(a),g=X(a),o=Y(a)==="y",{width:m,height:i}=c.floating;let f,x;h==="top"||h==="bottom"?(f=h,x=g===(await(s.isRTL==null?void 0:s.isRTL(t.floating))?"start":"end")?"left":"right"):(x=h,f=g==="end"?"top":"bottom");const u=i-l.top-l.bottom,v=m-l.left-l.right,A=j(i-l[f],u),p=j(m-l[x],v),y=!n.middlewareData.shift;let w=A,R=p;if(o?R=g||y?j(p,v):v:w=g||y?j(A,u):u,y&&!g){const D=H(l.left,0),T=H(l.right,0),b=H(l.top,0),E=H(l.bottom,0);o?R=m-2*(D!==0||T!==0?D+T:H(l.left,l.right)):w=i-2*(b!==0||E!==0?b+E:H(l.top,l.bottom))}await r({...n,availableWidth:R,availableHeight:w});const O=await s.getDimensions(t.floating);return m!==O.width||i!==O.height?{reset:{rects:!0}}:{}}}};export{ut as a,at as b,ct as c,lt as f,rt as h,ft as i,gt as l,mt as o,dt as s};
