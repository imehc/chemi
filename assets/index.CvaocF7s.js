import{j as r}from"./react/jsx-runtime.js.Cm6upDnr.js";import{C as D}from"./@react-three/fiber/dist/react-three-fiber.esm.js.uSMXqHGH.js";import{P as F,u as w,a as G,R as g,B as P,C as J}from"./@react-three/rapier/dist/react-three-rapier.esm.js.CISaVXrj.js";import{M as O,a as U}from"./meshline/dist/index.js.BsFEwnA9.js";import{r as o}from"./react/index.js.IuPGg7Py.js";import{V as i,by as V,aB as W}from"./three/build/three.module.js.jQmR1wrA.js";import{u as A}from"./leva/dist/leva.esm.js.CMWpEvEf.js";import{e as K,u as N,a as q}from"./@react-three/fiber/dist/index-ba8afaa4.esm.js.CC8UC62r.js";import{u as S}from"./@react-three/drei/core/useGLTF.js.I5CDgch2.js";import{u as T}from"./@react-three/drei/core/useTexture.js.BAFTQVZs.js";import{E as H}from"./@react-three/drei/core/Environment.js.BN8gDpHm.js";import{L as x}from"./@react-three/drei/core/Lightformer.js.DIrQJ9u5.js";import"./react/jsx-runtime.js_commonjs-module.DrftVG1b.js";import"./react/cjs/react-jsx-runtime.production.min.js.C9aFBgD_.js";import"./react/cjs/react-jsx-runtime.production.min.js_commonjs-exports.Y3wesJj2.js";import"./react-use-measure/dist/web.js.0CDZZggC.js";import"./debounce/index.js.A01yxaYv.js";import"./@chevrotain/cst-dts-gen/lib/src/api.js.Cpj98o6Y.js";import"./its-fine/dist/index.js.CBEqHD9G.js";import"./react-reconciler/constants.js.cziiqKC3.js";import"./react-reconciler/constants.js_commonjs-module.BUUaCVL8.js";import"./react-reconciler/cjs/react-reconciler-constants.production.min.js.BLy92Rht.js";import"./react-reconciler/cjs/react-reconciler-constants.production.min.js_commonjs-exports.Y3wesJj2.js";import"./react-reconciler/index.js.DwfphOJC.js";import"./react-reconciler/index.js_commonjs-module.DhgsKDqp.js";import"./react-reconciler/cjs/react-reconciler.production.min.js.C-zayX3I.js";import"./scheduler/index.js.DPKlw4YW.js";import"./scheduler/index.js_commonjs-module.IyF5mD2q.js";import"./scheduler/cjs/scheduler.production.min.js.BiBLb9Ep.js";import"./scheduler/cjs/scheduler.production.min.js_commonjs-exports.vhg0vpYA.js";import"./@react-three/drei/core/useVideoTexture.js.ClUDHY4w.js";import"./@dimforge/rapier3d-compat/rapier.es.js.DB2a0ird.js";import"./suspend-react/index.js.BKIKQNXN.js";import"./three-stdlib/utils/BufferGeometryUtils.js.DS2-lAWa.js";import"./react/index.js_commonjs-module.DhgsKDqp.js";import"./react/cjs/react.production.min.js.DpCWH6XP.js";import"./react/cjs/react.production.min.js_commonjs-exports.Y3wesJj2.js";import"./leva/dist/vector-plugin-6f82aee9.esm.js.CFCGl2p1.js";import"./react-dom/index.js.DLK93kQg.js";import"./react-dom/index.js_commonjs-module.DhgsKDqp.js";import"./react-dom/cjs/react-dom.production.min.js.BaU55GLq.js";import"./react-dom/cjs/react-dom.production.min.js_commonjs-exports.Y3wesJj2.js";import"./@radix-ui/react-portal/dist/index.mjs.C-CiyrLd.js";import"./@babel/runtime/helpers/esm/extends.js.CF3RwP-h.js";import"./@radix-ui/react-primitive/dist/index.mjs.D0sMAeWV.js";import"./@radix-ui/react-slot/dist/index.mjs.BQomTIVK.js";import"./@radix-ui/react-compose-refs/dist/index.mjs.3QHn7L2p.js";import"./dequal/lite/index.mjs.CnqicUFC.js";import"./zustand/esm/shallow.js.C2oVrJi4.js";import"./v8n/dist/v8n.esm.js.RmYqvSmG.js";import"./@stitches/react/dist/index.mjs.DlDfRUwH.js";import"./@use-gesture/react/dist/use-gesture-react.esm.js.C9MISAjN.js";import"./@use-gesture/core/dist/use-gesture-core.esm.js.D4mwctx6.js";import"./@use-gesture/core/dist/actions-fe213e88.esm.js._hhkJEmH.js";import"./@use-gesture/core/dist/maths-0ab39ae9.esm.js.B7bMZGCn.js";import"./@radix-ui/react-tooltip/dist/index.mjs.Co92n2i1.js";import"./@radix-ui/primitive/dist/index.mjs.CcyUcsxs.js";import"./@radix-ui/react-context/dist/index.mjs.DxkCy942.js";import"./@radix-ui/react-dismissable-layer/dist/index.mjs.ByeB0pVq.js";import"./@radix-ui/react-use-callback-ref/dist/index.mjs.MU-6vdSB.js";import"./@radix-ui/react-use-escape-keydown/dist/index.mjs.CV6gcMZp.js";import"./@radix-ui/react-id/dist/index.mjs.CdJB_eHw.js";import"./@radix-ui/react-use-layout-effect/dist/index.mjs.B_zlnwqv.js";import"./@radix-ui/react-popper/dist/index.mjs.eLk4LJ9V.js";import"./@floating-ui/react-dom/dist/floating-ui.react-dom.mjs.B38vdQb9.js";import"./@floating-ui/dom/dist/floating-ui.dom.mjs.BDa5o-tO.js";import"./@floating-ui/core/dist/floating-ui.core.mjs.B_tV41Wj.js";import"./@floating-ui/utils/dist/floating-ui.utils.mjs.DyY9BVk9.js";import"./@floating-ui/utils/dist/floating-ui.utils.dom.mjs.CVC-ABX2.js";import"./@radix-ui/react-arrow/dist/index.mjs.H2wOViIH.js";import"./@radix-ui/react-use-size/dist/index.mjs.djlGrYZ9.js";import"./@radix-ui/react-presence/dist/index.mjs.BPC34XkP.js";import"./@radix-ui/react-use-controllable-state/dist/index.mjs.CeI-rk1_.js";import"./@radix-ui/react-visually-hidden/dist/index.mjs.Dji7hXZ8.js";import"./colord/index.mjs.DBTcbsYJ.js";import"./colord/plugins/names.mjs.CbN76U8r.js";import"./react-colorful/dist/index.mjs.B7aiSE2f.js";import"./react-dropzone/dist/es/index.js.X-P1BAuW.js";import"./prop-types/index.js.DTcPoLZm.js";import"./prop-types/index.js_commonjs-module.D3Mh_3u0.js";import"./prop-types/factoryWithThrowingShims.js.Dk9Anxnj.js";import"./prop-types/lib/ReactPropTypesSecret.js.CLC_8rkX.js";import"./file-selector/dist/es5/file-selector.js.f9ni5KFv.js";import"./tslib/tslib.es6.mjs.loakx6tV.js";import"./file-selector/dist/es5/file.js.C-CAUPYS.js";import"./react-dropzone/dist/es/utils/index.js.BW15PP31.js";import"./attr-accept/dist/es/index.js.DLIfoYC7.js";import"./zustand/esm/index.js.Cv_BSyMC.js";import"./zustand/esm/middleware.js.DAG3BtOX.js";import"./merge-value/index.js.C15LZU0E.js";import"./is-extendable/index.js.pcIfiZkQ.js";import"./is-plain-object/index.js.B3ioNYiP.js";import"./isobject/index.js.Qx9SLt0t.js";import"./mixin-deep/index.js.B_zC9uOH.js";import"./for-in/index.js.CWoFKfNm.js";import"./get-value/index.js.D8bq3Gq4.js";import"./set-value/index.js.CYW2xDjX.js";import"./split-string/index.js.su87N4oj.js";import"./extend-shallow/index.js.C0AOJ74M.js";import"./assign-symbols/index.js.DGz-2vKk.js";import"./three-stdlib/loaders/GLTFLoader.js.CcUAsLKB.js";import"./three-stdlib/_polyfill/constants.js.DuRMXTgx.js";import"./three-stdlib/loaders/DRACOLoader.js.Br4A8fvI.js";import"./three-stdlib/libs/MeshoptDecoder.js.C7b7PewA.js";import"./three-stdlib/objects/GroundProjectedEnv.js.DLk9lWeV.js";import"./@react-three/drei/core/useEnvironment.js.D-A-5KSM.js";import"./three-stdlib/loaders/RGBELoader.js.BImqJYtu.js";import"./three-stdlib/loaders/EXRLoader.js.Z0yrO-Gy.js";import"./fflate/esm/browser.js.MYZVcNpg.js";import"./@monogrid/gainmap-js/dist/decode.js.CUkLxOiA.js";import"./@monogrid/gainmap-js/dist/QuadRenderer-6HrRQdJM.js.CuN82Fif.js";import"./@react-three/drei/helpers/environment-assets.js.Cl7hcwyA.js";import"./@react-three/drei/helpers/deprecated.js.DPxl23Y9.js";K({MeshLineGeometry:O,MeshLineMaterial:U});S.preload("/card/tag.glb");T.preload("/card/band.jpeg");const ro=()=>{const{debug:h}=A({debug:!1});return r.jsxs(D,{camera:{position:[0,0,13],fov:25},children:[r.jsx("ambientLight",{intensity:Math.PI}),r.jsx(F,{debug:h,interpolate:!0,gravity:[0,-40,0],timeStep:1/60,children:r.jsx(Q,{})}),r.jsxs(H,{background:!0,blur:.75,children:[r.jsx("color",{attach:"background",args:["black"]}),r.jsx(x,{intensity:2,color:"white",position:[0,-1,5],rotation:[0,0,Math.PI/3],scale:[100,.1,1]}),r.jsx(x,{intensity:3,color:"white",position:[-1,-1,1],rotation:[0,0,Math.PI/3],scale:[100,.1,1]}),r.jsx(x,{intensity:3,color:"white",position:[1,1,1],rotation:[0,0,Math.PI/3],scale:[100,.1,1]}),r.jsx(x,{intensity:10,color:"white",position:[-10,0,14],rotation:[0,Math.PI/2,Math.PI/3],scale:[100,10,1]})]})]})},Q=()=>{const h=o.useRef(null),n=o.useRef(null),l=o.useRef(null),c=o.useRef(null),u=o.useRef(null),e=o.useRef(null),{vec:p,ang:y,rot:v,dir:M}=o.useMemo(()=>({vec:new i,ang:new i,rot:new i,dir:new i}),[]),d={type:"dynamic",canSleep:!0,colliders:!1,angularDamping:2,linearDamping:2},{nodes:f,materials:j}=S("/card/tag.glb"),b=T("/card/band.jpeg"),{width:E,height:k}=N(t=>t.size),m=o.useMemo(()=>new V([new i,new i,new i,new i]),[]),[s,R]=o.useState(!1),[C,I]=o.useState(!1);return w(n,l,[[0,0,0],[0,0,0],1]),w(l,c,[[0,0,0],[0,0,0],1]),w(c,u,[[0,0,0],[0,0,0],1]),G(u,e,[[0,0,0],[0,1.45,0]]),o.useEffect(()=>{if(C)return document.body.style.cursor=s?"grabbing":"grab",()=>void(document.body.style.cursor="auto")},[C,s]),q((t,a)=>{var L;s&&(p.set(t.pointer.x,t.pointer.y,.5).unproject(t.camera),M.copy(p).sub(t.camera.position).normalize(),p.add(M.multiplyScalar(t.camera.position.length())),[e,l,c,u,n].forEach(B=>{var z;return(z=B.current)==null?void 0:z.wakeUp()}),(L=e.current)==null||L.setNextKinematicTranslation({x:p.x-s.x,y:p.y-s.y,z:p.z-s.z})),n.current&&(m.points[0].copy(u.current.translation()),m.points[1].copy(c.current.translation()),m.points[2].copy(l.current.translation()),m.points[3].copy(n.current.translation()),h.current.geometry.setPoints(m.getPoints(32)),y.copy(e.current.angvel()),v.copy(e.current.rotation()),e.current.setAngvel({x:y.x,y:y.y-v.y*.25,z:y.z},!1))}),m.curveType="chordal",b.wrapS=b.wrapT=W,r.jsxs(r.Fragment,{children:[r.jsxs("group",{position:[0,4,0],children:[r.jsx(g,{ref:n,...d}),r.jsx(g,{position:[.5,0,0],ref:l,...d,children:r.jsx(P,{args:[.1]})}),r.jsx(g,{position:[1,0,0],ref:c,...d,children:r.jsx(P,{args:[.1]})}),r.jsx(g,{position:[1.5,0,0],ref:u,...d,children:r.jsx(P,{args:[.1]})}),r.jsxs(g,{position:[2,0,0],ref:e,...d,type:s?"kinematicPosition":"dynamic",children:[r.jsx(J,{args:[.8,1.125,.01]}),r.jsxs("group",{scale:2.25,position:[0,-1.2,-.05],onPointerOver:()=>I(!0),onPointerOut:()=>I(!1),onPointerUp:t=>{var a;return(a=t.target)==null||a.releasePointerCapture(t.pointerId),R(!1)},onPointerDown:t=>{var a;return(a=t.target)==null||a.setPointerCapture(t.pointerId),R(new i().copy(t.point).sub(p.copy(e.current.translation())))},children:[r.jsx("mesh",{geometry:f.card.geometry,children:r.jsx("meshPhysicalMaterial",{map:j.base.map,"map-anisotropy":16,clearcoat:1,clearcoatRoughness:.15,roughness:.3,metalness:.5})}),r.jsx("mesh",{geometry:f.clip.geometry,material:j.metal,"material-roughness":.3}),r.jsx("mesh",{geometry:f.clamp.geometry,material:j.metal})]})]})]}),r.jsxs("mesh",{ref:h,children:[r.jsx("meshLineGeometry",{}),r.jsx("meshLineMaterial",{color:"white",depthTest:!1,resolution:[E,k],useMap:!0,map:b,repeat:[-3,1],lineWidth:1})]})]})};export{ro as Demo0302,ro as default};
