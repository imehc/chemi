{"version":3,"file":"Octree.js.OUcOHQny.js","sources":["../../../../../../node_modules/.pnpm/three@0.158.0/node_modules/three/examples/jsm/math/Octree.js"],"sourcesContent":["import {\n\tBox3,\n\tLine3,\n\tPlane,\n\tSphere,\n\tTriangle,\n\tVector3\n} from 'three';\nimport { Capsule } from '../math/Capsule.js';\n\n\nconst _v1 = new Vector3();\nconst _v2 = new Vector3();\nconst _point1 = new Vector3();\nconst _point2 = new Vector3();\nconst _plane = new Plane();\nconst _line1 = new Line3();\nconst _line2 = new Line3();\nconst _sphere = new Sphere();\nconst _capsule = new Capsule();\n\nconst _temp1 = new Vector3();\nconst _temp2 = new Vector3();\nconst _temp3 = new Vector3();\nconst EPS = 1e-10;\n\nfunction lineToLineClosestPoints( line1, line2, target1 = null, target2 = null ) {\n\n\tconst r = _temp1.copy( line1.end ).sub( line1.start );\n\tconst s = _temp2.copy( line2.end ).sub( line2.start );\n\tconst w = _temp3.copy( line2.start ).sub( line1.start );\n\n\tconst a = r.dot( s ),\n\t\tb = r.dot( r ),\n\t\tc = s.dot( s ),\n\t\td = s.dot( w ),\n\t\te = r.dot( w );\n\n\tlet t1, t2;\n\tconst divisor = b * c - a * a;\n\n\tif ( Math.abs( divisor ) < EPS ) {\n\n\t\tconst d1 = - d / c;\n\t\tconst d2 = ( a - d ) / c;\n\n\t\tif ( Math.abs( d1 - 0.5 ) < Math.abs( d2 - 0.5 ) ) {\n\n\t\t\tt1 = 0;\n\t\t\tt2 = d1;\n\n\t\t} else {\n\n\t\t\tt1 = 1;\n\t\t\tt2 = d2;\n\n\t\t}\n\n\t} else {\n\n\t\tt1 = ( d * a + e * c ) / divisor;\n\t\tt2 = ( t1 * a - d ) / c;\n\n\t}\n\n\tt2 = Math.max( 0, Math.min( 1, t2 ) );\n\tt1 = Math.max( 0, Math.min( 1, t1 ) );\n\n\tif ( target1 ) {\n\n\t\ttarget1.copy( r ).multiplyScalar( t1 ).add( line1.start );\n\n\t}\n\n\tif ( target2 ) {\n\n\t\ttarget2.copy( s ).multiplyScalar( t2 ).add( line2.start );\n\n\t}\n\n}\n\nclass Octree {\n\n\n\tconstructor( box ) {\n\n\t\tthis.triangles = [];\n\t\tthis.box = box;\n\t\tthis.subTrees = [];\n\n\t}\n\n\taddTriangle( triangle ) {\n\n\t\tif ( ! this.bounds ) this.bounds = new Box3();\n\n\t\tthis.bounds.min.x = Math.min( this.bounds.min.x, triangle.a.x, triangle.b.x, triangle.c.x );\n\t\tthis.bounds.min.y = Math.min( this.bounds.min.y, triangle.a.y, triangle.b.y, triangle.c.y );\n\t\tthis.bounds.min.z = Math.min( this.bounds.min.z, triangle.a.z, triangle.b.z, triangle.c.z );\n\t\tthis.bounds.max.x = Math.max( this.bounds.max.x, triangle.a.x, triangle.b.x, triangle.c.x );\n\t\tthis.bounds.max.y = Math.max( this.bounds.max.y, triangle.a.y, triangle.b.y, triangle.c.y );\n\t\tthis.bounds.max.z = Math.max( this.bounds.max.z, triangle.a.z, triangle.b.z, triangle.c.z );\n\n\t\tthis.triangles.push( triangle );\n\n\t\treturn this;\n\n\t}\n\n\tcalcBox() {\n\n\t\tthis.box = this.bounds.clone();\n\n\t\t// offset small amount to account for regular grid\n\t\tthis.box.min.x -= 0.01;\n\t\tthis.box.min.y -= 0.01;\n\t\tthis.box.min.z -= 0.01;\n\n\t\treturn this;\n\n\t}\n\n\tsplit( level ) {\n\n\t\tif ( ! this.box ) return;\n\n\t\tconst subTrees = [];\n\t\tconst halfsize = _v2.copy( this.box.max ).sub( this.box.min ).multiplyScalar( 0.5 );\n\n\t\tfor ( let x = 0; x < 2; x ++ ) {\n\n\t\t\tfor ( let y = 0; y < 2; y ++ ) {\n\n\t\t\t\tfor ( let z = 0; z < 2; z ++ ) {\n\n\t\t\t\t\tconst box = new Box3();\n\t\t\t\t\tconst v = _v1.set( x, y, z );\n\n\t\t\t\t\tbox.min.copy( this.box.min ).add( v.multiply( halfsize ) );\n\t\t\t\t\tbox.max.copy( box.min ).add( halfsize );\n\n\t\t\t\t\tsubTrees.push( new Octree( box ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tlet triangle;\n\n\t\twhile ( triangle = this.triangles.pop() ) {\n\n\t\t\tfor ( let i = 0; i < subTrees.length; i ++ ) {\n\n\t\t\t\tif ( subTrees[ i ].box.intersectsTriangle( triangle ) ) {\n\n\t\t\t\t\tsubTrees[ i ].triangles.push( triangle );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let i = 0; i < subTrees.length; i ++ ) {\n\n\t\t\tconst len = subTrees[ i ].triangles.length;\n\n\t\t\tif ( len > 8 && level < 16 ) {\n\n\t\t\t\tsubTrees[ i ].split( level + 1 );\n\n\t\t\t}\n\n\t\t\tif ( len !== 0 ) {\n\n\t\t\t\tthis.subTrees.push( subTrees[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tbuild() {\n\n\t\tthis.calcBox();\n\t\tthis.split( 0 );\n\n\t\treturn this;\n\n\t}\n\n\tgetRayTriangles( ray, triangles ) {\n\n\t\tfor ( let i = 0; i < this.subTrees.length; i ++ ) {\n\n\t\t\tconst subTree = this.subTrees[ i ];\n\t\t\tif ( ! ray.intersectsBox( subTree.box ) ) continue;\n\n\t\t\tif ( subTree.triangles.length > 0 ) {\n\n\t\t\t\tfor ( let j = 0; j < subTree.triangles.length; j ++ ) {\n\n\t\t\t\t\tif ( triangles.indexOf( subTree.triangles[ j ] ) === - 1 ) triangles.push( subTree.triangles[ j ] );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tsubTree.getRayTriangles( ray, triangles );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn triangles;\n\n\t}\n\n\ttriangleCapsuleIntersect( capsule, triangle ) {\n\n\t\ttriangle.getPlane( _plane );\n\n\t\tconst d1 = _plane.distanceToPoint( capsule.start ) - capsule.radius;\n\t\tconst d2 = _plane.distanceToPoint( capsule.end ) - capsule.radius;\n\n\t\tif ( ( d1 > 0 && d2 > 0 ) || ( d1 < - capsule.radius && d2 < - capsule.radius ) ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\tconst delta = Math.abs( d1 / ( Math.abs( d1 ) + Math.abs( d2 ) ) );\n\t\tconst intersectPoint = _v1.copy( capsule.start ).lerp( capsule.end, delta );\n\n\t\tif ( triangle.containsPoint( intersectPoint ) ) {\n\n\t\t\treturn { normal: _plane.normal.clone(), point: intersectPoint.clone(), depth: Math.abs( Math.min( d1, d2 ) ) };\n\n\t\t}\n\n\t\tconst r2 = capsule.radius * capsule.radius;\n\n\t\tconst line1 = _line1.set( capsule.start, capsule.end );\n\n\t\tconst lines = [\n\t\t\t[ triangle.a, triangle.b ],\n\t\t\t[ triangle.b, triangle.c ],\n\t\t\t[ triangle.c, triangle.a ]\n\t\t];\n\n\t\tfor ( let i = 0; i < lines.length; i ++ ) {\n\n\t\t\tconst line2 = _line2.set( lines[ i ][ 0 ], lines[ i ][ 1 ] );\n\n\t\t\tlineToLineClosestPoints( line1, line2, _point1, _point2 );\n\n\t\t\tif ( _point1.distanceToSquared( _point2 ) < r2 ) {\n\n\t\t\t\treturn {\n\t\t\t\t\tnormal: _point1.clone().sub( _point2 ).normalize(),\n\t\t\t\t\tpoint: _point2.clone(),\n\t\t\t\t\tdepth: capsule.radius - _point1.distanceTo( _point2 )\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\ttriangleSphereIntersect( sphere, triangle ) {\n\n\t\ttriangle.getPlane( _plane );\n\n\t\tif ( ! sphere.intersectsPlane( _plane ) ) return false;\n\n\t\tconst depth = Math.abs( _plane.distanceToSphere( sphere ) );\n\t\tconst r2 = sphere.radius * sphere.radius - depth * depth;\n\n\t\tconst plainPoint = _plane.projectPoint( sphere.center, _v1 );\n\n\t\tif ( triangle.containsPoint( sphere.center ) ) {\n\n\t\t\treturn { normal: _plane.normal.clone(), point: plainPoint.clone(), depth: Math.abs( _plane.distanceToSphere( sphere ) ) };\n\n\t\t}\n\n\t\tconst lines = [\n\t\t\t[ triangle.a, triangle.b ],\n\t\t\t[ triangle.b, triangle.c ],\n\t\t\t[ triangle.c, triangle.a ]\n\t\t];\n\n\t\tfor ( let i = 0; i < lines.length; i ++ ) {\n\n\t\t\t_line1.set( lines[ i ][ 0 ], lines[ i ][ 1 ] );\n\t\t\t_line1.closestPointToPoint( plainPoint, true, _v2 );\n\n\t\t\tconst d = _v2.distanceToSquared( sphere.center );\n\n\t\t\tif ( d < r2 ) {\n\n\t\t\t\treturn { normal: sphere.center.clone().sub( _v2 ).normalize(), point: _v2.clone(), depth: sphere.radius - Math.sqrt( d ) };\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tgetSphereTriangles( sphere, triangles ) {\n\n\t\tfor ( let i = 0; i < this.subTrees.length; i ++ ) {\n\n\t\t\tconst subTree = this.subTrees[ i ];\n\n\t\t\tif ( ! sphere.intersectsBox( subTree.box ) ) continue;\n\n\t\t\tif ( subTree.triangles.length > 0 ) {\n\n\t\t\t\tfor ( let j = 0; j < subTree.triangles.length; j ++ ) {\n\n\t\t\t\t\tif ( triangles.indexOf( subTree.triangles[ j ] ) === - 1 ) triangles.push( subTree.triangles[ j ] );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tsubTree.getSphereTriangles( sphere, triangles );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tgetCapsuleTriangles( capsule, triangles ) {\n\n\t\tfor ( let i = 0; i < this.subTrees.length; i ++ ) {\n\n\t\t\tconst subTree = this.subTrees[ i ];\n\n\t\t\tif ( ! capsule.intersectsBox( subTree.box ) ) continue;\n\n\t\t\tif ( subTree.triangles.length > 0 ) {\n\n\t\t\t\tfor ( let j = 0; j < subTree.triangles.length; j ++ ) {\n\n\t\t\t\t\tif ( triangles.indexOf( subTree.triangles[ j ] ) === - 1 ) triangles.push( subTree.triangles[ j ] );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tsubTree.getCapsuleTriangles( capsule, triangles );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tsphereIntersect( sphere ) {\n\n\t\t_sphere.copy( sphere );\n\n\t\tconst triangles = [];\n\t\tlet result, hit = false;\n\n\t\tthis.getSphereTriangles( sphere, triangles );\n\n\t\tfor ( let i = 0; i < triangles.length; i ++ ) {\n\n\t\t\tif ( result = this.triangleSphereIntersect( _sphere, triangles[ i ] ) ) {\n\n\t\t\t\thit = true;\n\n\t\t\t\t_sphere.center.add( result.normal.multiplyScalar( result.depth ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( hit ) {\n\n\t\t\tconst collisionVector = _sphere.center.clone().sub( sphere.center );\n\t\t\tconst depth = collisionVector.length();\n\n\t\t\treturn { normal: collisionVector.normalize(), depth: depth };\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tcapsuleIntersect( capsule ) {\n\n\t\t_capsule.copy( capsule );\n\n\t\tconst triangles = [];\n\t\tlet result, hit = false;\n\n\t\tthis.getCapsuleTriangles( _capsule, triangles );\n\n\t\tfor ( let i = 0; i < triangles.length; i ++ ) {\n\n\t\t\tif ( result = this.triangleCapsuleIntersect( _capsule, triangles[ i ] ) ) {\n\n\t\t\t\thit = true;\n\n\t\t\t\t_capsule.translate( result.normal.multiplyScalar( result.depth ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( hit ) {\n\n\t\t\tconst collisionVector = _capsule.getCenter( new Vector3() ).sub( capsule.getCenter( _v1 ) );\n\t\t\tconst depth = collisionVector.length();\n\n\t\t\treturn { normal: collisionVector.normalize(), depth: depth };\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\trayIntersect( ray ) {\n\n\t\tif ( ray.direction.length() === 0 ) return;\n\n\t\tconst triangles = [];\n\t\tlet triangle, position, distance = 1e100;\n\n\t\tthis.getRayTriangles( ray, triangles );\n\n\t\tfor ( let i = 0; i < triangles.length; i ++ ) {\n\n\t\t\tconst result = ray.intersectTriangle( triangles[ i ].a, triangles[ i ].b, triangles[ i ].c, true, _v1 );\n\n\t\t\tif ( result ) {\n\n\t\t\t\tconst newdistance = result.sub( ray.origin ).length();\n\n\t\t\t\tif ( distance > newdistance ) {\n\n\t\t\t\t\tposition = result.clone().add( ray.origin );\n\t\t\t\t\tdistance = newdistance;\n\t\t\t\t\ttriangle = triangles[ i ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn distance < 1e100 ? { distance: distance, triangle: triangle, position: position } : false;\n\n\t}\n\n\tfromGraphNode( group ) {\n\n\t\tgroup.updateWorldMatrix( true, true );\n\n\t\tgroup.traverse( ( obj ) => {\n\n\t\t\tif ( obj.isMesh === true ) {\n\n\t\t\t\tlet geometry, isTemp = false;\n\n\t\t\t\tif ( obj.geometry.index !== null ) {\n\n\t\t\t\t\tisTemp = true;\n\t\t\t\t\tgeometry = obj.geometry.toNonIndexed();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgeometry = obj.geometry;\n\n\t\t\t\t}\n\n\t\t\t\tconst positionAttribute = geometry.getAttribute( 'position' );\n\n\t\t\t\tfor ( let i = 0; i < positionAttribute.count; i += 3 ) {\n\n\t\t\t\t\tconst v1 = new Vector3().fromBufferAttribute( positionAttribute, i );\n\t\t\t\t\tconst v2 = new Vector3().fromBufferAttribute( positionAttribute, i + 1 );\n\t\t\t\t\tconst v3 = new Vector3().fromBufferAttribute( positionAttribute, i + 2 );\n\n\t\t\t\t\tv1.applyMatrix4( obj.matrixWorld );\n\t\t\t\t\tv2.applyMatrix4( obj.matrixWorld );\n\t\t\t\t\tv3.applyMatrix4( obj.matrixWorld );\n\n\t\t\t\t\tthis.addTriangle( new Triangle( v1, v2, v3 ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( isTemp ) {\n\n\t\t\t\t\tgeometry.dispose();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t\tthis.build();\n\n\t\treturn this;\n\n\t}\n\n}\n\nexport { Octree };\n"],"names":["_v1","Vector3","_v2","_point1","_point2","_plane","Plane","_line1","Line3","_line2","_sphere","Sphere","_capsule","Capsule","_temp1","_temp2","_temp3","EPS","lineToLineClosestPoints","line1","line2","target1","target2","r","w","a","b","c","d","e","t1","t2","divisor","d1","d2","Octree","box","triangle","Box3","level","subTrees","halfsize","x","y","z","v","i","len","ray","triangles","subTree","j","capsule","delta","intersectPoint","r2","lines","sphere","depth","plainPoint","result","hit","collisionVector","position","distance","newdistance","group","obj","geometry","isTemp","positionAttribute","v1","v2","v3","Triangle"],"mappings":"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","x_google_ignoreList":[0]}