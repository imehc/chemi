{"version":3,"file":"index.sz0ZWju_.js","sources":["../../src/demo2/04/Box.tsx","../../src/demo2/04/Rig.tsx","../../src/demo2/04/index.tsx"],"sourcesContent":["import { useEffect, useMemo, useRef, useState } from 'react';\nimport { MeshProps, useFrame } from '@react-three/fiber';\nimport { Color, Mesh, MeshStandardMaterial } from 'three';\nimport { Text } from '@react-three/drei';\n\nexport const Box: React.FC<MeshProps> = (props) => {\n  const ref = useRef<Mesh>(null);\n  const [count, setCount] = useState(0);\n  const black = useMemo(() => new Color('black'), []);\n\n  console.log('Box ' + props.name + ' count=' + count);\n\n  useEffect(() => {\n    if (!ref.current) return;\n    (ref.current.material as MeshStandardMaterial).color.set(0x00ff00);\n  }, []);\n\n  useFrame(() => {\n    if (!ref.current) return;\n    (ref.current.material as MeshStandardMaterial).color.lerp(black, 0.1);\n  });\n\n  return (\n    <mesh\n      {...props}\n      ref={ref}\n      onPointerDown={(e) => {\n        //e.stopPropagation()\n        setCount(count + 1);\n      }}\n    >\n      <boxGeometry />\n      <meshStandardMaterial />\n      <Text fontSize={0.5} font=\"monospace\" position-z={0.501}>\n        {count}\n      </Text>\n      {props.children}\n    </mesh>\n  );\n};\n","import { useFrame, useThree } from '@react-three/fiber';\nimport { useMemo } from 'react';\nimport { Vector3 } from 'three';\n\n/**\n * 平滑移动相机\n */\nexport const Rig = () => {\n  const { camera, pointer } = useThree();\n  const vec = useMemo(() => new Vector3(), []);\n\n  return useFrame(() => {\n    camera.position.lerp(\n      vec.set(pointer.x, pointer.y, camera.position.z),\n      0.05\n    );\n    camera.lookAt(0, 0, 0);\n  });\n};\n","import { Stats, OrbitControls } from '@react-three/drei';\nimport { Canvas } from '@react-three/fiber';\nimport { Box } from './Box';\nimport { Rig } from './Rig';\n\n/**\n * 事件传播\n */\nconst Demo2v04 = () => {\n  return (\n    <Canvas camera={{ position: [0, 0, 4] }}>\n      <directionalLight position={[1, 1, 1]} />\n      <Box position={[0, 1.5, 0]} name=\"A0\">\n        <Box position={[-0.66, -1, 0]} name=\"B0\">\n          <Box position={[-0.66, -1, 0]} name=\"C0\">\n            <Box position={[-0.66, -1, 0]} name=\"D0\" />\n            <Box position={[0.66, -1, 0]} name=\"D1\" />\n          </Box>\n          <Box position={[0.66, -1, 0]} name=\"C1\">\n            <Box position={[0.66, -1, 0]} name=\"D2\" />\n          </Box>\n        </Box>\n        <Box position={[0.66, -1, 0]} name=\"B1\">\n          <Box position={[0.66, -1, 0]} name=\"C2\">\n            <Box position={[0.66, -1, 0]} name=\"D3\" />\n          </Box>\n        </Box>\n      </Box>\n      <Rig />\n      <Stats />\n    </Canvas>\n  );\n};\n\nexport default Demo2v04;\n"],"names":["Box","props","ref","useRef","count","setCount","useState","black","useMemo","Color","useEffect","useFrame","jsxs","e","jsx","Text","Rig","camera","pointer","useThree","vec","Vector3","Demo2v04","Canvas","Stats"],"mappings":"s1EAKa,MAAAA,EAA4BC,GAAU,CAC3C,MAAAC,EAAMC,SAAa,IAAI,EACvB,CAACC,EAAOC,CAAQ,EAAIC,WAAS,CAAC,EAC9BC,EAAQC,EAAAA,QAAQ,IAAM,IAAIC,EAAM,OAAO,EAAG,CAAA,CAAE,EAElD,eAAQ,IAAI,OAASR,EAAM,KAAO,UAAYG,CAAK,EAEnDM,EAAAA,UAAU,IAAM,CACTR,EAAI,SACRA,EAAI,QAAQ,SAAkC,MAAM,IAAI,KAAQ,CACnE,EAAG,CAAE,CAAA,EAELS,EAAS,IAAM,CACRT,EAAI,SACRA,EAAI,QAAQ,SAAkC,MAAM,KAAKK,EAAO,EAAG,CAAA,CACrE,EAGCK,EAAA,KAAC,OAAA,CACE,GAAGX,EACJ,IAAAC,EACA,cAAgBW,GAAM,CAEpBR,EAASD,EAAQ,CAAC,CACpB,EAEA,SAAA,CAAAU,EAAA,IAAC,cAAY,EAAA,QACZ,uBAAqB,EAAA,EACtBA,EAAAA,IAACC,GAAK,SAAU,GAAK,KAAK,YAAY,aAAY,KAC/C,SACHX,CAAA,CAAA,EACCH,EAAM,QAAA,CAAA,CAAA,CAGb,EChCae,EAAM,IAAM,CACvB,KAAM,CAAE,OAAAC,EAAQ,QAAAC,CAAQ,EAAIC,EAAS,EAC/BC,EAAMZ,EAAAA,QAAQ,IAAM,IAAIa,EAAW,CAAE,CAAA,EAE3C,OAAOV,EAAS,IAAM,CACpBM,EAAO,SAAS,KACdG,EAAI,IAAIF,EAAQ,EAAGA,EAAQ,EAAGD,EAAO,SAAS,CAAC,EAC/C,GAAA,EAEKA,EAAA,OAAO,EAAG,EAAG,CAAC,CAAA,CACtB,CACH,ECVMK,GAAW,IAEbV,OAACW,EAAO,CAAA,OAAQ,CAAE,SAAU,CAAC,EAAG,EAAG,CAAC,CAAA,EAClC,SAAA,CAAAT,EAAA,IAAC,oBAAiB,SAAU,CAAC,EAAG,EAAG,CAAC,EAAG,EACvCF,EAAAA,KAACZ,GAAI,SAAU,CAAC,EAAG,IAAK,CAAC,EAAG,KAAK,KAC/B,SAAA,CAACY,EAAAA,KAAAZ,EAAA,CAAI,SAAU,CAAC,KAAO,GAAI,CAAC,EAAG,KAAK,KAClC,SAAA,CAACY,EAAAA,KAAAZ,EAAA,CAAI,SAAU,CAAC,KAAO,GAAI,CAAC,EAAG,KAAK,KAClC,SAAA,CAACc,EAAAA,IAAAd,EAAA,CAAI,SAAU,CAAC,KAAO,GAAI,CAAC,EAAG,KAAK,IAAK,CAAA,EACzCc,EAAAA,IAACd,GAAI,SAAU,CAAC,IAAM,GAAI,CAAC,EAAG,KAAK,KAAK,CAAA,EAC1C,EACAc,EAAAA,IAACd,GAAI,SAAU,CAAC,IAAM,GAAI,CAAC,EAAG,KAAK,KACjC,eAACA,EAAI,CAAA,SAAU,CAAC,IAAM,GAAI,CAAC,EAAG,KAAK,IAAK,CAAA,EAC1C,CAAA,EACF,EACCc,EAAA,IAAAd,EAAA,CAAI,SAAU,CAAC,IAAM,GAAI,CAAC,EAAG,KAAK,KACjC,SAACc,MAAAd,EAAA,CAAI,SAAU,CAAC,IAAM,GAAI,CAAC,EAAG,KAAK,KACjC,SAAAc,EAAAA,IAACd,GAAI,SAAU,CAAC,IAAM,GAAI,CAAC,EAAG,KAAK,IAAK,CAAA,CAC1C,CAAA,EACF,CAAA,EACF,QACCgB,EAAI,EAAA,QACJQ,EAAM,EAAA,CACT,CAAA,CAAA"}