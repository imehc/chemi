{"version":3,"file":"TextsHighHZ.mjs.m4TzNGcy.js","sources":["../../../../../node_modules/.pnpm/r3f-perf@7.1.2_@react-three+fiber@8.15.11_@types+three@0.158.3_react-dom@18.2.0_react@18.2.0_three@0.158.0/node_modules/r3f-perf/dist/components/TextsHighHZ.mjs"],"sourcesContent":["import { jsxs, jsx, Fragment } from \"react/jsx-runtime\";\nimport { memo, useRef, Suspense } from \"react\";\nimport { matriceCount, matriceWorldCount } from \"./PerfHeadless.mjs\";\nimport { useThree } from \"@react-three/fiber\";\nimport { Text } from \"@react-three/drei\";\nimport \"../index.mjs\";\nimport { colorsGraph } from \"./Perf.mjs\";\nimport * as THREE from \"three\";\nimport { useEvent } from \"@utsubo/events\";\nimport { getPerf } from \"../store.mjs\";\nconst TextHighHZ = memo(\n  ({\n    isPerf,\n    color,\n    colorBlind,\n    customData: customData2,\n    isMemory,\n    isShadersInfo,\n    metric,\n    fontSize,\n    offsetY = 0,\n    offsetX,\n    round,\n    hasInstance\n  }) => {\n    const { width: w, height: h } = useThree((s) => s.viewport);\n    const fpsRef = useRef(null);\n    const fpsInstanceRef = useRef(null);\n    useEvent(\"log\", function updateR3FPerfText([log, gl]) {\n      var _a;\n      if (!log || !fpsRef.current)\n        return;\n      if (customData2) {\n        fpsRef.current.text = (Math.round(getPerf().customData * Math.pow(10, round)) / Math.pow(10, round)).toFixed(\n          round\n        );\n      }\n      if (!metric)\n        return;\n      let info = log[metric];\n      if (isShadersInfo) {\n        info = (_a = gl.info.programs) == null ? void 0 : _a.length;\n      } else if (metric === \"matriceCount\") {\n        info = matriceCount.value;\n      } else if (!isPerf && gl.info.render) {\n        const infos = isMemory ? gl.info.memory : gl.info.render;\n        info = infos[metric];\n      }\n      if (metric === \"fps\") {\n        fpsRef.current.color = getPerf().overclockingFps ? colorsGraph(colorBlind).overClock.toString() : `rgb(${colorsGraph(colorBlind).fps.toString()})`;\n      }\n      fpsRef.current.text = (Math.round(info * Math.pow(10, round)) / Math.pow(10, round)).toFixed(round);\n      if (hasInstance) {\n        const infosInstance = gl.info.instance;\n        if (typeof infosInstance === \"undefined\" && metric !== \"matriceCount\") {\n          return;\n        }\n        let infoInstance;\n        if (metric === \"matriceCount\") {\n          infoInstance = matriceWorldCount.value;\n        } else {\n          infoInstance = infosInstance[metric];\n        }\n        if (infoInstance > 0) {\n          fpsRef.current.fontSize = fontSize / 1.15;\n          fpsInstanceRef.current.fontSize = info > 0 ? fontSize / 1.4 : fontSize;\n          fpsRef.current.position.y = h / 2 - offsetY - fontSize / 1.9;\n          fpsInstanceRef.current.text = \" Â±\t\" + (Math.round(infoInstance * Math.pow(10, round)) / Math.pow(10, round)).toFixed(round);\n        } else {\n          if (fpsInstanceRef.current.text)\n            fpsInstanceRef.current.text = \"\";\n          fpsRef.current.position.y = h / 2 - offsetY - fontSize;\n          fpsRef.current.fontSize = fontSize;\n        }\n      }\n      matriceCount.value -= 1;\n      fpsRef.current.updateMatrix();\n      fpsRef.current.matrixWorld.copy(fpsRef.current.matrix);\n    });\n    return /* @__PURE__ */ jsxs(Suspense, { fallback: null, children: [\n      /* @__PURE__ */ jsxs(\n        Text,\n        {\n          textAlign: \"justify\",\n          matrixAutoUpdate: false,\n          ref: fpsRef,\n          fontSize,\n          position: [-w / 2 + offsetX + fontSize, h / 2 - offsetY - fontSize, 0],\n          color,\n          characters: \"0123456789\",\n          onUpdate: (self) => {\n            self.updateMatrix();\n            matriceCount.value -= 1;\n            self.matrixWorld.copy(self.matrix);\n          },\n          children: [\n            /* @__PURE__ */ jsx(\"meshBasicMaterial\", { blending: THREE.NormalBlending }),\n            \"0\"\n          ]\n        }\n      ),\n      hasInstance && /* @__PURE__ */ jsx(\n        Text,\n        {\n          textAlign: \"justify\",\n          matrixAutoUpdate: false,\n          ref: fpsInstanceRef,\n          fontSize: 8,\n          position: [-w / 2 + offsetX + fontSize, h / 2 - offsetY - fontSize * 1.15, 0],\n          color: \"lightgrey\",\n          characters: \"0123456789\",\n          onUpdate: (self) => {\n            self.updateMatrix();\n            matriceCount.value -= 1;\n            self.matrixWorld.copy(self.matrix);\n          },\n          children: /* @__PURE__ */ jsx(\"meshBasicMaterial\", { blending: THREE.NormalBlending })\n        }\n      )\n    ] });\n  }\n);\nconst TextsHighHZ = ({ colorBlind, customData: customData2, minimal, matrixUpdate }) => {\n  const fontSize = 14;\n  return /* @__PURE__ */ jsxs(Fragment, { children: [\n    /* @__PURE__ */ jsx(\n      TextHighHZ,\n      {\n        colorBlind,\n        color: `rgb(${colorsGraph(colorBlind).fps.toString()})`,\n        isPerf: true,\n        metric: \"fps\",\n        fontSize,\n        offsetX: 140,\n        round: 0\n      }\n    ),\n    /* @__PURE__ */ jsx(\n      TextHighHZ,\n      {\n        color: `rgb(${colorsGraph(colorBlind).cpu.toString()})`,\n        isPerf: true,\n        metric: \"cpu\",\n        fontSize,\n        offsetX: 72,\n        round: 3\n      }\n    ),\n    /* @__PURE__ */ jsx(\n      TextHighHZ,\n      {\n        color: `rgb(${colorsGraph(colorBlind).gpu.toString()})`,\n        isPerf: true,\n        metric: \"gpu\",\n        fontSize,\n        offsetX: 10,\n        round: 3\n      }\n    ),\n    !minimal ? /* @__PURE__ */ jsxs(Fragment, { children: [\n      /* @__PURE__ */ jsx(TextHighHZ, { metric: \"calls\", fontSize, offsetX: 200, round: 0, hasInstance: true }),\n      /* @__PURE__ */ jsx(TextHighHZ, { metric: \"triangles\", fontSize, offsetX: 260, round: 0, hasInstance: true }),\n      /* @__PURE__ */ jsx(TextHighHZ, { isMemory: true, metric: \"geometries\", fontSize, offsetY: 30, offsetX: 0, round: 0 }),\n      /* @__PURE__ */ jsx(TextHighHZ, { isMemory: true, metric: \"textures\", fontSize, offsetY: 30, offsetX: 80, round: 0 }),\n      /* @__PURE__ */ jsx(TextHighHZ, { isShadersInfo: true, metric: \"programs\", fontSize, offsetY: 30, offsetX: 140, round: 0 }),\n      /* @__PURE__ */ jsx(TextHighHZ, { metric: \"lines\", fontSize, offsetY: 30, offsetX: 200, round: 0, hasInstance: true }),\n      /* @__PURE__ */ jsx(TextHighHZ, { metric: \"points\", fontSize, offsetY: 30, offsetX: 260, round: 0, hasInstance: true }),\n      matrixUpdate && /* @__PURE__ */ jsx(\n        TextHighHZ,\n        {\n          isPerf: true,\n          metric: \"matriceCount\",\n          fontSize,\n          offsetY: 30,\n          offsetX: 320,\n          round: 0,\n          hasInstance: true\n        }\n      )\n    ] }) : null,\n    customData2 && /* @__PURE__ */ jsx(\n      TextHighHZ,\n      {\n        color: `rgb(${colorsGraph(colorBlind).custom.toString()})`,\n        customData: customData2,\n        fontSize,\n        offsetY: 0,\n        offsetX: minimal ? 200 : 320,\n        round: customData2.round || 2\n      }\n    )\n  ] });\n};\nexport {\n  TextsHighHZ\n};\n//# sourceMappingURL=TextsHighHZ.mjs.map\n"],"names":["TextHighHZ","memo","isPerf","color","colorBlind","customData2","isMemory","isShadersInfo","metric","fontSize","offsetY","offsetX","round","hasInstance","h","useThree","fpsRef","useRef","fpsInstanceRef","useEvent","log","gl","_a","getPerf","info","matriceCount","colorsGraph","infosInstance","infoInstance","matriceWorldCount","jsxs","Suspense","Text","self","jsx","THREE.NormalBlending","TextsHighHZ","minimal","matrixUpdate","Fragment"],"mappings":"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","x_google_ignoreList":[0]}