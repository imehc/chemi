import{j as t}from"../../../react/jsx-runtime.js.Uqq-hvb5.js";import{r as g}from"../../../react/index.js.4247Uq6c.js";import{m as j,a as P}from"./PerfHeadless.mjs.boK6iYb3.js";import{c as f}from"./Perf.mjs.3ooytOUr.js";import{x as z}from"../../../three/build/three.module.js.v3oJJcpo.js";import{u as R}from"../../../@utsubo/events/dist/react.mjs.RCI96X0F.js";import{g as C}from"../store.mjs.WTcb4_d4.js";import{u as $}from"../../../@react-three/fiber/dist/index-db8af450.esm.js.cNYqik-2.js";import{T as F}from"../../../@react-three/drei/core/Text.js.3IqVEl9n.js";const r=g.memo(({isPerf:a,color:u,colorBlind:c,customData:M,isMemory:y,isShadersInfo:T,metric:i,fontSize:o,offsetY:l=0,offsetX:v,round:n,hasInstance:X})=>{const{width:w,height:d}=$(s=>s.viewport),e=g.useRef(null),m=g.useRef(null);return R("log",function([b,p]){var I;if(!b||!e.current||(M&&(e.current.text=(Math.round(C().customData*Math.pow(10,n))/Math.pow(10,n)).toFixed(n)),!i))return;let x=b[i];if(T?x=(I=p.info.programs)==null?void 0:I.length:i==="matriceCount"?x=j.value:!a&&p.info.render&&(x=(y?p.info.memory:p.info.render)[i]),i==="fps"&&(e.current.color=C().overclockingFps?f(c).overClock.toString():`rgb(${f(c).fps.toString()})`),e.current.text=(Math.round(x*Math.pow(10,n))/Math.pow(10,n)).toFixed(n),X){const S=p.info.instance;if(typeof S>"u"&&i!=="matriceCount")return;let h;i==="matriceCount"?h=P.value:h=S[i],h>0?(e.current.fontSize=o/1.15,m.current.fontSize=x>0?o/1.4:o,e.current.position.y=d/2-l-o/1.9,m.current.text=" Â±	"+(Math.round(h*Math.pow(10,n))/Math.pow(10,n)).toFixed(n)):(m.current.text&&(m.current.text=""),e.current.position.y=d/2-l-o,e.current.fontSize=o)}j.value-=1,e.current.updateMatrix(),e.current.matrixWorld.copy(e.current.matrix)}),t.jsxs(g.Suspense,{fallback:null,children:[t.jsxs(F,{textAlign:"justify",matrixAutoUpdate:!1,ref:e,fontSize:o,position:[-w/2+v+o,d/2-l-o,0],color:u,characters:"0123456789",onUpdate:s=>{s.updateMatrix(),j.value-=1,s.matrixWorld.copy(s.matrix)},children:[t.jsx("meshBasicMaterial",{blending:z}),"0"]}),X&&t.jsx(F,{textAlign:"justify",matrixAutoUpdate:!1,ref:m,fontSize:8,position:[-w/2+v+o,d/2-l-o*1.15,0],color:"lightgrey",characters:"0123456789",onUpdate:s=>{s.updateMatrix(),j.value-=1,s.matrixWorld.copy(s.matrix)},children:t.jsx("meshBasicMaterial",{blending:z})})]})}),G=({colorBlind:a,customData:u,minimal:c,matrixUpdate:M})=>t.jsxs(t.Fragment,{children:[t.jsx(r,{colorBlind:a,color:`rgb(${f(a).fps.toString()})`,isPerf:!0,metric:"fps",fontSize:14,offsetX:140,round:0}),t.jsx(r,{color:`rgb(${f(a).cpu.toString()})`,isPerf:!0,metric:"cpu",fontSize:14,offsetX:72,round:3}),t.jsx(r,{color:`rgb(${f(a).gpu.toString()})`,isPerf:!0,metric:"gpu",fontSize:14,offsetX:10,round:3}),c?null:t.jsxs(t.Fragment,{children:[t.jsx(r,{metric:"calls",fontSize:14,offsetX:200,round:0,hasInstance:!0}),t.jsx(r,{metric:"triangles",fontSize:14,offsetX:260,round:0,hasInstance:!0}),t.jsx(r,{isMemory:!0,metric:"geometries",fontSize:14,offsetY:30,offsetX:0,round:0}),t.jsx(r,{isMemory:!0,metric:"textures",fontSize:14,offsetY:30,offsetX:80,round:0}),t.jsx(r,{isShadersInfo:!0,metric:"programs",fontSize:14,offsetY:30,offsetX:140,round:0}),t.jsx(r,{metric:"lines",fontSize:14,offsetY:30,offsetX:200,round:0,hasInstance:!0}),t.jsx(r,{metric:"points",fontSize:14,offsetY:30,offsetX:260,round:0,hasInstance:!0}),M&&t.jsx(r,{isPerf:!0,metric:"matriceCount",fontSize:14,offsetY:30,offsetX:320,round:0,hasInstance:!0})]}),u&&t.jsx(r,{color:`rgb(${f(a).custom.toString()})`,customData:u,fontSize:14,offsetY:0,offsetX:c?200:320,round:u.round||2})]});export{G as T};
//# sourceMappingURL=TextsHighHZ.mjs.UYGP6tg3.js.map
