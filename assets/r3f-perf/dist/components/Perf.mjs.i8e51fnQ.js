import{j as s}from"../../../react/jsx-runtime.js.Uqq-hvb5.js";import{r as b,R as S}from"../../../react/index.js.4247Uq6c.js";import{C as v}from"./Graph.mjs.Ypx5Ymtx.js";import{T as L,a as M,L as _,R as $,b as R,c as U,V as k,B as y,M as F,I as H,A as E,d as N,D as V,e as D}from"../../../@radix-ui/react-icons/dist/react-icons.esm.js.RcFb-OYS.js";import{H as J}from"./HtmlMinimal.mjs.MKSXYC-B.js";import{P as q}from"./PerfHeadless.mjs.fKF6ixzK.js";import{P as A,T as K,b as P,C as O,c as Q,d as t,e as i,f as h}from"../styles.mjs.P1ocS4n9.js";import{P as W}from"./Program.mjs.NsBRjaSA.js";import{u as a,s as X}from"../store.mjs.WTcb4_d4.js";const j=r=>({overClock:"#ff6eff",fps:r?"100, 143, 255":"238,38,110",cpu:r?"254, 254, 98":"66,226,46",gpu:r?"254,254,254":"253,151,31",custom:r?"86,180,233":"40,255,255"}),Y=({showGraph:r,colorBlind:n})=>{const c=a(e=>e.overclockingFps),o=a(e=>e.fpsLimit);return s.jsxs(i,{style:r?{color:c?j(n).overClock.toString():`rgb(${j(n).fps})`}:{},children:["FPS ",c?`${o}ðŸš€`:""]})},Z=({showGraph:r,colorBlind:n,customData:c,minimal:o})=>{const e=a(l=>l.gl);return e?s.jsxs(Q,{children:[s.jsxs(t,{children:[s.jsx(_,{}),s.jsx(i,{style:r?{color:`rgb(${j(n).gpu.toString()})`}:{},children:"GPU"}),s.jsx(h,{children:"ms"})]}),s.jsxs(t,{children:[s.jsx($,{}),s.jsx(i,{style:r?{color:`rgb(${j(n).cpu.toString()})`}:{},children:"CPU"}),s.jsx(h,{children:"ms"})]}),s.jsxs(t,{children:[s.jsx(R,{}),s.jsx(Y,{showGraph:r,colorBlind:n})]}),!o&&e&&s.jsxs(t,{children:[s.jsx(U,{}),s.jsx(i,{children:e.info.render.calls===1?"call":"calls"})]}),!o&&e&&s.jsxs(t,{children:[s.jsx(k,{}),s.jsx(i,{children:"Triangles"})]}),c&&s.jsxs(t,{children:[s.jsx(y,{}),s.jsx(i,{style:r?{color:`rgb(${j(n).custom})`}:{},children:c.name}),c.info&&s.jsx(h,{children:c.info})]})]}):null},z=({showGraph:r,colorBlind:n,deepAnalyze:c,customData:o,matrixUpdate:e,openByDefault:l,minimal:x})=>s.jsxs(s.Fragment,{children:[s.jsx(Z,{showGraph:r,colorBlind:n,customData:o,minimal:x}),!x&&s.jsx(G,{matrixUpdate:e,openByDefault:l,deepAnalyze:c,showGraph:r})]}),w=({matrixUpdate:r})=>s.jsxs("div",{children:[s.jsxs(t,{children:[s.jsx(F,{}),s.jsx(i,{children:"Geometries"})]}),s.jsxs(t,{children:[s.jsx(H,{}),s.jsx(i,{children:"Textures"})]}),s.jsxs(t,{children:[s.jsx(E,{}),s.jsx(i,{children:"shaders"})]}),s.jsxs(t,{children:[s.jsx(N,{}),s.jsx(i,{children:"Lines"})]}),s.jsxs(t,{children:[s.jsx(V,{}),s.jsx(i,{children:"Points"})]}),r&&s.jsxs(t,{children:[s.jsx(D,{}),s.jsx(i,{children:"Matrices"})]})]}),I=({tab:r,title:n,set:c})=>{const o=a(e=>e.tab);return s.jsx(P,{className:`${o===r?" __perf_toggle_tab_active":""}`,onClick:()=>{c(!0),X({tab:r})},children:s.jsx("span",{children:n})})},G=({openByDefault:r,showGraph:n,deepAnalyze:c,matrixUpdate:o})=>{const[e,l]=S.useState(r);return s.jsxs("span",{children:[s.jsx(B,{show:e,showGraph:n,matrixUpdate:o}),r&&!c?null:s.jsxs(K,{className:"__perf_toggle",children:[c&&s.jsx(I,{tab:"programs",title:"Programs",set:l}),c&&s.jsx(I,{tab:"infos",title:"Infos",set:l}),s.jsx(P,{onClick:()=>{l(!e)},children:e?s.jsxs("span",{children:[s.jsx(L,{})," Minimize"]}):s.jsxs("span",{children:[s.jsx(M,{})," More"]})})]})]})},B=({show:r,showGraph:n,matrixUpdate:c})=>{const o=a(e=>e.tab);return s.jsxs(s.Fragment,{children:[s.jsx(w,{matrixUpdate:c}),r&&s.jsx("div",{children:s.jsx(O,{style:{marginTop:n?"38px":0},children:o==="programs"&&s.jsx(W,{})})})]})},xs=({showGraph:r=!0,colorBlind:n=!1,openByDefault:c=!0,className:o,overClock:e=!1,style:l,position:x="top-right",chart:d,logsPerSecond:C,deepAnalyze:m=!1,antialias:T=!0,customData:p,matrixUpdate:g,minimal:f})=>{const u=b.useRef(null);return s.jsxs(s.Fragment,{children:[s.jsx(q,{logsPerSecond:C,chart:d,overClock:e,deepAnalyze:m,matrixUpdate:g}),s.jsx(J,{name:"r3f-perf",children:s.jsxs(A,{className:(o?" ".concat(o):" ")+` ${x||""} ${f?"minimal":""}`,style:{minHeight:f?"37px":r?"100px":"60px",...l},ref:u,children:[s.jsx(v,{perfContainerRef:u,colorBlind:n,chart:d,showGraph:r,antialias:T,customData:p,minimal:f,matrixUpdate:g}),s.jsx(z,{colorBlind:n,showGraph:r,deepAnalyze:m,openByDefault:c,customData:p,matrixUpdate:g,minimal:f})]})})]})};export{xs as P,j as c};
//# sourceMappingURL=Perf.mjs.i8e51fnQ.js.map
