import{r as c}from"../../../../react/index.js.CiILtb88.js";import{c as l}from"./create-aria-hider.mjs.D9N7_5kp.js";import{s as a}from"./scope-tab.mjs.C89fSmBv.js";import{F as m,t as p,a as f}from"./tabbable.mjs.DAAAxSO2.js";function T(n=!0){const t=c.useRef(),u=c.useRef(null),o=r=>{let e=r.querySelector("[data-autofocus]");if(!e){const s=Array.from(r.querySelectorAll(m));e=s.find(p)||s.find(f)||null,!e&&f(r)&&(e=r)}e&&e.focus({preventScroll:!0})},i=c.useCallback(r=>{if(n){if(r===null){u.current&&(u.current(),u.current=null);return}u.current=l(r),t.current!==r&&(r?(setTimeout(()=>{r.getRootNode()&&o(r)}),t.current=r):t.current=null)}},[n]);return c.useEffect(()=>{if(!n)return;t.current&&setTimeout(()=>o(t.current));const r=e=>{e.key==="Tab"&&t.current&&a(t.current,e)};return document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",r),u.current&&u.current()}},[n]),i}export{T as u};
