import{r as c}from"../../../../react/index.js.4247Uq6c.js";import{F as l,t as a,a as f}from"./tabbable.mjs.MeBihu3m.js";import{s as m}from"./scope-tab.mjs.fsEuNdha.js";import{c as p}from"./create-aria-hider.mjs.qt0qiKf7.js";function T(n=!0){const t=c.useRef(),u=c.useRef(null),o=r=>{let e=r.querySelector("[data-autofocus]");if(!e){const s=Array.from(r.querySelectorAll(l));e=s.find(a)||s.find(f)||null,!e&&f(r)&&(e=r)}e&&e.focus({preventScroll:!0})},i=c.useCallback(r=>{if(n){if(r===null){u.current&&(u.current(),u.current=null);return}u.current=p(r),t.current!==r&&(r?(setTimeout(()=>{r.getRootNode()&&o(r)}),t.current=r):t.current=null)}},[n]);return c.useEffect(()=>{if(!n)return;t.current&&setTimeout(()=>o(t.current));const r=e=>{e.key==="Tab"&&t.current&&m(t.current,e)};return document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",r),u.current&&u.current()}},[n]),i}export{T as u};
//# sourceMappingURL=use-focus-trap.mjs.zqZ6dWfm.js.map
