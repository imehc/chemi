{"version":3,"file":"use-focus-trap.mjs.zqZ6dWfm.js","sources":["../../../../../../node_modules/.pnpm/@mantine+hooks@7.2.2_react@18.2.0/node_modules/@mantine/hooks/esm/use-focus-trap/use-focus-trap.mjs"],"sourcesContent":["'use client';\nimport { useRef, useCallback, useEffect } from 'react';\nimport { FOCUS_SELECTOR, tabbable, focusable } from './tabbable.mjs';\nimport { scopeTab } from './scope-tab.mjs';\nimport { createAriaHider } from './create-aria-hider.mjs';\n\nfunction useFocusTrap(active = true) {\n  const ref = useRef();\n  const restoreAria = useRef(null);\n  const focusNode = (node) => {\n    let focusElement = node.querySelector(\"[data-autofocus]\");\n    if (!focusElement) {\n      const children = Array.from(node.querySelectorAll(FOCUS_SELECTOR));\n      focusElement = children.find(tabbable) || children.find(focusable) || null;\n      if (!focusElement && focusable(node))\n        focusElement = node;\n    }\n    if (focusElement) {\n      focusElement.focus({ preventScroll: true });\n    } else if (process.env.NODE_ENV === \"development\") {\n      console.warn(\n        \"[@mantine/hooks/use-focus-trap] Failed to find focusable element within provided node\",\n        node\n      );\n    }\n  };\n  const setRef = useCallback(\n    (node) => {\n      if (!active) {\n        return;\n      }\n      if (node === null) {\n        if (restoreAria.current) {\n          restoreAria.current();\n          restoreAria.current = null;\n        }\n        return;\n      }\n      restoreAria.current = createAriaHider(node);\n      if (ref.current === node) {\n        return;\n      }\n      if (node) {\n        setTimeout(() => {\n          if (node.getRootNode()) {\n            focusNode(node);\n          } else if (process.env.NODE_ENV === \"development\") {\n            console.warn(\"[@mantine/hooks/use-focus-trap] Ref node is not part of the dom\", node);\n          }\n        });\n        ref.current = node;\n      } else {\n        ref.current = null;\n      }\n    },\n    [active]\n  );\n  useEffect(() => {\n    if (!active) {\n      return void 0;\n    }\n    ref.current && setTimeout(() => focusNode(ref.current));\n    const handleKeyDown = (event) => {\n      if (event.key === \"Tab\" && ref.current) {\n        scopeTab(ref.current, event);\n      }\n    };\n    document.addEventListener(\"keydown\", handleKeyDown);\n    return () => {\n      document.removeEventListener(\"keydown\", handleKeyDown);\n      if (restoreAria.current) {\n        restoreAria.current();\n      }\n    };\n  }, [active]);\n  return setRef;\n}\n\nexport { useFocusTrap };\n//# sourceMappingURL=use-focus-trap.mjs.map\n"],"names":["useFocusTrap","active","ref","useRef","restoreAria","focusNode","node","focusElement","children","FOCUS_SELECTOR","tabbable","focusable","setRef","useCallback","createAriaHider","useEffect","handleKeyDown","event","scopeTab"],"mappings":"gOAMA,SAASA,EAAaC,EAAS,GAAM,CACnC,MAAMC,EAAMC,EAAAA,SACNC,EAAcD,SAAO,IAAI,EACzBE,EAAaC,GAAS,CACtB,IAAAC,EAAeD,EAAK,cAAc,kBAAkB,EACxD,GAAI,CAACC,EAAc,CACjB,MAAMC,EAAW,MAAM,KAAKF,EAAK,iBAAiBG,CAAc,CAAC,EACjEF,EAAeC,EAAS,KAAKE,CAAQ,GAAKF,EAAS,KAAKG,CAAS,GAAK,KAClE,CAACJ,GAAgBI,EAAUL,CAAI,IAClBC,EAAAD,EACnB,CACIC,GACFA,EAAa,MAAM,CAAE,cAAe,EAAM,CAAA,CAM5C,EAEIK,EAASC,EAAA,YACZP,GAAS,CACR,GAAKL,EAGL,IAAIK,IAAS,KAAM,CACbF,EAAY,UACdA,EAAY,QAAQ,EACpBA,EAAY,QAAU,MAExB,MACF,CACYA,EAAA,QAAUU,EAAgBR,CAAI,EACtCJ,EAAI,UAAYI,IAGhBA,GACF,WAAW,IAAM,CACXA,EAAK,eACPD,EAAUC,CAAI,CAGhB,CACD,EACDJ,EAAI,QAAUI,GAEdJ,EAAI,QAAU,MAElB,EACA,CAACD,CAAM,CAAA,EAETc,OAAAA,EAAAA,UAAU,IAAM,CACd,GAAI,CAACd,EACI,OAETC,EAAI,SAAW,WAAW,IAAMG,EAAUH,EAAI,OAAO,CAAC,EAChD,MAAAc,EAAiBC,GAAU,CAC3BA,EAAM,MAAQ,OAASf,EAAI,SACpBgB,EAAAhB,EAAI,QAASe,CAAK,CAC7B,EAEO,gBAAA,iBAAiB,UAAWD,CAAa,EAC3C,IAAM,CACF,SAAA,oBAAoB,UAAWA,CAAa,EACjDZ,EAAY,SACdA,EAAY,QAAQ,CACtB,CACF,EACC,CAACH,CAAM,CAAC,EACJW,CACT","x_google_ignoreList":[0]}