{"version":3,"file":"use-popover.mjs.feRrr9N6.js","sources":["../../../../../../../node_modules/.pnpm/@mantine+core@7.2.2_@mantine+hooks@7.2.2_@types+react@18.2.38_react-dom@18.2.0_react@18.2.0/node_modules/@mantine/core/esm/components/Popover/use-popover.mjs"],"sourcesContent":["'use client';\nimport { useUncontrolled, useDidUpdate } from '@mantine/hooks';\nimport { useFloating, offset, shift, limitShift, flip, inline, arrow, size } from '@floating-ui/react';\nimport { useFloatingAutoUpdate } from '../Floating/use-floating-auto-update.mjs';\n\nfunction getPopoverMiddlewares(options, getFloating) {\n  var _a, _b, _c, _d;\n  const middlewares = [offset(options.offset)];\n  if ((_a = options.middlewares) == null ? void 0 : _a.shift) {\n    middlewares.push(shift({ limiter: limitShift() }));\n  }\n  if ((_b = options.middlewares) == null ? void 0 : _b.flip) {\n    middlewares.push(flip());\n  }\n  if ((_c = options.middlewares) == null ? void 0 : _c.inline) {\n    middlewares.push(inline());\n  }\n  middlewares.push(arrow({ element: options.arrowRef, padding: options.arrowOffset }));\n  if (((_d = options.middlewares) == null ? void 0 : _d.size) || options.width === \"target\") {\n    middlewares.push(\n      size({\n        apply({ rects, availableWidth, availableHeight }) {\n          var _a2, _b2, _c2;\n          const floating = getFloating();\n          const styles = (_b2 = (_a2 = floating.refs.floating.current) == null ? void 0 : _a2.style) != null ? _b2 : {};\n          if ((_c2 = options.middlewares) == null ? void 0 : _c2.size) {\n            Object.assign(styles, {\n              maxWidth: `${availableWidth}px`,\n              maxHeight: `${availableHeight}px`\n            });\n          }\n          if (options.width === \"target\") {\n            Object.assign(styles, {\n              width: `${rects.reference.width}px`\n            });\n          }\n        }\n      })\n    );\n  }\n  return middlewares;\n}\nfunction usePopover(options) {\n  const [_opened, setOpened] = useUncontrolled({\n    value: options.opened,\n    defaultValue: options.defaultOpened,\n    finalValue: false,\n    onChange: options.onChange\n  });\n  const onClose = () => {\n    var _a;\n    if (_opened) {\n      (_a = options.onClose) == null ? void 0 : _a.call(options);\n      setOpened(false);\n    }\n  };\n  const onToggle = () => {\n    var _a, _b;\n    if (_opened) {\n      (_a = options.onClose) == null ? void 0 : _a.call(options);\n      setOpened(false);\n    } else {\n      (_b = options.onOpen) == null ? void 0 : _b.call(options);\n      setOpened(true);\n    }\n  };\n  const floating = useFloating({\n    placement: options.position,\n    middleware: getPopoverMiddlewares(options, () => floating)\n  });\n  useFloatingAutoUpdate({\n    opened: options.opened,\n    position: options.position,\n    positionDependencies: options.positionDependencies || [],\n    floating\n  });\n  useDidUpdate(() => {\n    var _a;\n    (_a = options.onPositionChange) == null ? void 0 : _a.call(options, floating.placement);\n  }, [floating.placement]);\n  useDidUpdate(() => {\n    var _a, _b;\n    if (!options.opened) {\n      (_a = options.onClose) == null ? void 0 : _a.call(options);\n    } else {\n      (_b = options.onOpen) == null ? void 0 : _b.call(options);\n    }\n  }, [options.opened]);\n  return {\n    floating,\n    controlled: typeof options.opened === \"boolean\",\n    opened: _opened,\n    onClose,\n    onToggle\n  };\n}\n\nexport { usePopover };\n//# sourceMappingURL=use-popover.mjs.map\n"],"names":["getPopoverMiddlewares","options","getFloating","_a","_b","_c","_d","middlewares","offset","shift","limitShift","flip","inline","arrow","size","rects","availableWidth","availableHeight","_a2","_b2","_c2","styles","usePopover","_opened","setOpened","useUncontrolled","onClose","onToggle","floating","useFloating","useFloatingAutoUpdate","useDidUpdate"],"mappings":"gkBAKA,SAASA,EAAsBC,EAASC,EAAa,CACnD,IAAIC,EAAIC,EAAIC,EAAIC,EAChB,MAAMC,EAAc,CAACC,EAAOP,EAAQ,MAAM,CAAC,EAC3C,OAAKE,EAAKF,EAAQ,cAAgB,MAAgBE,EAAG,OACnDI,EAAY,KAAKE,EAAM,CAAE,QAASC,EAAU,CAAI,CAAA,CAAC,GAE9CN,EAAKH,EAAQ,cAAgB,MAAgBG,EAAG,MACnDG,EAAY,KAAKI,EAAI,CAAE,GAEpBN,EAAKJ,EAAQ,cAAgB,MAAgBI,EAAG,QACnDE,EAAY,KAAKK,EAAM,CAAE,EAE3BL,EAAY,KAAKM,EAAM,CAAE,QAASZ,EAAQ,SAAU,QAASA,EAAQ,WAAW,CAAE,CAAC,IAC7EK,EAAKL,EAAQ,cAAgB,MAAgBK,EAAG,MAASL,EAAQ,QAAU,WAC/EM,EAAY,KACVO,EAAK,CACH,MAAM,CAAE,MAAAC,EAAO,eAAAC,EAAgB,gBAAAC,CAAe,EAAI,CAChD,IAAIC,EAAKC,EAAKC,EAEd,MAAMC,GAAUF,GAAOD,EADNhB,IACqB,KAAK,SAAS,UAAY,KAAO,OAASgB,EAAI,QAAU,KAAOC,EAAM,IACtGC,EAAMnB,EAAQ,cAAgB,MAAgBmB,EAAI,MACrD,OAAO,OAAOC,EAAQ,CACpB,SAAU,GAAGL,CAAc,KAC3B,UAAW,GAAGC,CAAe,IAC3C,CAAa,EAEChB,EAAQ,QAAU,UACpB,OAAO,OAAOoB,EAAQ,CACpB,MAAO,GAAGN,EAAM,UAAU,KAAK,IAC7C,CAAa,CAEJ,CACT,CAAO,CACP,EAESR,CACT,CACA,SAASe,EAAWrB,EAAS,CAC3B,KAAM,CAACsB,EAASC,CAAS,EAAIC,EAAgB,CAC3C,MAAOxB,EAAQ,OACf,aAAcA,EAAQ,cACtB,WAAY,GACZ,SAAUA,EAAQ,QACtB,CAAG,EACKyB,EAAU,IAAM,CACpB,IAAIvB,EACAoB,KACDpB,EAAKF,EAAQ,UAAY,MAAgBE,EAAG,KAAKF,CAAO,EACzDuB,EAAU,EAAK,EAErB,EACQG,EAAW,IAAM,CACrB,IAAIxB,EAAIC,EACJmB,IACDpB,EAAKF,EAAQ,UAAY,MAAgBE,EAAG,KAAKF,CAAO,EACzDuB,EAAU,EAAK,KAEdpB,EAAKH,EAAQ,SAAW,MAAgBG,EAAG,KAAKH,CAAO,EACxDuB,EAAU,EAAI,EAEpB,EACQI,EAAWC,EAAY,CAC3B,UAAW5B,EAAQ,SACnB,WAAYD,EAAsBC,EAAS,IAAM2B,CAAQ,CAC7D,CAAG,EACD,OAAAE,EAAsB,CACpB,OAAQ7B,EAAQ,OAChB,SAAUA,EAAQ,SAClB,qBAAsBA,EAAQ,sBAAwB,CAAE,EACxD,SAAA2B,CACJ,CAAG,EACDG,EAAa,IAAM,CACjB,IAAI5B,GACHA,EAAKF,EAAQ,mBAAqB,MAAgBE,EAAG,KAAKF,EAAS2B,EAAS,SAAS,CAC1F,EAAK,CAACA,EAAS,SAAS,CAAC,EACvBG,EAAa,IAAM,CACjB,IAAI5B,EAAIC,EACHH,EAAQ,QAGVG,EAAKH,EAAQ,SAAW,MAAgBG,EAAG,KAAKH,CAAO,GAFvDE,EAAKF,EAAQ,UAAY,MAAgBE,EAAG,KAAKF,CAAO,CAI/D,EAAK,CAACA,EAAQ,MAAM,CAAC,EACZ,CACL,SAAA2B,EACA,WAAY,OAAO3B,EAAQ,QAAW,UACtC,OAAQsB,EACR,QAAAG,EACA,SAAAC,CACJ,CACA","x_google_ignoreList":[0]}