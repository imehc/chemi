import{u as m}from"../../../../../@floating-ui/react/dist/floating-ui.react.mjs.BjKwregc.js";import"../../../../../react/index.js.IuPGg7Py.js";import{u as p}from"../Floating/use-floating-auto-update.mjs.Bmn5_Nc3.js";import{u as w}from"../../../../hooks/esm/use-uncontrolled/use-uncontrolled.mjs.Cwcj0cnG.js";import{u as s}from"../../../../hooks/esm/use-did-update/use-did-update.mjs.Di8RN7PN.js";import{o as y,s as b,l as c,f as g,i as h,a as O,b as o}from"../../../../../@floating-ui/react-dom/dist/floating-ui.react-dom.mjs.B38vdQb9.js";function C(e){if(e===void 0)return{shift:!0,flip:!0};const l={...e};return e.shift===void 0&&(l.shift=!0),e.flip===void 0&&(l.flip=!0),l}function v(e,l){const f=C(e.middlewares),i=[y(e.offset)];return f.shift&&i.push(b(typeof f.shift=="boolean"?{limiter:c(),padding:5}:{limiter:c(),padding:5,...f.shift})),f.flip&&i.push(typeof f.flip=="boolean"?g():g(f.flip)),f.inline&&i.push(typeof f.inline=="boolean"?h():h(f.inline)),i.push(O({element:e.arrowRef,padding:e.arrowOffset})),(f.size||e.width==="target")&&i.push(o({...typeof f.size=="boolean"?{}:f.size,apply({rects:n,availableWidth:r,availableHeight:a}){var u;const d=((u=l().refs.floating.current)==null?void 0:u.style)??{};f.size&&Object.assign(d,{maxWidth:`${r}px`,maxHeight:`${a}px`}),e.width==="target"&&Object.assign(d,{width:`${n.reference.width}px`})}})),i}function j(e){const[l,f]=w({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),i=()=>{var a;l&&((a=e.onClose)==null||a.call(e),f(!1))},n=()=>{var a,t;l?((a=e.onClose)==null||a.call(e),f(!1)):((t=e.onOpen)==null||t.call(e),f(!0))},r=m({strategy:e.strategy,placement:e.position,middleware:v(e,()=>r)});return p({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:r}),s(()=>{var a;(a=e.onPositionChange)==null||a.call(e,r.placement)},[r.placement]),s(()=>{var a,t;e.opened?(t=e.onOpen)==null||t.call(e):(a=e.onClose)==null||a.call(e)},[e.opened]),{floating:r,controlled:typeof e.opened=="boolean",opened:l,onClose:i,onToggle:n}}export{j as u};
