import{j as l}from"../../../../../react/jsx-runtime.js.Cm6upDnr.js";import{r as b}from"../../../../../react/index.js.IuPGg7Py.js";import{u as ge}from"../../core/styles-api/use-resolved-styles-api/use-resolved-styles-api.mjs.Dru9K7M9.js";import{u as xe}from"../../core/MantineProvider/use-props/use-props.mjs.CZPYrlnm.js";import{f as Se}from"../../core/factory/factory.mjs.E2rTOrRU.js";import{g as ve}from"../Combobox/get-parsed-combobox-data/get-parsed-combobox-data.mjs.BSKT1ADk.js";import{g as we}from"../Combobox/get-options-lockup/get-options-lockup.mjs.D8DncSQZ.js";import{C as i}from"../Combobox/Combobox.mjs.CBAA-4y8.js";import{O as ye}from"../Combobox/OptionsDropdown/OptionsDropdown.mjs.CZDVXWqS.js";import{u as Ce}from"../Combobox/use-combobox/use-combobox.mjs.CWLmG1ur.js";import{I as T}from"../InputBase/InputBase.mjs.X0oW5Wkr.js";import{u as Oe}from"../../../../hooks/esm/use-id/use-id.mjs.Du7iq5Uz.js";import{u as M}from"../../../../hooks/esm/use-uncontrolled/use-uncontrolled.mjs.Cwcj0cnG.js";const De={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},H=Se((R,z)=>{const P=xe("Select",De,R),{classNames:L,styles:U,unstyled:p,vars:Ie,dropdownOpened:W,defaultDropdownOpened:$,onDropdownClose:g,onDropdownOpen:x,onFocus:S,onBlur:v,onClick:w,onChange:q,data:j,value:u,defaultValue:G,selectFirstOptionOnChange:y,onOptionSubmit:C,comboboxProps:J,readOnly:d,disabled:m,filter:K,limit:Q,withScrollArea:X,maxDropdownHeight:Y,size:f,searchable:a,rightSection:Z,checkIconPosition:ee,withCheckIcon:oe,nothingFoundMessage:V,name:te,form:se,searchValue:le,defaultSearchValue:ae,onSearchChange:re,allowDeselect:ne,error:E,rightSectionPointerEvents:ie,id:ce,clearable:pe,clearButtonProps:ue,hiddenInputProps:de,renderOption:me,onClear:O,autoComplete:fe,scrollAreaProps:he,...h}=P,D=b.useMemo(()=>ve(j),[j]),c=b.useMemo(()=>we(D),[D]),_=Oe(ce),[t,k,be]=M({value:u,defaultValue:G,finalValue:null,onChange:q}),r=typeof t=="string"?c[t]:void 0,[I,n]=M({value:le,defaultValue:ae,finalValue:r?r.label:"",onChange:re}),o=Ce({opened:W,defaultOpened:$,onDropdownOpen:()=>{x==null||x(),o.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{g==null||g(),o.resetSelectedOption()}}),{resolvedClassNames:F,resolvedStyles:N}=ge({props:P,styles:U,classNames:L});b.useEffect(()=>{y&&o.selectFirstOption()},[y,t]),b.useEffect(()=>{u===null&&n(""),typeof u=="string"&&r&&n(r.label)},[u,r]);const B=pe&&!!t&&!m&&!d&&l.jsx(i.ClearButton,{size:f,...ue,onClear:()=>{k(null,null),n(""),O==null||O()}});return l.jsxs(l.Fragment,{children:[l.jsxs(i,{store:o,__staticSelector:"Select",classNames:F,styles:N,unstyled:p,readOnly:d,onOptionSubmit:e=>{C==null||C(e);const s=ne&&c[e].value===t?null:c[e],A=s?s.value:null;k(A,s),!be&&n(typeof A=="string"&&(s==null?void 0:s.label)||""),o.closeDropdown()},size:f,...J,children:[l.jsx(i.Target,{targetType:a?"input":"button",autoComplete:fe,children:l.jsx(T,{id:_,ref:z,rightSection:Z||B||l.jsx(i.Chevron,{size:f,error:E,unstyled:p}),rightSectionPointerEvents:ie||(B?"all":"none"),...h,size:f,__staticSelector:"Select",disabled:m,readOnly:d||!a,value:I,onChange:e=>{n(e.currentTarget.value),o.openDropdown(),y&&o.selectFirstOption()},onFocus:e=>{a&&o.openDropdown(),S==null||S(e)},onBlur:e=>{var s;a&&o.closeDropdown(),n(t!=null&&((s=c[t])==null?void 0:s.label)||""),v==null||v(e)},onClick:e=>{a?o.openDropdown():o.toggleDropdown(),w==null||w(e)},classNames:F,styles:N,unstyled:p,pointer:!a,error:E})}),l.jsx(ye,{data:D,hidden:d||m,filter:K,search:I,limit:Q,hiddenWhenEmpty:!a||!V,withScrollArea:X,maxDropdownHeight:Y,filterOptions:a&&(r==null?void 0:r.label)!==I,value:t,checkIconPosition:ee,withCheckIcon:oe,nothingFoundMessage:V,unstyled:p,labelId:h.label?`${_}-label`:void 0,"aria-label":h.label?void 0:h["aria-label"],renderOption:me,scrollAreaProps:he})]}),l.jsx(i.HiddenInput,{value:t,name:te,form:se,disabled:m,...de})]})});H.classes={...T.classes,...i.classes};H.displayName="@mantine/core/Select";export{H as S};
