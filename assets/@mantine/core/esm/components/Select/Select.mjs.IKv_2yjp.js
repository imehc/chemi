import{r as h,R as s}from"../../../../../react/index.js.CiILtb88.js";import{u as be}from"../../core/styles-api/use-resolved-styles-api/use-resolved-styles-api.mjs.k8RCdNa3.js";import{u as Se}from"../../core/MantineProvider/use-props/use-props.mjs.DV5d7PVT.js";import{f as we}from"../../core/factory/factory.mjs.9GBOrA3L.js";import{g as ve}from"../Combobox/get-parsed-combobox-data/get-parsed-combobox-data.mjs.BSKT1ADk.js";import{g as ye}from"../Combobox/get-options-lockup/get-options-lockup.mjs.D8DncSQZ.js";import{C as c}from"../Combobox/Combobox.mjs.0GkpUcuS.js";import{O as Ce}from"../Combobox/OptionsDropdown/OptionsDropdown.mjs.DmoiPjv8.js";import{u as Oe}from"../Combobox/use-combobox/use-combobox.mjs.DIki6hLU.js";import{I as R}from"../InputBase/InputBase.mjs.DHI0DbwX.js";import{u as Ee}from"../../../../hooks/esm/use-id/use-id.mjs.C3ysqdO1.js";import{u as M}from"../../../../hooks/esm/use-uncontrolled/use-uncontrolled.mjs.DZJQyLGt.js";const De={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},T=we((H,z)=>{const I=Se("Select",De,H),{classNames:L,styles:U,unstyled:p,vars:Ie,dropdownOpened:W,defaultDropdownOpened:$,onDropdownClose:g,onDropdownOpen:b,onFocus:S,onBlur:w,onClick:v,onChange:j,data:P,value:u,defaultValue:q,selectFirstOptionOnChange:y,onOptionSubmit:C,comboboxProps:G,readOnly:d,disabled:m,filter:J,limit:K,withScrollArea:Q,maxDropdownHeight:X,size:f,searchable:n,rightSection:Y,checkIconPosition:Z,withCheckIcon:ee,nothingFoundMessage:x,name:te,form:oe,searchValue:le,defaultSearchValue:se,onSearchChange:ne,allowDeselect:ae,error:V,rightSectionPointerEvents:re,id:ce,clearable:ie,clearButtonProps:pe,hiddenInputProps:ue,renderOption:de,onClear:O,autoComplete:me,scrollAreaProps:fe,...he}=I,E=h.useMemo(()=>ve(P),[P]),i=h.useMemo(()=>ye(E),[E]),_=Ee(ce),[o,k,ge]=M({value:u,defaultValue:q,finalValue:null,onChange:j}),a=typeof o=="string"?i[o]:void 0,[D,r]=M({value:le,defaultValue:se,finalValue:a?a.label:"",onChange:ne}),t=Oe({opened:W,defaultOpened:$,onDropdownOpen:()=>{b==null||b(),t.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{g==null||g(),t.resetSelectedOption()}}),{resolvedClassNames:F,resolvedStyles:N}=be({props:I,styles:U,classNames:L});h.useEffect(()=>{y&&t.selectFirstOption()},[y,o]),h.useEffect(()=>{u===null&&r(""),typeof u=="string"&&a&&r(a.label)},[u,a]);const B=ie&&!!o&&!m&&!d&&s.createElement(c.ClearButton,{size:f,...pe,onClear:()=>{k(null,null),r(""),O==null||O()}});return s.createElement(s.Fragment,null,s.createElement(c,{store:t,__staticSelector:"Select",classNames:F,styles:N,unstyled:p,readOnly:d,onOptionSubmit:e=>{C==null||C(e);const l=ae&&i[e].value===o?null:i[e],A=l?l.value:null;k(A,l),!ge&&r(typeof A=="string"&&(l==null?void 0:l.label)||""),t.closeDropdown()},size:f,...G},s.createElement(c.Target,{targetType:n?"input":"button",autoComplete:me},s.createElement(R,{id:_,ref:z,rightSection:Y||B||s.createElement(c.Chevron,{size:f,error:V,unstyled:p}),rightSectionPointerEvents:re||(B?"all":"none"),...he,size:f,__staticSelector:"Select",disabled:m,readOnly:d||!n,value:D,onChange:e=>{r(e.currentTarget.value),t.openDropdown(),y&&t.selectFirstOption()},onFocus:e=>{n&&t.openDropdown(),S==null||S(e)},onBlur:e=>{var l;n&&t.closeDropdown(),r(o!=null&&((l=i[o])==null?void 0:l.label)||""),w==null||w(e)},onClick:e=>{n?t.openDropdown():t.toggleDropdown(),v==null||v(e)},classNames:F,styles:N,unstyled:p,pointer:!n,error:V})),s.createElement(Ce,{data:E,hidden:d||m,filter:J,search:D,limit:K,hiddenWhenEmpty:!n||!x,withScrollArea:Q,maxDropdownHeight:X,filterOptions:n&&(a==null?void 0:a.label)!==D,value:o,checkIconPosition:Z,withCheckIcon:ee,nothingFoundMessage:x,unstyled:p,labelId:`${_}-label`,renderOption:de,scrollAreaProps:fe})),s.createElement(c.HiddenInput,{value:o,name:te,form:oe,disabled:m,...ue}))});T.classes={...R.classes,...c.classes};T.displayName="@mantine/core/Select";export{T as S};
