import{r as t}from"../../../../../../react/index.js.4247Uq6c.js";import{g as P,a as U,b as L}from"./get-index/get-index.mjs.1-uvbOyQ.js";import{u as j}from"../../../../../hooks/esm/use-uncontrolled/use-uncontrolled.mjs.RY6Hw8AB.js";function G({defaultOpened:C,opened:S,onOpenedChange:g,onDropdownClose:b,onDropdownOpen:m,loop:a=!0,scrollBehavior:p="instant"}={}){const[l,i]=j({value:S,defaultValue:C,finalValue:!1,onChange:g}),c=t.useRef(null),s=t.useRef(-1),k=t.useRef(null),w=t.useRef(null),I=t.useRef(-1),A=t.useRef(-1),v=t.useRef(-1),f=t.useCallback((e="unknown")=>{l||(i(!0),m==null||m(e))},[i,m,l]),x=t.useCallback((e="unknown")=>{l&&(i(!1),b==null||b(e))},[i,b,l]),y=t.useCallback((e="unknown")=>{l?x(e):f(e)},[x,f,l]),d=t.useCallback(()=>{const e=document.querySelector(`#${c.current} [data-combobox-selected]`);e==null||e.removeAttribute("data-combobox-selected"),e==null||e.removeAttribute("aria-selected")},[]),r=t.useCallback(e=>{const u=document.getElementById(c.current),o=u==null?void 0:u.querySelectorAll("[data-combobox-option]");if(!o)return null;const n=e>=o.length?0:e<0?o.length-1:e;return s.current=n,o!=null&&o[n]&&!o[n].hasAttribute("data-combobox-disabled")?(d(),o[n].setAttribute("data-combobox-selected","true"),o[n].setAttribute("aria-selected","true"),o[n].scrollIntoView({block:"nearest",behavior:p}),o[n].id):null},[p,d]),O=t.useCallback(()=>{const e=document.querySelector(`#${c.current} [data-combobox-active]`);if(e){const u=document.querySelectorAll(`#${c.current} [data-combobox-option]`),o=Array.from(u).findIndex(n=>n===e);return r(o)}return r(0)},[r]),T=t.useCallback(()=>r(P(s.current,document.querySelectorAll(`#${c.current} [data-combobox-option]`),a)),[r,a]),q=t.useCallback(()=>r(U(s.current,document.querySelectorAll(`#${c.current} [data-combobox-option]`),a)),[r,a]),R=t.useCallback(()=>r(L(document.querySelectorAll(`#${c.current} [data-combobox-option]`))),[r]),$=t.useCallback((e="selected")=>{v.current=window.setTimeout(()=>{const u=document.querySelectorAll(`#${c.current} [data-combobox-option]`),o=Array.from(u).findIndex(n=>n.hasAttribute(`data-combobox-${e}`));s.current=o},0)},[]),h=t.useCallback(()=>{s.current=-1,d()},[d]),E=t.useCallback(()=>{const e=document.querySelectorAll(`#${c.current} [data-combobox-option]`),u=e==null?void 0:e[s.current];u==null||u.click()},[]),V=t.useCallback(e=>{c.current=e},[]),F=t.useCallback(()=>{I.current=window.setTimeout(()=>k.current.focus(),0)},[]),N=t.useCallback(()=>{A.current=window.setTimeout(()=>w.current.focus(),0)},[]);return t.useEffect(()=>()=>{window.clearTimeout(I.current),window.clearTimeout(A.current),window.clearTimeout(v.current)},[]),{dropdownOpened:l,openDropdown:f,closeDropdown:x,toggleDropdown:y,selectedOptionIndex:s.current,selectOption:r,selectFirstOption:R,selectActiveOption:O,selectNextOption:T,selectPreviousOption:q,resetSelectedOption:h,updateSelectedOptionIndex:$,listId:c.current,setListId:V,clickSelectedOption:E,searchRef:k,focusSearchInput:F,targetRef:w,focusTarget:N}}export{G as u};
//# sourceMappingURL=use-combobox.mjs.YzKAjMd8.js.map
