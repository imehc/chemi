{"version":3,"file":"use-combobox.mjs.YzKAjMd8.js","sources":["../../../../../../../../node_modules/.pnpm/@mantine+core@7.2.2_@mantine+hooks@7.2.2_@types+react@18.2.38_react-dom@18.2.0_react@18.2.0/node_modules/@mantine/core/esm/components/Combobox/use-combobox/use-combobox.mjs"],"sourcesContent":["'use client';\nimport { useRef, useCallback, useEffect } from 'react';\nimport { useUncontrolled } from '@mantine/hooks';\nimport { getNextIndex, getPreviousIndex, getFirstIndex } from './get-index/get-index.mjs';\n\nfunction useCombobox({\n  defaultOpened,\n  opened,\n  onOpenedChange,\n  onDropdownClose,\n  onDropdownOpen,\n  loop = true,\n  scrollBehavior = \"instant\"\n} = {}) {\n  const [dropdownOpened, setDropdownOpened] = useUncontrolled({\n    value: opened,\n    defaultValue: defaultOpened,\n    finalValue: false,\n    onChange: onOpenedChange\n  });\n  const listId = useRef(null);\n  const selectedOptionIndex = useRef(-1);\n  const searchRef = useRef(null);\n  const targetRef = useRef(null);\n  const focusSearchTimeout = useRef(-1);\n  const focusTargetTimeout = useRef(-1);\n  const selectedIndexUpdateTimeout = useRef(-1);\n  const openDropdown = useCallback(\n    (eventSource = \"unknown\") => {\n      if (!dropdownOpened) {\n        setDropdownOpened(true);\n        onDropdownOpen == null ? void 0 : onDropdownOpen(eventSource);\n      }\n    },\n    [setDropdownOpened, onDropdownOpen, dropdownOpened]\n  );\n  const closeDropdown = useCallback(\n    (eventSource = \"unknown\") => {\n      if (dropdownOpened) {\n        setDropdownOpened(false);\n        onDropdownClose == null ? void 0 : onDropdownClose(eventSource);\n      }\n    },\n    [setDropdownOpened, onDropdownClose, dropdownOpened]\n  );\n  const toggleDropdown = useCallback(\n    (eventSource = \"unknown\") => {\n      if (dropdownOpened) {\n        closeDropdown(eventSource);\n      } else {\n        openDropdown(eventSource);\n      }\n    },\n    [closeDropdown, openDropdown, dropdownOpened]\n  );\n  const clearSelectedItem = useCallback(() => {\n    const selected = document.querySelector(`#${listId.current} [data-combobox-selected]`);\n    selected == null ? void 0 : selected.removeAttribute(\"data-combobox-selected\");\n    selected == null ? void 0 : selected.removeAttribute(\"aria-selected\");\n  }, []);\n  const selectOption = useCallback(\n    (index) => {\n      const list = document.getElementById(listId.current);\n      const items = list == null ? void 0 : list.querySelectorAll(\"[data-combobox-option]\");\n      if (!items) {\n        return null;\n      }\n      const nextIndex = index >= items.length ? 0 : index < 0 ? items.length - 1 : index;\n      selectedOptionIndex.current = nextIndex;\n      if ((items == null ? void 0 : items[nextIndex]) && !items[nextIndex].hasAttribute(\"data-combobox-disabled\")) {\n        clearSelectedItem();\n        items[nextIndex].setAttribute(\"data-combobox-selected\", \"true\");\n        items[nextIndex].setAttribute(\"aria-selected\", \"true\");\n        items[nextIndex].scrollIntoView({ block: \"nearest\", behavior: scrollBehavior });\n        return items[nextIndex].id;\n      }\n      return null;\n    },\n    [scrollBehavior, clearSelectedItem]\n  );\n  const selectActiveOption = useCallback(() => {\n    const activeOption = document.querySelector(\n      `#${listId.current} [data-combobox-active]`\n    );\n    if (activeOption) {\n      const items = document.querySelectorAll(\n        `#${listId.current} [data-combobox-option]`\n      );\n      const index = Array.from(items).findIndex((option) => option === activeOption);\n      return selectOption(index);\n    }\n    return selectOption(0);\n  }, [selectOption]);\n  const selectNextOption = useCallback(\n    () => selectOption(\n      getNextIndex(\n        selectedOptionIndex.current,\n        document.querySelectorAll(`#${listId.current} [data-combobox-option]`),\n        loop\n      )\n    ),\n    [selectOption, loop]\n  );\n  const selectPreviousOption = useCallback(\n    () => selectOption(\n      getPreviousIndex(\n        selectedOptionIndex.current,\n        document.querySelectorAll(`#${listId.current} [data-combobox-option]`),\n        loop\n      )\n    ),\n    [selectOption, loop]\n  );\n  const selectFirstOption = useCallback(\n    () => selectOption(\n      getFirstIndex(\n        document.querySelectorAll(`#${listId.current} [data-combobox-option]`)\n      )\n    ),\n    [selectOption]\n  );\n  const updateSelectedOptionIndex = useCallback((target = \"selected\") => {\n    selectedIndexUpdateTimeout.current = window.setTimeout(() => {\n      const items = document.querySelectorAll(\n        `#${listId.current} [data-combobox-option]`\n      );\n      const index = Array.from(items).findIndex(\n        (option) => option.hasAttribute(`data-combobox-${target}`)\n      );\n      selectedOptionIndex.current = index;\n    }, 0);\n  }, []);\n  const resetSelectedOption = useCallback(() => {\n    selectedOptionIndex.current = -1;\n    clearSelectedItem();\n  }, [clearSelectedItem]);\n  const clickSelectedOption = useCallback(() => {\n    const items = document.querySelectorAll(\n      `#${listId.current} [data-combobox-option]`\n    );\n    const item = items == null ? void 0 : items[selectedOptionIndex.current];\n    item == null ? void 0 : item.click();\n  }, []);\n  const setListId = useCallback((id) => {\n    listId.current = id;\n  }, []);\n  const focusSearchInput = useCallback(() => {\n    focusSearchTimeout.current = window.setTimeout(() => searchRef.current.focus(), 0);\n  }, []);\n  const focusTarget = useCallback(() => {\n    focusTargetTimeout.current = window.setTimeout(() => targetRef.current.focus(), 0);\n  }, []);\n  useEffect(\n    () => () => {\n      window.clearTimeout(focusSearchTimeout.current);\n      window.clearTimeout(focusTargetTimeout.current);\n      window.clearTimeout(selectedIndexUpdateTimeout.current);\n    },\n    []\n  );\n  return {\n    dropdownOpened,\n    openDropdown,\n    closeDropdown,\n    toggleDropdown,\n    selectedOptionIndex: selectedOptionIndex.current,\n    selectOption,\n    selectFirstOption,\n    selectActiveOption,\n    selectNextOption,\n    selectPreviousOption,\n    resetSelectedOption,\n    updateSelectedOptionIndex,\n    listId: listId.current,\n    setListId,\n    clickSelectedOption,\n    searchRef,\n    focusSearchInput,\n    targetRef,\n    focusTarget\n  };\n}\n\nexport { useCombobox };\n//# sourceMappingURL=use-combobox.mjs.map\n"],"names":["useCombobox","defaultOpened","opened","onOpenedChange","onDropdownClose","onDropdownOpen","loop","scrollBehavior","dropdownOpened","setDropdownOpened","useUncontrolled","listId","useRef","selectedOptionIndex","searchRef","targetRef","focusSearchTimeout","focusTargetTimeout","selectedIndexUpdateTimeout","openDropdown","useCallback","eventSource","closeDropdown","toggleDropdown","clearSelectedItem","selected","selectOption","index","list","items","nextIndex","selectActiveOption","activeOption","option","selectNextOption","getNextIndex","selectPreviousOption","getPreviousIndex","selectFirstOption","getFirstIndex","updateSelectedOptionIndex","target","resetSelectedOption","clickSelectedOption","item","setListId","id","focusSearchInput","focusTarget","useEffect"],"mappings":"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","x_google_ignoreList":[0]}