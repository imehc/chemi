import{r as m,R as h}from"../../../../../../react/index.js.CiILtb88.js";import{u as R}from"../ScrollArea.context.mjs.XmRc5ZyA.js";import{u as b}from"../ScrollAreaScrollbar/Scrollbar.context.mjs.Cd1NgF-4.js";import{c as d}from"../utils/compose-event-handlers.mjs.HRUKSOxQ.js";import{a as w}from"../utils/add-unlinked-scroll-listener.mjs.0JVdlEfQ.js";import{u as g}from"../../../../../hooks/esm/use-merged-ref/use-merged-ref.mjs.Cn2eK_Lp.js";import{u as x}from"../../../../../hooks/esm/use-debounced-callback/use-debounced-callback.mjs.C7ZMqlKw.js";const E=m.forwardRef((t,a)=>{const{style:i,...l}=t,n=R(),o=b(),{onThumbPositionChange:s}=o,p=g(a,e=>o.onThumbChange(e)),r=m.useRef(),f=x(()=>{r.current&&(r.current(),r.current=void 0)},100);return m.useEffect(()=>{const{viewport:e}=n;if(e){const u=()=>{if(f(),!r.current){const c=w(e,s);r.current=c,s()}};return s(),e.addEventListener("scroll",u),()=>e.removeEventListener("scroll",u)}},[n.viewport,f,s]),h.createElement("div",{"data-state":o.hasThumb?"visible":"hidden",...l,ref:p,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...i},onPointerDownCapture:d(t.onPointerDownCapture,e=>{const c=e.target.getBoundingClientRect(),v=e.clientX-c.left,C=e.clientY-c.top;o.onThumbPointerDown({x:v,y:C})}),onPointerUp:d(t.onPointerUp,o.onThumbPointerUp)})}),y=h.forwardRef((t,a)=>{const{forceMount:i,...l}=t,n=b();return i||n.hasThumb?h.createElement(E,{ref:a,...l}):null});export{y as S};
