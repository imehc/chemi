import{j as d}from"../../../../../../react/jsx-runtime.js.Cm6upDnr.js";import{r as i}from"../../../../../../react/index.js.IuPGg7Py.js";import{u as C}from"../ScrollArea.context.mjs.CA08sDaK.js";import{u as b}from"../ScrollAreaScrollbar/Scrollbar.context.mjs.BvoWS_Z4.js";import{c as f}from"../utils/compose-event-handlers.mjs.HRUKSOxQ.js";import{a as w}from"../utils/add-unlinked-scroll-listener.mjs.0JVdlEfQ.js";import{u as R}from"../../../../../hooks/esm/use-merged-ref/use-merged-ref.mjs.D3CE6DNm.js";import{u as g}from"../../../../../hooks/esm/use-debounced-callback/use-debounced-callback.mjs.BgJqcxXD.js";const P=i.forwardRef((o,u)=>{const{style:l,...a}=o,n=C(),e=b(),{onThumbPositionChange:s}=e,p=R(u,t=>e.onThumbChange(t)),r=i.useRef(),h=g(()=>{r.current&&(r.current(),r.current=void 0)},100);return i.useEffect(()=>{const{viewport:t}=n;if(t){const m=()=>{if(h(),!r.current){const c=w(t,s);r.current=c,s()}};return s(),t.addEventListener("scroll",m),()=>t.removeEventListener("scroll",m)}},[n.viewport,h,s]),d.jsx("div",{"data-state":e.hasThumb?"visible":"hidden",...a,ref:p,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...l},onPointerDownCapture:f(o.onPointerDownCapture,t=>{const c=t.target.getBoundingClientRect(),x=t.clientX-c.left,v=t.clientY-c.top;e.onThumbPointerDown({x,y:v})}),onPointerUp:f(o.onPointerUp,e.onThumbPointerUp)})}),y=i.forwardRef((o,u)=>{const{forceMount:l,...a}=o,n=b();return l||n.hasThumb?d.jsx(P,{ref:u,...a}):null});export{y as S};
