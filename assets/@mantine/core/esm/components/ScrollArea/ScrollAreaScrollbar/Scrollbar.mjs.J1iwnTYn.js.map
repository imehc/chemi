{"version":3,"file":"Scrollbar.mjs.J1iwnTYn.js","sources":["../../../../../../../../node_modules/.pnpm/@mantine+core@7.2.2_@mantine+hooks@7.2.2_@types+react@18.2.38_react-dom@18.2.0_react@18.2.0/node_modules/@mantine/core/esm/components/ScrollArea/ScrollAreaScrollbar/Scrollbar.mjs"],"sourcesContent":["'use client';\nimport React, { forwardRef, useEffect } from 'react';\nimport { useMergedRef, useCallbackRef, useDebounceCallback } from '@mantine/hooks';\nimport { useResizeObserver } from '../use-resize-observer.mjs';\nimport { useScrollAreaContext } from '../ScrollArea.context.mjs';\nimport { ScrollbarProvider } from './Scrollbar.context.mjs';\nimport { composeEventHandlers } from '../utils/compose-event-handlers.mjs';\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __objRest = (source, exclude) => {\n  var target = {};\n  for (var prop in source)\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)\n      target[prop] = source[prop];\n  if (source != null && __getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(source)) {\n      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))\n        target[prop] = source[prop];\n    }\n  return target;\n};\nconst Scrollbar = forwardRef((props, forwardedRef) => {\n  const _a = props, {\n    sizes,\n    hasThumb,\n    onThumbChange,\n    onThumbPointerUp,\n    onThumbPointerDown,\n    onThumbPositionChange,\n    onDragScroll,\n    onWheelScroll,\n    onResize\n  } = _a, scrollbarProps = __objRest(_a, [\n    \"sizes\",\n    \"hasThumb\",\n    \"onThumbChange\",\n    \"onThumbPointerUp\",\n    \"onThumbPointerDown\",\n    \"onThumbPositionChange\",\n    \"onDragScroll\",\n    \"onWheelScroll\",\n    \"onResize\"\n  ]);\n  const context = useScrollAreaContext();\n  const [scrollbar, setScrollbar] = React.useState(null);\n  const composeRefs = useMergedRef(forwardedRef, (node) => setScrollbar(node));\n  const rectRef = React.useRef(null);\n  const prevWebkitUserSelectRef = React.useRef(\"\");\n  const { viewport } = context;\n  const maxScrollPos = sizes.content - sizes.viewport;\n  const handleWheelScroll = useCallbackRef(onWheelScroll);\n  const handleThumbPositionChange = useCallbackRef(onThumbPositionChange);\n  const handleResize = useDebounceCallback(onResize, 10);\n  const handleDragScroll = (event) => {\n    if (rectRef.current) {\n      const x = event.clientX - rectRef.current.left;\n      const y = event.clientY - rectRef.current.top;\n      onDragScroll({ x, y });\n    }\n  };\n  useEffect(() => {\n    const handleWheel = (event) => {\n      const element = event.target;\n      const isScrollbarWheel = scrollbar == null ? void 0 : scrollbar.contains(element);\n      if (isScrollbarWheel)\n        handleWheelScroll(event, maxScrollPos);\n    };\n    document.addEventListener(\"wheel\", handleWheel, { passive: false });\n    return () => document.removeEventListener(\"wheel\", handleWheel, { passive: false });\n  }, [viewport, scrollbar, maxScrollPos, handleWheelScroll]);\n  useEffect(handleThumbPositionChange, [sizes, handleThumbPositionChange]);\n  useResizeObserver(scrollbar, handleResize);\n  useResizeObserver(context.content, handleResize);\n  return /* @__PURE__ */ React.createElement(\n    ScrollbarProvider,\n    {\n      value: {\n        scrollbar,\n        hasThumb,\n        onThumbChange: useCallbackRef(onThumbChange),\n        onThumbPointerUp: useCallbackRef(onThumbPointerUp),\n        onThumbPositionChange: handleThumbPositionChange,\n        onThumbPointerDown: useCallbackRef(onThumbPointerDown)\n      }\n    },\n    /* @__PURE__ */ React.createElement(\n      \"div\",\n      __spreadProps(__spreadValues({}, scrollbarProps), {\n        ref: composeRefs,\n        style: __spreadValues({ position: \"absolute\" }, scrollbarProps.style),\n        onPointerDown: composeEventHandlers(props.onPointerDown, (event) => {\n          const mainPointer = 0;\n          if (event.button === mainPointer) {\n            const element = event.target;\n            element.setPointerCapture(event.pointerId);\n            rectRef.current = scrollbar.getBoundingClientRect();\n            prevWebkitUserSelectRef.current = document.body.style.webkitUserSelect;\n            document.body.style.webkitUserSelect = \"none\";\n            handleDragScroll(event);\n          }\n        }),\n        onPointerMove: composeEventHandlers(props.onPointerMove, handleDragScroll),\n        onPointerUp: composeEventHandlers(props.onPointerUp, (event) => {\n          const element = event.target;\n          if (element.hasPointerCapture(event.pointerId)) {\n            element.releasePointerCapture(event.pointerId);\n          }\n          document.body.style.webkitUserSelect = prevWebkitUserSelectRef.current;\n          rectRef.current = null;\n        })\n      })\n    )\n  );\n});\n\nexport { Scrollbar };\n//# sourceMappingURL=Scrollbar.mjs.map\n"],"names":["__defProp","__defProps","__getOwnPropDescs","__getOwnPropSymbols","__hasOwnProp","__propIsEnum","__defNormalProp","obj","key","value","__spreadValues","a","b","prop","__spreadProps","__objRest","source","exclude","target","Scrollbar","forwardRef","props","forwardedRef","_a","sizes","hasThumb","onThumbChange","onThumbPointerUp","onThumbPointerDown","onThumbPositionChange","onDragScroll","onWheelScroll","onResize","scrollbarProps","context","useScrollAreaContext","scrollbar","setScrollbar","React","composeRefs","useMergedRef","node","rectRef","prevWebkitUserSelectRef","viewport","maxScrollPos","handleWheelScroll","useCallbackRef","handleThumbPositionChange","handleResize","useDebounceCallback","handleDragScroll","event","x","y","useEffect","handleWheel","element","useResizeObserver","ScrollbarProvider","composeEventHandlers"],"mappings":"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","x_google_ignoreList":[0]}