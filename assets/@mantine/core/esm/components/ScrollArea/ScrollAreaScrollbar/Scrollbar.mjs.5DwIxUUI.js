import{j as S}from"../../../../../../react/jsx-runtime.js.Cm6upDnr.js";import{r as n}from"../../../../../../react/index.js.IuPGg7Py.js";import{u as j}from"../ScrollArea.context.mjs.CA08sDaK.js";import{u as g}from"../use-resize-observer.mjs.CjqAHuRL.js";import{c as u}from"../utils/compose-event-handlers.mjs.HRUKSOxQ.js";import{S as z}from"./Scrollbar.context.mjs.BvoWS_Z4.js";import{u as I}from"../../../../../hooks/esm/use-merged-ref/use-merged-ref.mjs.D3CE6DNm.js";import{u as s}from"../../../../../hooks/esm/use-callback-ref/use-callback-ref.mjs.Ci0u9Xr0.js";import{u as M}from"../../../../../hooks/esm/use-debounced-callback/use-debounced-callback.mjs.BgJqcxXD.js";const J=n.forwardRef((l,R)=>{const{sizes:i,hasThumb:w,onThumbChange:C,onThumbPointerUp:x,onThumbPointerDown:T,onThumbPositionChange:y,onDragScroll:v,onWheelScroll:U,onResize:D,...m}=l,f=j(),[t,E]=n.useState(null),k=I(R,e=>E(e)),r=n.useRef(null),h=n.useRef(""),{viewport:W}=f,b=i.content-i.viewport,d=s(U),a=s(y),p=M(D,10),P=e=>{if(r.current){const o=e.clientX-r.current.left,c=e.clientY-r.current.top;v({x:o,y:c})}};return n.useEffect(()=>{const e=o=>{const c=o.target;(t==null?void 0:t.contains(c))&&d(o,b)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[W,t,b,d]),n.useEffect(a,[i,a]),g(t,p),g(f.content,p),S.jsx(z,{value:{scrollbar:t,hasThumb:w,onThumbChange:s(C),onThumbPointerUp:s(x),onThumbPositionChange:a,onThumbPointerDown:s(T)},children:S.jsx("div",{...m,ref:k,style:{position:"absolute",...m.style},onPointerDown:u(l.onPointerDown,e=>{e.button===0&&(e.target.setPointerCapture(e.pointerId),r.current=t.getBoundingClientRect(),h.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",P(e))}),onPointerMove:u(l.onPointerMove,P),onPointerUp:u(l.onPointerUp,e=>{const o=e.target;o.hasPointerCapture(e.pointerId)&&o.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=h.current,r.current=null})})})});export{J as S};
