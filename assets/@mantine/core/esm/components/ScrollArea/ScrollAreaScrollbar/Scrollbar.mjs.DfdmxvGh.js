import{r as u,R as r}from"../../../../../../react/index.js.CiILtb88.js";import{u as z}from"../ScrollArea.context.mjs.XmRc5ZyA.js";import{u as R}from"../use-resize-observer.mjs.Cvs0r9GV.js";import{c as m}from"../utils/compose-event-handlers.mjs.HRUKSOxQ.js";import{S as I}from"./Scrollbar.context.mjs.Cd1NgF-4.js";import{u as M}from"../../../../../hooks/esm/use-merged-ref/use-merged-ref.mjs.Cn2eK_Lp.js";import{u as s}from"../../../../../hooks/esm/use-callback-ref/use-callback-ref.mjs.BxiemeOB.js";import{u as L}from"../../../../../hooks/esm/use-debounced-callback/use-debounced-callback.mjs.C7ZMqlKw.js";const G=u.forwardRef((l,g)=>{const{sizes:i,hasThumb:w,onThumbChange:C,onThumbPointerUp:T,onThumbPointerDown:y,onThumbPositionChange:v,onDragScroll:E,onWheelScroll:U,onResize:D,...f}=l,h=z(),[t,k]=r.useState(null),x=M(g,e=>k(e)),n=r.useRef(null),b=r.useRef(""),{viewport:W}=h,d=i.content-i.viewport,p=s(U),a=s(v),P=L(D,10),S=e=>{if(n.current){const o=e.clientX-n.current.left,c=e.clientY-n.current.top;E({x:o,y:c})}};return u.useEffect(()=>{const e=o=>{const c=o.target;(t==null?void 0:t.contains(c))&&p(o,d)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[W,t,d,p]),u.useEffect(a,[i,a]),R(t,P),R(h.content,P),r.createElement(I,{value:{scrollbar:t,hasThumb:w,onThumbChange:s(C),onThumbPointerUp:s(T),onThumbPositionChange:a,onThumbPointerDown:s(y)}},r.createElement("div",{...f,ref:x,style:{position:"absolute",...f.style},onPointerDown:m(l.onPointerDown,e=>{e.button===0&&(e.target.setPointerCapture(e.pointerId),n.current=t.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",S(e))}),onPointerMove:m(l.onPointerMove,S),onPointerUp:m(l.onPointerUp,e=>{const o=e.target;o.hasPointerCapture(e.pointerId)&&o.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=b.current,n.current=null})}))});export{G as S};
