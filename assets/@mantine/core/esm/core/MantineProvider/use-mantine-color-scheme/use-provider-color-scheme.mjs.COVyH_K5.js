import{r as c}from"../../../../../../react/index.js.CiILtb88.js";import{u as v}from"../../../../../hooks/esm/use-isomorphic-effect/use-isomorphic-effect.mjs.p1ikljaD.js";function e(s,i){var t;const u=s!=="auto"?s:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(t=i())==null||t.setAttribute("data-mantine-color-scheme",u)}function x({manager:s,defaultColorScheme:i,getRootElement:u,forceColorScheme:t}){const b=c.useRef(),[n,d]=c.useState(()=>s.get(i)),p=t||n,f=c.useCallback(r=>{t||(e(r,u),d(r),s.set(r))},[s.set,p,t]),k=c.useCallback(()=>{d(i),e(i,u),s.clear()},[s.clear,i]);return c.useEffect(()=>(s.subscribe(f),s.unsubscribe),[s.subscribe,s.unsubscribe]),v(()=>{e(s.get(i),u)},[]),c.useEffect(()=>{var h;if(t)return e(t,u),()=>{};t===void 0&&e(n,u),b.current=window.matchMedia("(prefers-color-scheme: dark)");const r=a=>{n==="auto"&&e(a.matches?"dark":"light",u)};return(h=b.current)==null||h.addEventListener("change",r),()=>{var a;return(a=b.current)==null?void 0:a.removeEventListener("change",r)}},[n,t]),{colorScheme:p,setColorScheme:f,clearColorScheme:k}}export{x as u};
