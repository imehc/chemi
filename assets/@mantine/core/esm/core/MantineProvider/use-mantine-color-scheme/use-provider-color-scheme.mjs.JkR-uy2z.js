import{r as i}from"../../../../../../react/index.js.4247Uq6c.js";import{u as f}from"../../../../../hooks/esm/use-isomorphic-effect/use-isomorphic-effect.mjs.UowYAxrU.js";function c(s,e){var t;const r=s!=="auto"?s:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(t=e())==null||t.setAttribute("data-mantine-color-scheme",r)}function w({manager:s,defaultColorScheme:e,getRootElement:t,forceColorScheme:r}){const a=i.useRef(),[d,b]=i.useState(()=>s.get(e)),v=r||d,o=i.useCallback(u=>{r||(c(u,t),b(u),s.set(u))},[s.set,v,r]),p=i.useCallback(()=>{b(e),c(e,t),s.clear()},[s.clear,e]);return i.useEffect(()=>(s.subscribe(o),s.unsubscribe),[s.subscribe,s.unsubscribe]),f(()=>{c(s.get(e),t)},[]),i.useEffect(()=>{var u;if(r)return c(r,t),()=>{};a.current=window.matchMedia("(prefers-color-scheme: dark)");const l=n=>{d==="auto"&&c(n.matches?"dark":"light",t)};return(u=a.current)==null||u.addEventListener("change",l),()=>{var n;return(n=a.current)==null?void 0:n.removeEventListener("change",l)}},[d,r]),{colorScheme:v,setColorScheme:o,clearColorScheme:p}}export{w as u};
//# sourceMappingURL=use-provider-color-scheme.mjs.JkR-uy2z.js.map
