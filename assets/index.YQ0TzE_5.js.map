{"version":3,"file":"index.YQ0TzE_5.js","sources":["../../src/demo2/05/Arena.tsx","../../src/demo2/05/Tween.tsx","../../src/demo2/05/index.tsx"],"sourcesContent":["import { useGLTF } from '@react-three/drei';\nimport { useThree } from '@react-three/fiber';\nimport { Easing, Tween } from '@tweenjs/tween.js';\nimport { button, useControls } from 'leva';\nimport { GLTFResult } from '~/types/use_gltf';\nimport annotations from './annotations.json';\n\ninterface Props {\n  controls: any;\n}\n\nexport const Arena: React.FC<Props> = ({ controls }) => {\n  const { nodes, materials } = useGLTF(\n    '/models/collision-world.glb'\n  ) as GLTFResult;\n  const { camera } = useThree();\n\n  useControls('Camera', () => {\n    console.log('creating buttons');\n    const _buttons = annotations.reduce(\n      (acc, { title, position, lookAt }) =>\n        Object.assign(acc, {\n          [title]: button(() => {\n            new Tween(controls.current.target)\n              .to(\n                {\n                  x: lookAt.x,\n                  y: lookAt.y,\n                  z: lookAt.z,\n                },\n                2100\n              )\n              .easing(Easing.Cubic.Out)\n              .start();\n\n            new Tween(camera.position)\n              .to(\n                {\n                  x: position.x,\n                  y: position.y,\n                  z: position.z,\n                },\n                2100\n              )\n              .easing(Easing.Cubic.Out)\n              .start();\n          }),\n        }),\n      {}\n    );\n    return _buttons;\n  });\n\n  return (\n    <group dispose={null}>\n      <mesh\n        geometry={nodes.Cube004.geometry}\n        material={materials['Material.001']}\n        position={[7.68, -5.59, 26.38]}\n        scale={0.5}\n        castShadow\n        receiveShadow\n        material-envMapIntensity={0.4}\n        onDoubleClick={({ point }) => {\n          new Tween(controls.current.target)\n            .to(\n              {\n                x: point.x,\n                y: point.y,\n                z: point.z,\n              },\n              1000\n            )\n            .easing(Easing.Cubic.Out)\n            .start();\n        }}\n      ></mesh>\n    </group>\n  );\n};\n","import { useFrame } from '@react-three/fiber';\nimport { update } from '@tweenjs/tween.js';\n\nexport const Tween = () => {\n  useFrame(() => {\n    update();\n  });\n\n  return null;\n};\n","import { Environment, OrbitControls, Stats } from '@react-three/drei';\nimport { Canvas } from '@react-three/fiber';\nimport { useRef } from 'react';\nimport { Arena } from './Arena';\nimport { Tween } from './Tween';\n\n/**\n * 更改相机位置及其面向位置\n */\nconst Demo2v05 = () => {\n  const ref = useRef(null);\n  return (\n    <Canvas camera={{ position: [10, 10, 10] }} shadows>\n      <directionalLight\n        intensity={1}\n        castShadow={true}\n        shadow-bias={-0.0002}\n        shadow-mapSize={[2048, 2048]}\n        position={[85.0, 80.0, 70.0]}\n        shadow-camera-left={-30}\n        shadow-camera-right={30}\n        shadow-camera-top={30}\n        shadow-camera-bottom={-30}\n      />\n      <Environment\n        files=\"/imgs/drakensberg_solitary_mountain_1k.hdr\"\n        background\n      />\n      <OrbitControls ref={ref} target={[0, 1, 0]} />\n      <Arena controls={ref} />\n      <Tween />\n      <Stats />\n    </Canvas>\n  );\n};\n\nexport default Demo2v05;\n"],"names":["Arena","controls","nodes","materials","useGLTF","camera","useThree","useControls","annotations","acc","title","position","lookAt","button","Tween","Easing","jsx","point","useFrame","update","Demo2v05","ref","useRef","jsxs","Canvas","Environment","OrbitControls","Stats"],"mappings":"i4NAWaA,EAAyB,CAAC,CAAE,SAAAC,KAAe,CAChD,KAAA,CAAE,MAAAC,EAAO,UAAAC,CAAA,EAAcC,EAC3B,6BAAA,EAEI,CAAE,OAAAC,GAAWC,IAEnB,OAAAC,EAAY,SAAU,KACpB,QAAQ,IAAI,kBAAkB,EACbC,EAAY,OAC3B,CAACC,EAAK,CAAE,MAAAC,EAAO,SAAAC,EAAU,OAAAC,CAAO,IAC9B,OAAO,OAAOH,EAAK,CACjB,CAACC,CAAK,EAAGG,EAAO,IAAM,CACpB,IAAIC,EAAMb,EAAS,QAAQ,MAAM,EAC9B,GACC,CACE,EAAGW,EAAO,EACV,EAAGA,EAAO,EACV,EAAGA,EAAO,CACZ,EACA,IAAA,EAED,OAAOG,EAAO,MAAM,GAAG,EACvB,MAAM,EAEL,IAAAD,EAAMT,EAAO,QAAQ,EACtB,GACC,CACE,EAAGM,EAAS,EACZ,EAAGA,EAAS,EACZ,EAAGA,EAAS,CACd,EACA,IAAA,EAED,OAAOI,EAAO,MAAM,GAAG,EACvB,MAAM,CAAA,CACV,CAAA,CACF,EACH,CAAC,CAAA,EAGJ,EAGCC,EAAAA,IAAC,QAAM,CAAA,QAAS,KACd,SAAAA,EAAA,IAAC,OAAA,CACC,SAAUd,EAAM,QAAQ,SACxB,SAAUC,EAAU,cAAc,EAClC,SAAU,CAAC,KAAM,MAAO,KAAK,EAC7B,MAAO,GACP,WAAU,GACV,cAAa,GACb,2BAA0B,GAC1B,cAAe,CAAC,CAAE,MAAAc,KAAY,CAC5B,IAAIH,EAAMb,EAAS,QAAQ,MAAM,EAC9B,GACC,CACE,EAAGgB,EAAM,EACT,EAAGA,EAAM,EACT,EAAGA,EAAM,CACX,EACA,GAAA,EAED,OAAOF,EAAO,MAAM,GAAG,EACvB,MAAM,CACX,CAAA,CAEJ,CAAA,CAAA,CAEJ,EC5EaD,EAAQ,KACnBI,EAAS,IAAM,CACNC,GAAA,CACR,EAEM,MCCHC,GAAW,IAAM,CACf,MAAAC,EAAMC,SAAO,IAAI,EACvB,OACGC,EAAA,KAAAC,EAAA,CAAO,OAAQ,CAAE,SAAU,CAAC,GAAI,GAAI,EAAE,CAAA,EAAK,QAAO,GACjD,SAAA,CAAAR,EAAA,IAAC,mBAAA,CACC,UAAW,EACX,WAAY,GACZ,cAAa,MACb,iBAAgB,CAAC,KAAM,IAAI,EAC3B,SAAU,CAAC,GAAM,GAAM,EAAI,EAC3B,qBAAoB,IACpB,sBAAqB,GACrB,oBAAmB,GACnB,uBAAsB,GAAA,CACxB,EACAA,EAAA,IAACS,EAAA,CACC,MAAM,6CACN,WAAU,EAAA,CACZ,EACAT,MAACU,GAAc,IAAAL,EAAU,OAAQ,CAAC,EAAG,EAAG,CAAC,EAAG,EAC5CL,EAAAA,IAAChB,EAAM,CAAA,SAAUqB,CAAK,CAAA,QACrBP,EAAM,EAAA,QACNa,EAAM,EAAA,CACT,CAAA,CAAA,CAEJ"}