{"version":3,"file":"index.RnKAskAM.js","sources":["../../src/demo/23/Box.tsx","../../src/demo/23/Overlay.tsx","../../src/demo/23/useKeyboard.ts","../../src/demo/23/index.tsx"],"sourcesContent":["import { useEffect, useRef, useState } from 'react';\nimport { MeshProps, useFrame } from '@react-three/fiber';\nimport { useKeyboard } from './useKeyboard';\nimport { Mesh } from 'three';\n\ninterface Props extends MeshProps {\n  selected?: boolean;\n  keyMap: ReturnType<typeof useKeyboard>;\n}\n\nexport const Box: React.FC<Props> = ({\n  selected: _selected = false,\n  keyMap,\n  ...props\n}) => {\n  const ref = useRef<Mesh>(null);\n  const [selected, setSelected] = useState(_selected);\n\n  useFrame((_, delta) => {\n    if (!ref.current) return;\n    keyMap['KeyA'] && selected && (ref.current.position.x -= 1 * delta);\n    keyMap['KeyD'] && selected && (ref.current.position.x += 1 * delta);\n    keyMap['KeyW'] && selected && (ref.current.position.z -= 1 * delta);\n    keyMap['KeyS'] && selected && (ref.current.position.z += 1 * delta);\n  });\n\n  return (\n    <mesh\n      ref={ref}\n      {...props}\n      onPointerDown={(e) => {\n        e.stopPropagation();\n        setSelected(!selected);\n      }}\n    >\n      <boxGeometry />\n      <meshBasicMaterial color={0x00ff00} wireframe={!selected} />\n    </mesh>\n  );\n};\n","import './index.css';\n\nexport const Overlay = () => {\n  return (\n    <div id=\"instructions\">\n      Select one or more cubes,\n      <br />\n      then W,A,S,D to move.\n    </div>\n  );\n};\n","import { useEffect, useRef } from 'react';\n\nexport const useKeyboard = () => {\n  const keyMap = useRef<Record<string, unknown>>({});\n\n  useEffect(() => {\n    const onDocumentKey = (e: KeyboardEvent) => {\n      console.log('code: ', e.code);\n      keyMap.current[e.code] = e.type === 'keydown';\n    };\n    document.addEventListener('keydown', onDocumentKey);\n    document.addEventListener('keyup', onDocumentKey);\n\n    return () => {\n      document.removeEventListener('keydown', onDocumentKey);\n      document.removeEventListener('keyup', onDocumentKey);\n    };\n  });\n\n  return keyMap.current;\n};\n","import { OrbitControls, Stats } from '@react-three/drei';\nimport { Canvas } from '@react-three/fiber';\nimport { Box } from './Box';\nimport { Overlay } from './Overlay';\nimport { useKeyboard } from './useKeyboard';\n\nconst Demo23: React.FC = () => {\n  const keyMap = useKeyboard();\n\n  return (\n    <>\n      <Canvas camera={{ position: [1, 2, 3] }}>\n        <Box position={[-1.5, 0.5, 0]} keyMap={keyMap} />\n        <Box position={[0, 0.5, 0]} keyMap={keyMap} selected />\n        <Box position={[1.5, 0.5, 0]} keyMap={keyMap} />\n        <OrbitControls />\n        <axesHelper args={[5]} />\n        <gridHelper />\n        <Stats />\n      </Canvas>\n      <Overlay />\n    </>\n  );\n};\n\nexport default Demo23;\n"],"names":["Box","_selected","keyMap","props","ref","useRef","selected","setSelected","useState","useFrame","_","delta","jsxs","e","jsx","Overlay","useKeyboard","useEffect","onDocumentKey","Demo23","Fragment","Canvas","OrbitControls","Stats"],"mappings":"m0EAUO,MAAMA,EAAuB,CAAC,CACnC,SAAUC,EAAY,GACtB,OAAAC,EACA,GAAGC,CACL,IAAM,CACE,MAAAC,EAAMC,SAAa,IAAI,EACvB,CAACC,EAAUC,CAAW,EAAIC,WAASP,CAAS,EAEzC,OAAAQ,EAAA,CAACC,EAAGC,IAAU,CAChBP,EAAI,UACTF,EAAO,MAAWI,IAAaF,EAAI,QAAQ,SAAS,GAAK,EAAIO,GAC7DT,EAAO,MAAWI,IAAaF,EAAI,QAAQ,SAAS,GAAK,EAAIO,GAC7DT,EAAO,MAAWI,IAAaF,EAAI,QAAQ,SAAS,GAAK,EAAIO,GAC7DT,EAAO,MAAWI,IAAaF,EAAI,QAAQ,SAAS,GAAK,EAAIO,GAAA,CAC9D,EAGCC,EAAA,KAAC,OAAA,CACC,IAAAR,EACC,GAAGD,EACJ,cAAgBU,GAAM,CACpBA,EAAE,gBAAgB,EAClBN,EAAY,CAACD,CAAQ,CACvB,EAEA,SAAA,CAAAQ,EAAA,IAAC,cAAY,EAAA,QACZ,oBAAkB,CAAA,MAAO,MAAU,UAAW,CAACR,EAAU,CAAA,CAAA,CAAA,CAGhE,ECrCaS,EAAU,IAEnBH,EAAA,KAAC,MAAI,CAAA,GAAG,eAAe,SAAA,CAAA,kCAEpB,KAAG,EAAA,EAAE,uBAER,CAAA,CAAA,ECNSI,EAAc,IAAM,CACzB,MAAAd,EAASG,SAAgC,CAAA,CAAE,EAEjDY,OAAAA,EAAAA,UAAU,IAAM,CACR,MAAAC,EAAiBL,GAAqB,CAClC,QAAA,IAAI,SAAUA,EAAE,IAAI,EAC5BX,EAAO,QAAQW,EAAE,IAAI,EAAIA,EAAE,OAAS,SAAA,EAE7B,gBAAA,iBAAiB,UAAWK,CAAa,EACzC,SAAA,iBAAiB,QAASA,CAAa,EAEzC,IAAM,CACF,SAAA,oBAAoB,UAAWA,CAAa,EAC5C,SAAA,oBAAoB,QAASA,CAAa,CAAA,CACrD,CACD,EAEMhB,EAAO,OAChB,ECdMiB,GAAmB,IAAM,CAC7B,MAAMjB,EAASc,IAEf,OAEIJ,EAAA,KAAAQ,WAAA,CAAA,SAAA,CAACR,EAAAA,KAAAS,EAAA,CAAO,OAAQ,CAAE,SAAU,CAAC,EAAG,EAAG,CAAC,CAClC,EAAA,SAAA,CAAAP,MAACd,GAAI,SAAU,CAAC,KAAM,GAAK,CAAC,EAAG,OAAAE,EAAgB,EAC/CY,EAAAA,IAACd,EAAI,CAAA,SAAU,CAAC,EAAG,GAAK,CAAC,EAAG,OAAAE,EAAgB,SAAQ,EAAC,CAAA,EACrDY,MAACd,GAAI,SAAU,CAAC,IAAK,GAAK,CAAC,EAAG,OAAAE,EAAgB,QAC7CoB,EAAc,EAAA,EACdR,EAAAA,IAAA,aAAA,CAAW,KAAM,CAAC,CAAC,CAAG,CAAA,QACtB,aAAW,EAAA,QACXS,EAAM,EAAA,CAAA,EACT,QACCR,EAAQ,EAAA,CACX,CAAA,CAAA,CAEJ"}