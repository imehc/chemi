import{j as t}from"./react/jsx-runtime.js.CKQaLlsx.js";import{C as c}from"./@react-three/fiber/dist/react-three-fiber.esm.js.BhmFp2tL.js";import{r as m}from"./react/index.js.CiILtb88.js";import{m as u,V as l}from"./three/build/three.module.js.CElijN_X.js";import{G as f}from"./three/examples/jsm/loaders/GLTFLoader.js.vvLcshIk.js";import{F as d}from"./@mantine/core/esm/components/FileButton/FileButton.mjs.kesQ7HU1.js";import{B as x}from"./@mantine/core/esm/components/Button/Button.mjs.BhBMjiuX.js";import{S as h}from"./@react-three/drei/core/Sky.js.KmRT0mMW.js";import{H as j}from"./@react-three/drei/web/Html.js.NR7P4Ita.js";import{g,u as w}from"./@react-three/fiber/dist/index-c636ef6d.esm.js.DtZMtc8k.js";import{O as b}from"./@react-three/drei/core/OrbitControls.js.D__SJNvq.js";import"./react/jsx-runtime.js_commonjs-module.DrftVG1b.js";import"./react/cjs/react-jsx-runtime.production.min.js.B2-g250g.js";import"./react/cjs/react-jsx-runtime.production.min.js_commonjs-exports.Y3wesJj2.js";import"./@babel/runtime/helpers/esm/extends.js.CCbyfPlC.js";import"./react-use-measure/dist/web.js.BtTOEvoD.js";import"./debounce/index.js.Chx8E-gf.js";import"./@theatre/core/dist/index.js.DAEYzC0v.js";import"./@theatre/core/dist/index.js_commonjs-module.BBQovQhv.js";import"./@theatre/dataverse/dist/index.js.BWL7Twl0.js";import"./@theatre/dataverse/dist/index.js_commonjs-exports.CmPFFxNR.js";import"./its-fine/dist/index.js.DP1ChiJo.js";import"./react-reconciler/constants.js.cziiqKC3.js";import"./react-reconciler/constants.js_commonjs-module.BUUaCVL8.js";import"./react-reconciler/cjs/react-reconciler-constants.production.min.js.BLy92Rht.js";import"./react-reconciler/cjs/react-reconciler-constants.production.min.js_commonjs-exports.Y3wesJj2.js";import"./react-reconciler/index.js.eAUoQ0l6.js";import"./react-reconciler/index.js_commonjs-module.DhgsKDqp.js";import"./react-reconciler/cjs/react-reconciler.production.min.js.Bhz7NQsG.js";import"./scheduler/index.js.DPKlw4YW.js";import"./scheduler/index.js_commonjs-module.IyF5mD2q.js";import"./scheduler/cjs/scheduler.production.min.js.BiBLb9Ep.js";import"./scheduler/cjs/scheduler.production.min.js_commonjs-exports.vhg0vpYA.js";import"./react/index.js_commonjs-module.DhgsKDqp.js";import"./react/cjs/react.production.min.js.BuctLETp.js";import"./react/cjs/react.production.min.js_commonjs-exports.Y3wesJj2.js";import"./three/examples/jsm/utils/BufferGeometryUtils.js.DjB_8Yzn.js";import"./@mantine/core/esm/core/MantineProvider/use-props/use-props.mjs.DV5d7PVT.js";import"./@mantine/core/esm/core/utils/filter-props/filter-props.mjs.DgbN-LSt.js";import"./@mantine/core/esm/core/MantineProvider/MantineThemeProvider/MantineThemeProvider.mjs.B-l97vt9.js";import"./@mantine/core/esm/core/MantineProvider/default-theme.mjs.DAwv4HTs.js";import"./@mantine/core/esm/core/utils/units-converters/rem.mjs.C4381Hil.js";import"./@mantine/core/esm/core/MantineProvider/color-functions/default-variant-colors-resolver/default-variant-colors-resolver.mjs.MiIzhoft.js";import"./@mantine/core/esm/core/MantineProvider/color-functions/darken/darken.mjs.DnTPCeWV.js";import"./@mantine/core/esm/core/MantineProvider/color-functions/to-rgba/to-rgba.mjs.Dj1cs63r.js";import"./@mantine/core/esm/core/MantineProvider/color-functions/get-gradient/get-gradient.mjs.BkGAWj8o.js";import"./@mantine/core/esm/core/MantineProvider/color-functions/get-theme-color/get-theme-color.mjs.D6X7-U-t.js";import"./@mantine/core/esm/core/MantineProvider/color-functions/parse-theme-color/parse-theme-color.mjs.6r2l6-t0.js";import"./@mantine/core/esm/core/MantineProvider/color-functions/get-primary-shade/get-primary-shade.mjs.BT34rltv.js";import"./@mantine/core/esm/core/MantineProvider/color-functions/luminance/luminance.mjs.DEs9d8Ge.js";import"./@mantine/core/esm/core/MantineProvider/color-functions/rgba/rgba.mjs.BzaxkAWp.js";import"./@mantine/core/esm/core/MantineProvider/default-colors.mjs.BxmwQtie.js";import"./@mantine/core/esm/core/MantineProvider/merge-mantine-theme/merge-mantine-theme.mjs.CwieW9_9.js";import"./@mantine/core/esm/core/utils/deep-merge/deep-merge.mjs.VM1LrXZc.js";import"./@mantine/hooks/esm/use-merged-ref/use-merged-ref.mjs.Cn2eK_Lp.js";import"./@mantine/core/esm/core/utils/get-size/get-size.mjs.B1EFdN51.js";import"./@mantine/core/esm/core/utils/is-number-like/is-number-like.mjs.BeYmabCi.js";import"./@mantine/core/esm/core/styles-api/create-vars-resolver/create-vars-resolver.mjs.BkjTnGuP.js";import"./@mantine/core/esm/core/styles-api/use-styles/use-styles.mjs.BYmH-OWY.js";import"./@mantine/core/esm/core/MantineProvider/Mantine.context.mjs.qWyfdaQf.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-class-name/get-class-name.mjs.BAUmxLp_.js";import"./clsx/dist/clsx.mjs.B-dksMZM.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-class-name/get-global-class-names/get-global-class-names.mjs.2On0w0FQ.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-class-name/get-options-class-names/get-options-class-names.mjs.aU0XBM3c.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-class-name/resolve-class-names/resolve-class-names.mjs.JktKmBsT.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-class-name/get-resolved-class-names/get-resolved-class-names.mjs.BpywiirN.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-class-name/get-root-class-name/get-root-class-name.mjs.BU4AdQqA.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-class-name/get-selector-class-name/get-selector-class-name.mjs.Dph5IRsQ.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-class-name/get-static-class-names/get-static-class-names.mjs.msKG441_.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-class-name/get-theme-class-names/get-theme-class-names.mjs.Cab0-wCp.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-class-name/get-variant-class-name/get-variant-class-name.mjs.s-pjaDyR.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-style/get-style.mjs.IrLNkCeu.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-style/get-theme-styles/get-theme-styles.mjs.BbxnTk1I.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-style/resolve-styles/resolve-styles.mjs.BK6pl5Id.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-style/resolve-style/resolve-style.mjs.B2bBkNYf.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-style/resolve-vars/resolve-vars.mjs.BlPDqYFS.js";import"./@mantine/core/esm/core/styles-api/use-styles/get-style/resolve-vars/merge-vars.mjs.CEucNT0d.js";import"./@mantine/core/esm/core/Box/Box.mjs.JSl7ybp_.js";import"./@mantine/core/esm/core/factory/create-polymorphic-component.mjs.gPQ06cEU.js";import"./@mantine/core/esm/core/InlineStyles/InlineStyles.mjs.CFDusxcc.js";import"./@mantine/core/esm/core/InlineStyles/styles-to-string/styles-to-string.mjs.PpCa9DLh.js";import"./@mantine/core/esm/core/InlineStyles/css-object-to-string/css-object-to-string.mjs.B9fKgB9A.js";import"./@mantine/core/esm/core/utils/keys/keys.mjs.HiGXOwLp.js";import"./@mantine/core/esm/core/utils/camel-to-kebab-case/camel-to-kebab-case.mjs.CCVVwPe_.js";import"./@mantine/core/esm/core/Box/get-box-mod/get-box-mod.mjs.BDYhQ2X4.js";import"./@mantine/core/esm/core/Box/get-box-style/get-box-style.mjs.BG2n9q_o.js";import"./@mantine/core/esm/core/Box/style-props/extract-style-props/extract-style-props.mjs.Dk0CQZU5.js";import"./@mantine/core/esm/core/Box/style-props/style-props-data.mjs.dMvw3jAZ.js";import"./@mantine/core/esm/core/Box/style-props/parse-style-props/parse-style-props.mjs.DYtK8CLn.js";import"./@mantine/core/esm/core/Box/style-props/resolvers/index.mjs.DpXkc-nj.js";import"./@mantine/core/esm/core/Box/style-props/resolvers/color-resolver/color-resolver.mjs.DHGj4EkB.js";import"./@mantine/core/esm/core/Box/style-props/resolvers/font-family-resolver/font-family-resolver.mjs.X4El5QHn.js";import"./@mantine/core/esm/core/Box/style-props/resolvers/font-size-resolver/font-size-resolver.mjs.UJPg3PCU.js";import"./@mantine/core/esm/core/Box/style-props/resolvers/identity-resolver/identity-resolver.mjs.C82aAysl.js";import"./@mantine/core/esm/core/Box/style-props/resolvers/line-height-resolver/line-height-resolver.mjs.BGPyEj3w.js";import"./@mantine/core/esm/core/Box/style-props/resolvers/size-resolver/size-resolver.mjs.CioT2uG5.js";import"./@mantine/core/esm/core/Box/style-props/resolvers/spacing-resolver/spacing-resolver.mjs.BUGGPcVN.js";import"./@mantine/core/esm/core/Box/style-props/parse-style-props/sort-media-queries.mjs.DxKN08Rt.js";import"./@mantine/core/esm/core/Box/use-random-classname/use-random-classname.mjs.C7ZaHTPC.js";import"./@mantine/core/esm/core/factory/polymorphic-factory.mjs.B82E-ECz.js";import"./@mantine/core/esm/core/factory/factory.mjs.9GBOrA3L.js";import"./@mantine/core/esm/components/Loader/Loader.mjs.BGh_znZv.js";import"./@mantine/core/esm/components/Loader/loaders/Bars.mjs.BCDX8vHo.js";import"./@mantine/core/esm/components/Loader/Loader.module.css.mjs.B682ZTPg.js";import"./@mantine/core/esm/components/Loader/loaders/Dots.mjs.DyN_1vJ8.js";import"./@mantine/core/esm/components/Loader/loaders/Oval.mjs.C-WUYhdJ.js";import"./@mantine/core/esm/components/Transition/Transition.mjs.BUPVTGG1.js";import"./@mantine/core/esm/components/Transition/get-transition-styles/get-transition-styles.mjs.Cusx41MO.js";import"./@mantine/core/esm/components/Transition/transitions.mjs.CKIPLuIR.js";import"./@mantine/core/esm/components/Transition/use-transition.mjs.DKV6rV6r.js";import"./react-dom/index.js.LUY0HZwr.js";import"./react-dom/index.js_commonjs-module.DhgsKDqp.js";import"./react-dom/cjs/react-dom.production.min.js.BmC9xWZM.js";import"./react-dom/cjs/react-dom.production.min.js_commonjs-exports.Y3wesJj2.js";import"./@mantine/hooks/esm/use-reduced-motion/use-reduced-motion.mjs.D8l8oBu-.js";import"./@mantine/hooks/esm/use-media-query/use-media-query.mjs.BeWmaoH9.js";import"./@mantine/hooks/esm/use-did-update/use-did-update.mjs.BfsHUBsg.js";import"./@mantine/core/esm/components/UnstyledButton/UnstyledButton.mjs.DmpZ_eZm.js";import"./@mantine/core/esm/components/UnstyledButton/UnstyledButton.module.css.mjs.DAaS_h3t.js";import"./@mantine/core/esm/components/Button/ButtonGroup/ButtonGroup.mjs.DRTgP1rS.js";import"./@mantine/core/esm/components/Button/Button.module.css.mjs.C78j5JaW.js";import"./three-stdlib/objects/Sky.js.Cn4Zkdvu.js";import"./three-stdlib/_polyfill/constants.js.BLpHHQtt.js";import"./react-dom/client.js.DkBBvx-c.js";import"./react-dom/client.js_commonjs-exports.CmYd1H8K.js";import"./zustand/esm/index.js.BKqfLw1g.js";import"./suspend-react/index.js.BKIKQNXN.js";import"./three-stdlib/controls/OrbitControls.js.BAPwlu3z.js";const qr=()=>{const[o,p]=m.useState(),e=r=>{if(!r)throw new Error("未选择文件");p(window.URL.createObjectURL(r))};return t.jsxs("div",{className:"h-full relative w-full",children:[t.jsx("div",{className:"absolute left-2 top-2 z-10",children:t.jsx(d,{onChange:e,accept:"model/gltf-binary,.glb,.gltf",children:r=>t.jsx(x,{...r,children:"Upload image"})})}),t.jsx(v,{url:o})]})},v=o=>t.jsxs(c,{className:"h-full w-full",children:[t.jsx(h,{}),t.jsx(m.Suspense,{fallback:t.jsx(j,{className:"flex flex-col h-full items-center justify-center w-full",children:t.jsx("p",{className:"text-lg whitespace-nowrap",children:"加载中..."})}),children:o.url&&t.jsx(M,{url:o.url})})]}),M=({url:o})=>{const{scene:p}=g(f,o,a=>{}),{camera:e}=w(),r=m.useRef(null),s=m.useMemo(()=>new u().setFromObject(p),[p]),i=m.useMemo(()=>new l().copy(s.getCenter(new l)),[s]);return m.useEffect(()=>{if(!r.current)return;const n=s.getSize(new l).length()/Math.tan(Math.PI/180*e.fov*.5);r.current.target.copy(i),r.current.object.position.set(i.x,i.y,i.z+n),r.current.update()},[s,e,i]),t.jsx("primitive",{object:p,children:t.jsx(b,{ref:r,target:i,enableDamping:!0,dampingFactor:.1})})};export{qr as SelectModel,qr as default};
