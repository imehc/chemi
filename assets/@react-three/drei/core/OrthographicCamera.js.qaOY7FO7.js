import{_ as b}from"../../../@babel/runtime/helpers/esm/extends.js.dGVwEr9R.js";import{r}from"../../../react/index.js.4247Uq6c.js";import{m as x}from"../../../react-merge-refs/dist/react-merge-refs.esm.js.hAbx5P3g.js";import{u as y}from"./useFBO.js.j-YEPsMp.js";import{u as f,a as F}from"../../fiber/dist/index-db8af450.esm.js.7UbIKsuw.js";const w=o=>typeof o=="function",k=r.forwardRef(({envMap:o,resolution:h=256,frames:m=1/0,children:c,makeDefault:l,...u},E)=>{const a=f(({set:e})=>e),R=f(({camera:e})=>e),n=f(({size:e})=>e),t=r.useRef(null),i=r.useRef(null),g=y(h);r.useLayoutEffect(()=>{u.manual||t.current.updateProjectionMatrix()},[n,u]),r.useLayoutEffect(()=>{t.current.updateProjectionMatrix()}),r.useLayoutEffect(()=>{if(l){const e=R;return a(()=>({camera:t.current})),()=>a(()=>({camera:e}))}},[t,l,a]);let d=0,p=null;const s=w(c);return F(e=>{s&&(m===1/0||d<m)&&(i.current.visible=!1,e.gl.setRenderTarget(g),p=e.scene.background,o&&(e.scene.background=o),e.gl.render(e.scene,t.current),e.scene.background=p,e.gl.setRenderTarget(null),i.current.visible=!0,d++)}),r.createElement(r.Fragment,null,r.createElement("orthographicCamera",b({left:n.width/-2,right:n.width/2,top:n.height/2,bottom:n.height/-2,ref:x([t,E])},u),!s&&c),r.createElement("group",{ref:i},s&&c(g.texture)))});export{k as O};
//# sourceMappingURL=OrthographicCamera.js.qaOY7FO7.js.map
