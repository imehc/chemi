import{_ as y}from"../../../@babel/runtime/helpers/esm/extends.js.CF3RwP-h.js";import{r as e}from"../../../react/index.js.IuPGg7Py.js";import{T as h,p as v}from"../../../troika-three-text/dist/troika-three-text.esm.js.Cuhh0Q_O.js";import{s as w}from"../../../suspend-react/index.js.BKIKQNXN.js";import{u as b}from"../../fiber/dist/index-ba8afaa4.esm.js.CC8UC62r.js";const g=e.forwardRef(({sdfGlyphSize:m=64,anchorX:p="center",anchorY:u="middle",font:s,fontSize:c=1,children:n,characters:a,onSync:f,...d},x)=>{const E=b(({invalidate:t})=>t),[r]=e.useState(()=>new h),[T,l]=e.useMemo(()=>{const t=[];let i="";return e.Children.forEach(n,o=>{typeof o=="string"||typeof o=="number"?i+=o:t.push(o)}),[t,i]},[n]);return w(()=>new Promise(t=>v({font:s,characters:a},t)),["troika-text",s,a]),e.useLayoutEffect(()=>void r.sync(()=>{E(),f&&f(r)})),e.useEffect(()=>()=>r.dispose(),[r]),e.createElement("primitive",y({object:r,ref:x,font:s,text:l,anchorX:p,anchorY:u,fontSize:c,sdfGlyphSize:m},d),T)});export{g as T};
