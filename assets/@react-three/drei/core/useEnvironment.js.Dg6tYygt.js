import{v as j,E as w,u as x}from"../../../three/build/three.module.js.CElijN_X.js";import{R}from"../../../three-stdlib/loaders/RGBELoader.js.CwYx4r1q.js";import{E as v}from"../../../three-stdlib/loaders/EXRLoader.js.DZcE1kcB.js";import{H as L,G as y}from"../../../@monogrid/gainmap-js/dist/decode.js.BVWvm-ss.js";import{p as d}from"../helpers/environment-assets.js.Cl7hcwyA.js";import{s as G,L as C}from"../helpers/deprecated.js.DPxl23Y9.js";import{u as P,g as A}from"../../fiber/dist/index-c636ef6d.esm.js.DtZMtc8k.js";const M="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",i=r=>Array.isArray(r);function S({files:r=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:m="",preset:u=void 0,encoding:a=void 0,extensions:c}={}){var o;let l=null,g=!1,t;if(u){if(!(u in d))throw new Error("Preset must be one of: "+Object.keys(d).join(", "));r=d[u],m=M}const p=i(r)&&r.length===6,f=i(r)&&r.length===3&&r.some(e=>e.endsWith("json")),s=i(r)?r[0]:r;if(g=i(r),t=p?"cube":f?"webp":s.startsWith("data:application/exr")?"exr":s.startsWith("data:application/hdr")?"hdr":s.startsWith("data:image/jpeg")?"jpg":(o=s.split(".").pop())==null||(o=o.split("?"))==null||(o=o.shift())==null?void 0:o.toLowerCase(),l=t==="cube"?x:t==="hdr"?R:t==="exr"?v:t==="jpg"||t==="jpeg"?L:t==="webp"?y:null,!l)throw new Error("useEnvironment: Unrecognized file extension: "+r);const E=P(e=>e.gl),b=A(l,g?[r]:r,e=>{(t==="webp"||t==="jpg"||t==="jpeg")&&e.setRenderer(E),e.setPath==null||e.setPath(m),c&&c(e)});let n=g?b[0]:b;if(t==="jpg"||t==="jpeg"||t==="webp"){var h;n=(h=n.renderTarget)==null?void 0:h.texture}return n.mapping=p?j:w,"colorSpace"in n?n.colorSpace=a??p?"srgb":"srgb-linear":n.encoding=a??p?G:C,n}export{S as u};
