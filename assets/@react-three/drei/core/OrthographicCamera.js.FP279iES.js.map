{"version":3,"file":"OrthographicCamera.js.FP279iES.js","sources":["../../../../../node_modules/.pnpm/@react-three+drei@9.88.17_@react-three+fiber@8.15.11_@types+three@0.158.3_react-dom@18.2.0_react@18.2.0_three@0.158.0/node_modules/@react-three/drei/core/OrthographicCamera.js"],"sourcesContent":["import _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport { useThree, useFrame } from '@react-three/fiber';\nimport mergeRefs from 'react-merge-refs';\nimport { useFBO } from './useFBO.js';\n\nconst isFunction = node => typeof node === 'function';\nconst OrthographicCamera = /* @__PURE__ */React.forwardRef(({\n  envMap,\n  resolution = 256,\n  frames = Infinity,\n  children,\n  makeDefault,\n  ...props\n}, ref) => {\n  const set = useThree(({\n    set\n  }) => set);\n  const camera = useThree(({\n    camera\n  }) => camera);\n  const size = useThree(({\n    size\n  }) => size);\n  const cameraRef = React.useRef(null);\n  const groupRef = React.useRef(null);\n  const fbo = useFBO(resolution);\n  React.useLayoutEffect(() => {\n    if (!props.manual) {\n      cameraRef.current.updateProjectionMatrix();\n    }\n  }, [size, props]);\n  React.useLayoutEffect(() => {\n    cameraRef.current.updateProjectionMatrix();\n  });\n  React.useLayoutEffect(() => {\n    if (makeDefault) {\n      const oldCam = camera;\n      set(() => ({\n        camera: cameraRef.current\n      }));\n      return () => set(() => ({\n        camera: oldCam\n      }));\n    }\n    // The camera should not be part of the dependency list because this components camera is a stable reference\n    // that must exchange the default, and clean up after itself on unmount.\n  }, [cameraRef, makeDefault, set]);\n  let count = 0;\n  let oldEnvMap = null;\n  const functional = isFunction(children);\n  useFrame(state => {\n    if (functional && (frames === Infinity || count < frames)) {\n      groupRef.current.visible = false;\n      state.gl.setRenderTarget(fbo);\n      oldEnvMap = state.scene.background;\n      if (envMap) state.scene.background = envMap;\n      state.gl.render(state.scene, cameraRef.current);\n      state.scene.background = oldEnvMap;\n      state.gl.setRenderTarget(null);\n      groupRef.current.visible = true;\n      count++;\n    }\n  });\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"orthographicCamera\", _extends({\n    left: size.width / -2,\n    right: size.width / 2,\n    top: size.height / 2,\n    bottom: size.height / -2,\n    ref: mergeRefs([cameraRef, ref])\n  }, props), !functional && children), /*#__PURE__*/React.createElement(\"group\", {\n    ref: groupRef\n  }, functional && children(fbo.texture)));\n});\n\nexport { OrthographicCamera };\n"],"names":["isFunction","node","OrthographicCamera","React.forwardRef","envMap","resolution","frames","children","makeDefault","props","ref","set","useThree","camera","size","cameraRef","React.useRef","groupRef","fbo","useFBO","React.useLayoutEffect","oldCam","count","oldEnvMap","functional","useFrame","state","React.createElement","React.Fragment","_extends","mergeRefs"],"mappings":"mVAMA,MAAMA,EAAaC,GAAQ,OAAOA,GAAS,WACrCC,EAAoCC,EAAgB,WAAC,CAAC,CAC1D,OAAAC,EACA,WAAAC,EAAa,IACb,OAAAC,EAAS,IACT,SAAAC,EACA,YAAAC,EACA,GAAGC,CACL,EAAGC,IAAQ,CACT,MAAMC,EAAMC,EAAS,CAAC,CACpB,IAAAD,CACD,IAAKA,CAAG,EACHE,EAASD,EAAS,CAAC,CACvB,OAAAC,CACD,IAAKA,CAAM,EACNC,EAAOF,EAAS,CAAC,CACrB,KAAAE,CACD,IAAKA,CAAI,EACJC,EAAYC,SAAa,IAAI,EAC7BC,EAAWD,SAAa,IAAI,EAC5BE,EAAMC,EAAOd,CAAU,EAC7Be,EAAAA,gBAAsB,IAAM,CACrBX,EAAM,QACTM,EAAU,QAAQ,wBAExB,EAAK,CAACD,EAAML,CAAK,CAAC,EAChBW,EAAAA,gBAAsB,IAAM,CAC1BL,EAAU,QAAQ,wBACtB,CAAG,EACDK,EAAAA,gBAAsB,IAAM,CAC1B,GAAIZ,EAAa,CACf,MAAMa,EAASR,EACf,OAAAF,EAAI,KAAO,CACT,OAAQI,EAAU,OACnB,EAAC,EACK,IAAMJ,EAAI,KAAO,CACtB,OAAQU,CACT,EAAC,CACH,CAGF,EAAE,CAACN,EAAWP,EAAaG,CAAG,CAAC,EAChC,IAAIW,EAAQ,EACRC,EAAY,KAChB,MAAMC,EAAaxB,EAAWO,CAAQ,EACtC,OAAAkB,EAASC,GAAS,CACZF,IAAelB,IAAW,KAAYgB,EAAQhB,KAChDW,EAAS,QAAQ,QAAU,GAC3BS,EAAM,GAAG,gBAAgBR,CAAG,EAC5BK,EAAYG,EAAM,MAAM,WACpBtB,IAAQsB,EAAM,MAAM,WAAatB,GACrCsB,EAAM,GAAG,OAAOA,EAAM,MAAOX,EAAU,OAAO,EAC9CW,EAAM,MAAM,WAAaH,EACzBG,EAAM,GAAG,gBAAgB,IAAI,EAC7BT,EAAS,QAAQ,QAAU,GAC3BK,IAEN,CAAG,EACmBK,EAAAA,cAAoBC,EAAAA,SAAgB,KAAmBD,EAAAA,cAAoB,qBAAsBE,EAAS,CAC5H,KAAMf,EAAK,MAAQ,GACnB,MAAOA,EAAK,MAAQ,EACpB,IAAKA,EAAK,OAAS,EACnB,OAAQA,EAAK,OAAS,GACtB,IAAKgB,EAAU,CAACf,EAAWL,CAAG,CAAC,CACnC,EAAKD,CAAK,EAAG,CAACe,GAAcjB,CAAQ,EAAgBoB,EAAmB,cAAC,QAAS,CAC7E,IAAKV,CACN,EAAEO,GAAcjB,EAASW,EAAI,OAAO,CAAC,CAAC,CACzC,CAAC","x_google_ignoreList":[0]}