{"version":3,"file":"index.js.QyAqcXqM.js","sources":["../../../../../node_modules/.pnpm/@theatre+dataverse@0.7.0/node_modules/@theatre/dataverse/dist/index.js"],"sourcesContent":["var __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __markAsModule = (target) => __defProp(target, \"__esModule\", { value: true });\nvar __export = (target, all) => {\n  __markAsModule(target);\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\n\n// src/index.ts\n__export(exports, {\n  Atom: () => Atom,\n  PointerProxy: () => PointerProxy,\n  Ticker: () => Ticker,\n  getPointerParts: () => getPointerParts,\n  isPointer: () => isPointer,\n  isPrism: () => isPrism,\n  iterateAndCountTicks: () => iterateAndCountTicks,\n  iterateOver: () => iterateOver,\n  pointer: () => pointer_default,\n  pointerToPrism: () => pointerToPrism,\n  prism: () => prism_default,\n  val: () => val\n});\n\n// ../../node_modules/lodash-es/isArray.js\nvar isArray = Array.isArray;\nvar isArray_default = isArray;\n\n// ../../node_modules/lodash-es/_freeGlobal.js\nvar freeGlobal = typeof global == \"object\" && global && global.Object === Object && global;\nvar freeGlobal_default = freeGlobal;\n\n// ../../node_modules/lodash-es/_root.js\nvar freeSelf = typeof self == \"object\" && self && self.Object === Object && self;\nvar root = freeGlobal_default || freeSelf || Function(\"return this\")();\nvar root_default = root;\n\n// ../../node_modules/lodash-es/_Symbol.js\nvar Symbol2 = root_default.Symbol;\nvar Symbol_default = Symbol2;\n\n// ../../node_modules/lodash-es/_getRawTag.js\nvar objectProto = Object.prototype;\nvar hasOwnProperty = objectProto.hasOwnProperty;\nvar nativeObjectToString = objectProto.toString;\nvar symToStringTag = Symbol_default ? Symbol_default.toStringTag : void 0;\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag), tag = value[symToStringTag];\n  try {\n    value[symToStringTag] = void 0;\n    var unmasked = true;\n  } catch (e) {\n  }\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\nvar getRawTag_default = getRawTag;\n\n// ../../node_modules/lodash-es/_objectToString.js\nvar objectProto2 = Object.prototype;\nvar nativeObjectToString2 = objectProto2.toString;\nfunction objectToString(value) {\n  return nativeObjectToString2.call(value);\n}\nvar objectToString_default = objectToString;\n\n// ../../node_modules/lodash-es/_baseGetTag.js\nvar nullTag = \"[object Null]\";\nvar undefinedTag = \"[object Undefined]\";\nvar symToStringTag2 = Symbol_default ? Symbol_default.toStringTag : void 0;\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === void 0 ? undefinedTag : nullTag;\n  }\n  return symToStringTag2 && symToStringTag2 in Object(value) ? getRawTag_default(value) : objectToString_default(value);\n}\nvar baseGetTag_default = baseGetTag;\n\n// ../../node_modules/lodash-es/isObjectLike.js\nfunction isObjectLike(value) {\n  return value != null && typeof value == \"object\";\n}\nvar isObjectLike_default = isObjectLike;\n\n// ../../node_modules/lodash-es/isSymbol.js\nvar symbolTag = \"[object Symbol]\";\nfunction isSymbol(value) {\n  return typeof value == \"symbol\" || isObjectLike_default(value) && baseGetTag_default(value) == symbolTag;\n}\nvar isSymbol_default = isSymbol;\n\n// ../../node_modules/lodash-es/_isKey.js\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/;\nvar reIsPlainProp = /^\\w*$/;\nfunction isKey(value, object) {\n  if (isArray_default(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == \"number\" || type == \"symbol\" || type == \"boolean\" || value == null || isSymbol_default(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) || object != null && value in Object(object);\n}\nvar isKey_default = isKey;\n\n// ../../node_modules/lodash-es/isObject.js\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == \"object\" || type == \"function\");\n}\nvar isObject_default = isObject;\n\n// ../../node_modules/lodash-es/isFunction.js\nvar asyncTag = \"[object AsyncFunction]\";\nvar funcTag = \"[object Function]\";\nvar genTag = \"[object GeneratorFunction]\";\nvar proxyTag = \"[object Proxy]\";\nfunction isFunction(value) {\n  if (!isObject_default(value)) {\n    return false;\n  }\n  var tag = baseGetTag_default(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\nvar isFunction_default = isFunction;\n\n// ../../node_modules/lodash-es/_coreJsData.js\nvar coreJsData = root_default[\"__core-js_shared__\"];\nvar coreJsData_default = coreJsData;\n\n// ../../node_modules/lodash-es/_isMasked.js\nvar maskSrcKey = function() {\n  var uid = /[^.]+$/.exec(coreJsData_default && coreJsData_default.keys && coreJsData_default.keys.IE_PROTO || \"\");\n  return uid ? \"Symbol(src)_1.\" + uid : \"\";\n}();\nfunction isMasked(func) {\n  return !!maskSrcKey && maskSrcKey in func;\n}\nvar isMasked_default = isMasked;\n\n// ../../node_modules/lodash-es/_toSource.js\nvar funcProto = Function.prototype;\nvar funcToString = funcProto.toString;\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {\n    }\n    try {\n      return func + \"\";\n    } catch (e) {\n    }\n  }\n  return \"\";\n}\nvar toSource_default = toSource;\n\n// ../../node_modules/lodash-es/_baseIsNative.js\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\nvar funcProto2 = Function.prototype;\nvar objectProto3 = Object.prototype;\nvar funcToString2 = funcProto2.toString;\nvar hasOwnProperty2 = objectProto3.hasOwnProperty;\nvar reIsNative = RegExp(\"^\" + funcToString2.call(hasOwnProperty2).replace(reRegExpChar, \"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, \"$1.*?\") + \"$\");\nfunction baseIsNative(value) {\n  if (!isObject_default(value) || isMasked_default(value)) {\n    return false;\n  }\n  var pattern = isFunction_default(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource_default(value));\n}\nvar baseIsNative_default = baseIsNative;\n\n// ../../node_modules/lodash-es/_getValue.js\nfunction getValue(object, key) {\n  return object == null ? void 0 : object[key];\n}\nvar getValue_default = getValue;\n\n// ../../node_modules/lodash-es/_getNative.js\nfunction getNative(object, key) {\n  var value = getValue_default(object, key);\n  return baseIsNative_default(value) ? value : void 0;\n}\nvar getNative_default = getNative;\n\n// ../../node_modules/lodash-es/_nativeCreate.js\nvar nativeCreate = getNative_default(Object, \"create\");\nvar nativeCreate_default = nativeCreate;\n\n// ../../node_modules/lodash-es/_hashClear.js\nfunction hashClear() {\n  this.__data__ = nativeCreate_default ? nativeCreate_default(null) : {};\n  this.size = 0;\n}\nvar hashClear_default = hashClear;\n\n// ../../node_modules/lodash-es/_hashDelete.js\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\nvar hashDelete_default = hashDelete;\n\n// ../../node_modules/lodash-es/_hashGet.js\nvar HASH_UNDEFINED = \"__lodash_hash_undefined__\";\nvar objectProto4 = Object.prototype;\nvar hasOwnProperty3 = objectProto4.hasOwnProperty;\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate_default) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? void 0 : result;\n  }\n  return hasOwnProperty3.call(data, key) ? data[key] : void 0;\n}\nvar hashGet_default = hashGet;\n\n// ../../node_modules/lodash-es/_hashHas.js\nvar objectProto5 = Object.prototype;\nvar hasOwnProperty4 = objectProto5.hasOwnProperty;\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate_default ? data[key] !== void 0 : hasOwnProperty4.call(data, key);\n}\nvar hashHas_default = hashHas;\n\n// ../../node_modules/lodash-es/_hashSet.js\nvar HASH_UNDEFINED2 = \"__lodash_hash_undefined__\";\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = nativeCreate_default && value === void 0 ? HASH_UNDEFINED2 : value;\n  return this;\n}\nvar hashSet_default = hashSet;\n\n// ../../node_modules/lodash-es/_Hash.js\nfunction Hash(entries) {\n  var index = -1, length = entries == null ? 0 : entries.length;\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\nHash.prototype.clear = hashClear_default;\nHash.prototype[\"delete\"] = hashDelete_default;\nHash.prototype.get = hashGet_default;\nHash.prototype.has = hashHas_default;\nHash.prototype.set = hashSet_default;\nvar Hash_default = Hash;\n\n// ../../node_modules/lodash-es/_listCacheClear.js\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\nvar listCacheClear_default = listCacheClear;\n\n// ../../node_modules/lodash-es/eq.js\nfunction eq(value, other) {\n  return value === other || value !== value && other !== other;\n}\nvar eq_default = eq;\n\n// ../../node_modules/lodash-es/_assocIndexOf.js\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq_default(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\nvar assocIndexOf_default = assocIndexOf;\n\n// ../../node_modules/lodash-es/_listCacheDelete.js\nvar arrayProto = Array.prototype;\nvar splice = arrayProto.splice;\nfunction listCacheDelete(key) {\n  var data = this.__data__, index = assocIndexOf_default(data, key);\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\nvar listCacheDelete_default = listCacheDelete;\n\n// ../../node_modules/lodash-es/_listCacheGet.js\nfunction listCacheGet(key) {\n  var data = this.__data__, index = assocIndexOf_default(data, key);\n  return index < 0 ? void 0 : data[index][1];\n}\nvar listCacheGet_default = listCacheGet;\n\n// ../../node_modules/lodash-es/_listCacheHas.js\nfunction listCacheHas(key) {\n  return assocIndexOf_default(this.__data__, key) > -1;\n}\nvar listCacheHas_default = listCacheHas;\n\n// ../../node_modules/lodash-es/_listCacheSet.js\nfunction listCacheSet(key, value) {\n  var data = this.__data__, index = assocIndexOf_default(data, key);\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\nvar listCacheSet_default = listCacheSet;\n\n// ../../node_modules/lodash-es/_ListCache.js\nfunction ListCache(entries) {\n  var index = -1, length = entries == null ? 0 : entries.length;\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\nListCache.prototype.clear = listCacheClear_default;\nListCache.prototype[\"delete\"] = listCacheDelete_default;\nListCache.prototype.get = listCacheGet_default;\nListCache.prototype.has = listCacheHas_default;\nListCache.prototype.set = listCacheSet_default;\nvar ListCache_default = ListCache;\n\n// ../../node_modules/lodash-es/_Map.js\nvar Map2 = getNative_default(root_default, \"Map\");\nvar Map_default = Map2;\n\n// ../../node_modules/lodash-es/_mapCacheClear.js\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    \"hash\": new Hash_default(),\n    \"map\": new (Map_default || ListCache_default)(),\n    \"string\": new Hash_default()\n  };\n}\nvar mapCacheClear_default = mapCacheClear;\n\n// ../../node_modules/lodash-es/_isKeyable.js\nfunction isKeyable(value) {\n  var type = typeof value;\n  return type == \"string\" || type == \"number\" || type == \"symbol\" || type == \"boolean\" ? value !== \"__proto__\" : value === null;\n}\nvar isKeyable_default = isKeyable;\n\n// ../../node_modules/lodash-es/_getMapData.js\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable_default(key) ? data[typeof key == \"string\" ? \"string\" : \"hash\"] : data.map;\n}\nvar getMapData_default = getMapData;\n\n// ../../node_modules/lodash-es/_mapCacheDelete.js\nfunction mapCacheDelete(key) {\n  var result = getMapData_default(this, key)[\"delete\"](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\nvar mapCacheDelete_default = mapCacheDelete;\n\n// ../../node_modules/lodash-es/_mapCacheGet.js\nfunction mapCacheGet(key) {\n  return getMapData_default(this, key).get(key);\n}\nvar mapCacheGet_default = mapCacheGet;\n\n// ../../node_modules/lodash-es/_mapCacheHas.js\nfunction mapCacheHas(key) {\n  return getMapData_default(this, key).has(key);\n}\nvar mapCacheHas_default = mapCacheHas;\n\n// ../../node_modules/lodash-es/_mapCacheSet.js\nfunction mapCacheSet(key, value) {\n  var data = getMapData_default(this, key), size = data.size;\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\nvar mapCacheSet_default = mapCacheSet;\n\n// ../../node_modules/lodash-es/_MapCache.js\nfunction MapCache(entries) {\n  var index = -1, length = entries == null ? 0 : entries.length;\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\nMapCache.prototype.clear = mapCacheClear_default;\nMapCache.prototype[\"delete\"] = mapCacheDelete_default;\nMapCache.prototype.get = mapCacheGet_default;\nMapCache.prototype.has = mapCacheHas_default;\nMapCache.prototype.set = mapCacheSet_default;\nvar MapCache_default = MapCache;\n\n// ../../node_modules/lodash-es/memoize.js\nvar FUNC_ERROR_TEXT = \"Expected a function\";\nfunction memoize(func, resolver) {\n  if (typeof func != \"function\" || resolver != null && typeof resolver != \"function\") {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments, key = resolver ? resolver.apply(this, args) : args[0], cache = memoized.cache;\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache_default)();\n  return memoized;\n}\nmemoize.Cache = MapCache_default;\nvar memoize_default = memoize;\n\n// ../../node_modules/lodash-es/_memoizeCapped.js\nvar MAX_MEMOIZE_SIZE = 500;\nfunction memoizeCapped(func) {\n  var result = memoize_default(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n  var cache = result.cache;\n  return result;\n}\nvar memoizeCapped_default = memoizeCapped;\n\n// ../../node_modules/lodash-es/_stringToPath.js\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\nvar reEscapeChar = /\\\\(\\\\)?/g;\nvar stringToPath = memoizeCapped_default(function(string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46) {\n    result.push(\"\");\n  }\n  string.replace(rePropName, function(match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, \"$1\") : number || match);\n  });\n  return result;\n});\nvar stringToPath_default = stringToPath;\n\n// ../../node_modules/lodash-es/_arrayMap.js\nfunction arrayMap(array, iteratee) {\n  var index = -1, length = array == null ? 0 : array.length, result = Array(length);\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\nvar arrayMap_default = arrayMap;\n\n// ../../node_modules/lodash-es/_baseToString.js\nvar INFINITY = 1 / 0;\nvar symbolProto = Symbol_default ? Symbol_default.prototype : void 0;\nvar symbolToString = symbolProto ? symbolProto.toString : void 0;\nfunction baseToString(value) {\n  if (typeof value == \"string\") {\n    return value;\n  }\n  if (isArray_default(value)) {\n    return arrayMap_default(value, baseToString) + \"\";\n  }\n  if (isSymbol_default(value)) {\n    return symbolToString ? symbolToString.call(value) : \"\";\n  }\n  var result = value + \"\";\n  return result == \"0\" && 1 / value == -INFINITY ? \"-0\" : result;\n}\nvar baseToString_default = baseToString;\n\n// ../../node_modules/lodash-es/toString.js\nfunction toString(value) {\n  return value == null ? \"\" : baseToString_default(value);\n}\nvar toString_default = toString;\n\n// ../../node_modules/lodash-es/_castPath.js\nfunction castPath(value, object) {\n  if (isArray_default(value)) {\n    return value;\n  }\n  return isKey_default(value, object) ? [value] : stringToPath_default(toString_default(value));\n}\nvar castPath_default = castPath;\n\n// ../../node_modules/lodash-es/_toKey.js\nvar INFINITY2 = 1 / 0;\nfunction toKey(value) {\n  if (typeof value == \"string\" || isSymbol_default(value)) {\n    return value;\n  }\n  var result = value + \"\";\n  return result == \"0\" && 1 / value == -INFINITY2 ? \"-0\" : result;\n}\nvar toKey_default = toKey;\n\n// ../../node_modules/lodash-es/_baseGet.js\nfunction baseGet(object, path) {\n  path = castPath_default(path, object);\n  var index = 0, length = path.length;\n  while (object != null && index < length) {\n    object = object[toKey_default(path[index++])];\n  }\n  return index && index == length ? object : void 0;\n}\nvar baseGet_default = baseGet;\n\n// ../../node_modules/lodash-es/get.js\nfunction get(object, path, defaultValue) {\n  var result = object == null ? void 0 : baseGet_default(object, path);\n  return result === void 0 ? defaultValue : result;\n}\nvar get_default = get;\n\n// ../../node_modules/lodash-es/_overArg.js\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\nvar overArg_default = overArg;\n\n// ../../node_modules/lodash-es/_getPrototype.js\nvar getPrototype = overArg_default(Object.getPrototypeOf, Object);\nvar getPrototype_default = getPrototype;\n\n// ../../node_modules/lodash-es/isPlainObject.js\nvar objectTag = \"[object Object]\";\nvar funcProto3 = Function.prototype;\nvar objectProto6 = Object.prototype;\nvar funcToString3 = funcProto3.toString;\nvar hasOwnProperty5 = objectProto6.hasOwnProperty;\nvar objectCtorString = funcToString3.call(Object);\nfunction isPlainObject(value) {\n  if (!isObjectLike_default(value) || baseGetTag_default(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype_default(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty5.call(proto, \"constructor\") && proto.constructor;\n  return typeof Ctor == \"function\" && Ctor instanceof Ctor && funcToString3.call(Ctor) == objectCtorString;\n}\nvar isPlainObject_default = isPlainObject;\n\n// ../../node_modules/lodash-es/last.js\nfunction last(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? array[length - 1] : void 0;\n}\nvar last_default = last;\n\n// src/pointer.ts\nvar pointerMetaWeakMap = new WeakMap();\nvar cachedSubPathPointersWeakMap = new WeakMap();\nvar pointerMetaSymbol = Symbol(\"pointerMeta\");\nvar proxyHandler = {\n  get(pointerKey, prop) {\n    if (prop === pointerMetaSymbol)\n      return pointerMetaWeakMap.get(pointerKey);\n    let subPathPointers = cachedSubPathPointersWeakMap.get(pointerKey);\n    if (!subPathPointers) {\n      subPathPointers = new Map();\n      cachedSubPathPointersWeakMap.set(pointerKey, subPathPointers);\n    }\n    const existing = subPathPointers.get(prop);\n    if (existing !== void 0)\n      return existing;\n    const meta = pointerMetaWeakMap.get(pointerKey);\n    const subPointer = pointer({ root: meta.root, path: [...meta.path, prop] });\n    subPathPointers.set(prop, subPointer);\n    return subPointer;\n  }\n};\nvar getPointerMeta = (p) => {\n  const meta = p[pointerMetaSymbol];\n  return meta;\n};\nvar getPointerParts = (p) => {\n  const { root: root2, path } = getPointerMeta(p);\n  return { root: root2, path };\n};\nfunction pointer(args) {\n  var _a;\n  const meta = {\n    root: args.root,\n    path: (_a = args.path) != null ? _a : []\n  };\n  const pointerKey = {};\n  pointerMetaWeakMap.set(pointerKey, meta);\n  return new Proxy(pointerKey, proxyHandler);\n}\nvar pointer_default = pointer;\nvar isPointer = (p) => {\n  return p && !!getPointerMeta(p);\n};\n\n// src/utils/updateDeep.ts\nfunction updateDeep(state2, path, reducer) {\n  if (path.length === 0)\n    return reducer(state2);\n  return hoop(state2, path, reducer);\n}\nvar hoop = (s, path, reducer) => {\n  if (path.length === 0) {\n    return reducer(s);\n  }\n  if (Array.isArray(s)) {\n    let [index, ...restOfPath] = path;\n    index = parseInt(String(index), 10);\n    if (isNaN(index))\n      index = 0;\n    const oldVal = s[index];\n    const newVal = hoop(oldVal, restOfPath, reducer);\n    if (oldVal === newVal)\n      return s;\n    const newS = [...s];\n    newS.splice(index, 1, newVal);\n    return newS;\n  } else if (typeof s === \"object\" && s !== null) {\n    const [key, ...restOfPath] = path;\n    const oldVal = s[key];\n    const newVal = hoop(oldVal, restOfPath, reducer);\n    if (oldVal === newVal)\n      return s;\n    const newS = __spreadProps(__spreadValues({}, s), { [key]: newVal });\n    return newS;\n  } else {\n    const [key, ...restOfPath] = path;\n    return { [key]: hoop(void 0, restOfPath, reducer) };\n  }\n};\n\n// src/utils/Stack.ts\nvar Stack = class {\n  constructor() {\n    this._head = void 0;\n  }\n  peek() {\n    return this._head && this._head.data;\n  }\n  pop() {\n    const head = this._head;\n    if (!head) {\n      return void 0;\n    }\n    this._head = head.next;\n    return head.data;\n  }\n  push(data) {\n    const node = { next: this._head, data };\n    this._head = node;\n  }\n};\n\n// src/prism/Interface.ts\nfunction isPrism(d) {\n  return !!(d && d.isPrism && d.isPrism === true);\n}\n\n// src/prism/discoveryMechanism.ts\nfunction createMechanism() {\n  const noop = () => {\n  };\n  const stack = new Stack();\n  const noopCollector = noop;\n  const pushCollector2 = (collector) => {\n    stack.push(collector);\n  };\n  const popCollector2 = (collector) => {\n    const existing = stack.peek();\n    if (existing !== collector) {\n      throw new Error(`Popped collector is not on top of the stack`);\n    }\n    stack.pop();\n  };\n  const startIgnoringDependencies2 = () => {\n    stack.push(noopCollector);\n  };\n  const stopIgnoringDependencies2 = () => {\n    if (stack.peek() !== noopCollector) {\n      if (process.env.NODE_ENV === \"development\") {\n        console.warn(\"This should never happen\");\n      }\n    } else {\n      stack.pop();\n    }\n  };\n  const reportResolutionStart2 = (d) => {\n    const possibleCollector = stack.peek();\n    if (possibleCollector) {\n      possibleCollector(d);\n    }\n    stack.push(noopCollector);\n  };\n  const reportResolutionEnd2 = (_d) => {\n    stack.pop();\n  };\n  return {\n    type: \"Dataverse_discoveryMechanism\",\n    startIgnoringDependencies: startIgnoringDependencies2,\n    stopIgnoringDependencies: stopIgnoringDependencies2,\n    reportResolutionStart: reportResolutionStart2,\n    reportResolutionEnd: reportResolutionEnd2,\n    pushCollector: pushCollector2,\n    popCollector: popCollector2\n  };\n}\nfunction getSharedMechanism() {\n  const varName = \"__dataverse_discoveryMechanism_sharedStack\";\n  const root2 = typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {};\n  if (root2) {\n    const existingMechanism = root2[varName];\n    if (existingMechanism && typeof existingMechanism === \"object\" && existingMechanism.type === \"Dataverse_discoveryMechanism\") {\n      return existingMechanism;\n    } else {\n      const mechanism = createMechanism();\n      root2[varName] = mechanism;\n      return mechanism;\n    }\n  } else {\n    return createMechanism();\n  }\n}\nvar {\n  startIgnoringDependencies,\n  stopIgnoringDependencies,\n  reportResolutionEnd,\n  reportResolutionStart,\n  pushCollector,\n  popCollector\n} = getSharedMechanism();\n\n// src/prism/prism.ts\nvar voidFn = () => {\n};\nvar HotHandle = class {\n  constructor(_fn, _prismInstance) {\n    this._fn = _fn;\n    this._prismInstance = _prismInstance;\n    this._didMarkDependentsAsStale = false;\n    this._isFresh = false;\n    this._cacheOfDendencyValues = new Map();\n    this._dependents = new Set();\n    this._dependencies = new Set();\n    this._possiblyStaleDeps = new Set();\n    this._scope = new HotScope(this);\n    this._lastValue = void 0;\n    this._forciblySetToStale = false;\n    this._reactToDependencyGoingStale = (which) => {\n      this._possiblyStaleDeps.add(which);\n      this._markAsStale();\n    };\n    for (const d of this._dependencies) {\n      d._addDependent(this._reactToDependencyGoingStale);\n    }\n    startIgnoringDependencies();\n    this.getValue();\n    stopIgnoringDependencies();\n  }\n  get hasDependents() {\n    return this._dependents.size > 0;\n  }\n  removeDependent(d) {\n    this._dependents.delete(d);\n  }\n  addDependent(d) {\n    this._dependents.add(d);\n  }\n  destroy() {\n    for (const d of this._dependencies) {\n      d._removeDependent(this._reactToDependencyGoingStale);\n    }\n    cleanupScopeStack(this._scope);\n  }\n  getValue() {\n    if (!this._isFresh) {\n      const newValue = this._recalculate();\n      this._lastValue = newValue;\n      this._isFresh = true;\n      this._didMarkDependentsAsStale = false;\n      this._forciblySetToStale = false;\n    }\n    return this._lastValue;\n  }\n  _recalculate() {\n    let value;\n    if (!this._forciblySetToStale) {\n      if (this._possiblyStaleDeps.size > 0) {\n        let anActuallyStaleDepWasFound = false;\n        startIgnoringDependencies();\n        for (const dep of this._possiblyStaleDeps) {\n          if (this._cacheOfDendencyValues.get(dep) !== dep.getValue()) {\n            anActuallyStaleDepWasFound = true;\n            break;\n          }\n        }\n        stopIgnoringDependencies();\n        this._possiblyStaleDeps.clear();\n        if (!anActuallyStaleDepWasFound) {\n          return this._lastValue;\n        }\n      }\n    }\n    const newDeps = new Set();\n    this._cacheOfDendencyValues.clear();\n    const collector = (observedDep) => {\n      newDeps.add(observedDep);\n      this._addDependency(observedDep);\n    };\n    pushCollector(collector);\n    hookScopeStack.push(this._scope);\n    try {\n      value = this._fn();\n    } catch (error) {\n      console.error(error);\n    } finally {\n      const topOfTheStack = hookScopeStack.pop();\n      if (topOfTheStack !== this._scope) {\n        console.warn(`The Prism hook stack has slipped. This is a bug.`);\n      }\n    }\n    popCollector(collector);\n    for (const dep of this._dependencies) {\n      if (!newDeps.has(dep)) {\n        this._removeDependency(dep);\n      }\n    }\n    this._dependencies = newDeps;\n    startIgnoringDependencies();\n    for (const dep of newDeps) {\n      this._cacheOfDendencyValues.set(dep, dep.getValue());\n    }\n    stopIgnoringDependencies();\n    return value;\n  }\n  forceStale() {\n    this._forciblySetToStale = true;\n    this._markAsStale();\n  }\n  _markAsStale() {\n    if (this._didMarkDependentsAsStale)\n      return;\n    this._didMarkDependentsAsStale = true;\n    this._isFresh = false;\n    for (const dependent of this._dependents) {\n      dependent(this._prismInstance);\n    }\n  }\n  _addDependency(d) {\n    if (this._dependencies.has(d))\n      return;\n    this._dependencies.add(d);\n    d._addDependent(this._reactToDependencyGoingStale);\n  }\n  _removeDependency(d) {\n    if (!this._dependencies.has(d))\n      return;\n    this._dependencies.delete(d);\n    d._removeDependent(this._reactToDependencyGoingStale);\n  }\n};\nvar emptyObject = {};\nvar PrismInstance = class {\n  constructor(_fn) {\n    this._fn = _fn;\n    this.isPrism = true;\n    this._state = {\n      hot: false,\n      handle: void 0\n    };\n  }\n  get isHot() {\n    return this._state.hot;\n  }\n  onChange(ticker, listener, immediate = false) {\n    const dependent = () => {\n      ticker.onThisOrNextTick(refresh);\n    };\n    let lastValue = emptyObject;\n    const refresh = () => {\n      const newValue = this.getValue();\n      if (newValue === lastValue)\n        return;\n      lastValue = newValue;\n      listener(newValue);\n    };\n    this._addDependent(dependent);\n    if (immediate) {\n      lastValue = this.getValue();\n      listener(lastValue);\n    }\n    const unsubscribe = () => {\n      this._removeDependent(dependent);\n      ticker.offThisOrNextTick(refresh);\n      ticker.offNextTick(refresh);\n    };\n    return unsubscribe;\n  }\n  onStale(callback) {\n    const untap = () => {\n      this._removeDependent(fn);\n    };\n    const fn = () => callback();\n    this._addDependent(fn);\n    return untap;\n  }\n  keepHot() {\n    return this.onStale(() => {\n    });\n  }\n  _addDependent(d) {\n    if (!this._state.hot) {\n      this._goHot();\n    }\n    this._state.handle.addDependent(d);\n  }\n  _goHot() {\n    const hotHandle = new HotHandle(this._fn, this);\n    this._state = {\n      hot: true,\n      handle: hotHandle\n    };\n  }\n  _removeDependent(d) {\n    const state2 = this._state;\n    if (!state2.hot) {\n      return;\n    }\n    const handle = state2.handle;\n    handle.removeDependent(d);\n    if (!handle.hasDependents) {\n      this._state = { hot: false, handle: void 0 };\n      handle.destroy();\n    }\n  }\n  getValue() {\n    reportResolutionStart(this);\n    const state2 = this._state;\n    let val2;\n    if (state2.hot) {\n      val2 = state2.handle.getValue();\n    } else {\n      val2 = calculateColdPrism(this._fn);\n    }\n    reportResolutionEnd(this);\n    return val2;\n  }\n};\nvar HotScope = class {\n  constructor(_hotHandle) {\n    this._hotHandle = _hotHandle;\n    this._refs = new Map();\n    this.isPrismScope = true;\n    this.subs = {};\n    this.effects = new Map();\n    this.memos = new Map();\n  }\n  ref(key, initialValue) {\n    let ref2 = this._refs.get(key);\n    if (ref2 !== void 0) {\n      return ref2;\n    } else {\n      const ref3 = {\n        current: initialValue\n      };\n      this._refs.set(key, ref3);\n      return ref3;\n    }\n  }\n  effect(key, cb, deps) {\n    let effect2 = this.effects.get(key);\n    if (effect2 === void 0) {\n      effect2 = {\n        cleanup: voidFn,\n        deps: void 0\n      };\n      this.effects.set(key, effect2);\n    }\n    if (depsHaveChanged(effect2.deps, deps)) {\n      effect2.cleanup();\n      startIgnoringDependencies();\n      effect2.cleanup = safelyRun(cb, voidFn).value;\n      stopIgnoringDependencies();\n      effect2.deps = deps;\n    }\n  }\n  memo(key, fn, deps) {\n    let memo2 = this.memos.get(key);\n    if (memo2 === void 0) {\n      memo2 = {\n        cachedValue: null,\n        deps: void 0\n      };\n      this.memos.set(key, memo2);\n    }\n    if (depsHaveChanged(memo2.deps, deps)) {\n      startIgnoringDependencies();\n      memo2.cachedValue = safelyRun(fn, void 0).value;\n      stopIgnoringDependencies();\n      memo2.deps = deps;\n    }\n    return memo2.cachedValue;\n  }\n  state(key, initialValue) {\n    const { value, setValue } = this.memo(\"state/\" + key, () => {\n      const value2 = { current: initialValue };\n      const setValue2 = (newValue) => {\n        value2.current = newValue;\n        this._hotHandle.forceStale();\n      };\n      return { value: value2, setValue: setValue2 };\n    }, []);\n    return [value.current, setValue];\n  }\n  sub(key) {\n    if (!this.subs[key]) {\n      this.subs[key] = new HotScope(this._hotHandle);\n    }\n    return this.subs[key];\n  }\n  cleanupEffects() {\n    for (const effect2 of this.effects.values()) {\n      safelyRun(effect2.cleanup, void 0);\n    }\n    this.effects.clear();\n  }\n  source(subscribe, getValue2) {\n    const sourceKey = \"$$source/blah\";\n    this.effect(sourceKey, () => {\n      const unsub = subscribe(() => {\n        this._hotHandle.forceStale();\n      });\n      return unsub;\n    }, [subscribe]);\n    return getValue2();\n  }\n};\nfunction cleanupScopeStack(scope2) {\n  for (const sub2 of Object.values(scope2.subs)) {\n    cleanupScopeStack(sub2);\n  }\n  scope2.cleanupEffects();\n}\nfunction safelyRun(fn, returnValueInCaseOfError) {\n  try {\n    return { value: fn(), ok: true };\n  } catch (error) {\n    setTimeout(function PrismReportThrow() {\n      throw error;\n    });\n    return { value: returnValueInCaseOfError, ok: false };\n  }\n}\nvar hookScopeStack = new Stack();\nfunction ref(key, initialValue) {\n  const scope2 = hookScopeStack.peek();\n  if (!scope2) {\n    throw new Error(`prism.ref() is called outside of a prism() call.`);\n  }\n  return scope2.ref(key, initialValue);\n}\nfunction effect(key, cb, deps) {\n  const scope2 = hookScopeStack.peek();\n  if (!scope2) {\n    throw new Error(`prism.effect() is called outside of a prism() call.`);\n  }\n  return scope2.effect(key, cb, deps);\n}\nfunction depsHaveChanged(oldDeps, newDeps) {\n  if (oldDeps === void 0 || newDeps === void 0) {\n    return true;\n  }\n  const len = oldDeps.length;\n  if (len !== newDeps.length)\n    return true;\n  for (let i = 0; i < len; i++) {\n    if (oldDeps[i] !== newDeps[i])\n      return true;\n  }\n  return false;\n}\nfunction memo(key, fn, deps) {\n  const scope2 = hookScopeStack.peek();\n  if (!scope2) {\n    throw new Error(`prism.memo() is called outside of a prism() call.`);\n  }\n  return scope2.memo(key, fn, deps);\n}\nfunction state(key, initialValue) {\n  const scope2 = hookScopeStack.peek();\n  if (!scope2) {\n    throw new Error(`prism.state() is called outside of a prism() call.`);\n  }\n  return scope2.state(key, initialValue);\n}\nfunction ensurePrism() {\n  const scope2 = hookScopeStack.peek();\n  if (!scope2) {\n    throw new Error(`The parent function is called outside of a prism() call.`);\n  }\n}\nfunction scope(key, fn) {\n  const parentScope = hookScopeStack.peek();\n  if (!parentScope) {\n    throw new Error(`prism.scope() is called outside of a prism() call.`);\n  }\n  const subScope = parentScope.sub(key);\n  hookScopeStack.push(subScope);\n  const ret = safelyRun(fn, void 0).value;\n  hookScopeStack.pop();\n  return ret;\n}\nfunction sub(key, fn, deps) {\n  return memo(key, () => prism(fn), deps).getValue();\n}\nfunction inPrism() {\n  return !!hookScopeStack.peek();\n}\nfunction source(subscribe, getValue2) {\n  const scope2 = hookScopeStack.peek();\n  if (!scope2) {\n    throw new Error(`prism.source() is called outside of a prism() call.`);\n  }\n  return scope2.source(subscribe, getValue2);\n}\nvar prism = (fn) => {\n  return new PrismInstance(fn);\n};\nvar ColdScope = class {\n  effect(key, cb, deps) {\n    console.warn(`prism.effect() does not run in cold prisms`);\n  }\n  memo(key, fn, deps) {\n    return fn();\n  }\n  state(key, initialValue) {\n    return [initialValue, () => {\n    }];\n  }\n  ref(key, initialValue) {\n    return { current: initialValue };\n  }\n  sub(key) {\n    return new ColdScope();\n  }\n  source(subscribe, getValue2) {\n    return getValue2();\n  }\n};\nfunction calculateColdPrism(fn) {\n  const scope2 = new ColdScope();\n  hookScopeStack.push(scope2);\n  let value;\n  try {\n    value = fn();\n  } catch (error) {\n    console.error(error);\n  } finally {\n    const topOfTheStack = hookScopeStack.pop();\n    if (topOfTheStack !== scope2) {\n      console.warn(`The Prism hook stack has slipped. This is a bug.`);\n    }\n  }\n  return value;\n}\nprism.ref = ref;\nprism.effect = effect;\nprism.memo = memo;\nprism.ensurePrism = ensurePrism;\nprism.state = state;\nprism.scope = scope;\nprism.sub = sub;\nprism.inPrism = inPrism;\nprism.source = source;\nvar prism_default = prism;\n\n// src/Atom.ts\nvar ValueTypes;\n(function(ValueTypes2) {\n  ValueTypes2[ValueTypes2[\"Dict\"] = 0] = \"Dict\";\n  ValueTypes2[ValueTypes2[\"Array\"] = 1] = \"Array\";\n  ValueTypes2[ValueTypes2[\"Other\"] = 2] = \"Other\";\n})(ValueTypes || (ValueTypes = {}));\nvar getTypeOfValue = (v) => {\n  if (Array.isArray(v))\n    return 1;\n  if (isPlainObject_default(v))\n    return 0;\n  return 2;\n};\nvar getKeyOfValue = (v, key, vType = getTypeOfValue(v)) => {\n  if (vType === 0 && typeof key === \"string\") {\n    return v[key];\n  } else if (vType === 1 && isValidArrayIndex(key)) {\n    return v[key];\n  } else {\n    return void 0;\n  }\n};\nvar isValidArrayIndex = (key) => {\n  const inNumber = typeof key === \"number\" ? key : parseInt(key, 10);\n  return !isNaN(inNumber) && inNumber >= 0 && inNumber < Infinity && (inNumber | 0) === inNumber;\n};\nvar Scope = class {\n  constructor(_parent, _path) {\n    this._parent = _parent;\n    this._path = _path;\n    this.children = new Map();\n    this.identityChangeListeners = new Set();\n  }\n  addIdentityChangeListener(cb) {\n    this.identityChangeListeners.add(cb);\n  }\n  removeIdentityChangeListener(cb) {\n    this.identityChangeListeners.delete(cb);\n    this._checkForGC();\n  }\n  removeChild(key) {\n    this.children.delete(key);\n    this._checkForGC();\n  }\n  getChild(key) {\n    return this.children.get(key);\n  }\n  getOrCreateChild(key) {\n    let child = this.children.get(key);\n    if (!child) {\n      child = child = new Scope(this, this._path.concat([key]));\n      this.children.set(key, child);\n    }\n    return child;\n  }\n  _checkForGC() {\n    if (this.identityChangeListeners.size > 0)\n      return;\n    if (this.children.size > 0)\n      return;\n    if (this._parent) {\n      this._parent.removeChild(last_default(this._path));\n    }\n  }\n};\nvar Atom = class {\n  constructor(initialState) {\n    this.$$isPointerToPrismProvider = true;\n    this.pointer = pointer_default({ root: this, path: [] });\n    this.prism = this.pointerToPrism(this.pointer);\n    this._onPointerValueChange = (pointer2, cb) => {\n      const { path } = getPointerParts(pointer2);\n      const scope2 = this._getOrCreateScopeForPath(path);\n      scope2.identityChangeListeners.add(cb);\n      const unsubscribe = () => {\n        scope2.identityChangeListeners.delete(cb);\n      };\n      return unsubscribe;\n    };\n    this._currentState = initialState;\n    this._rootScope = new Scope(void 0, []);\n  }\n  set(newState) {\n    const oldState = this._currentState;\n    this._currentState = newState;\n    this._checkUpdates(this._rootScope, oldState, newState);\n  }\n  get() {\n    return this._currentState;\n  }\n  getByPointer(pointerOrFn) {\n    const pointer2 = isPointer(pointerOrFn) ? pointerOrFn : pointerOrFn(this.pointer);\n    const path = getPointerParts(pointer2).path;\n    return this._getIn(path);\n  }\n  _getIn(path) {\n    return path.length === 0 ? this.get() : get_default(this.get(), path);\n  }\n  reduce(fn) {\n    this.set(fn(this.get()));\n  }\n  reduceByPointer(pointerOrFn, reducer) {\n    const pointer2 = isPointer(pointerOrFn) ? pointerOrFn : pointerOrFn(this.pointer);\n    const path = getPointerParts(pointer2).path;\n    const newState = updateDeep(this.get(), path, reducer);\n    this.set(newState);\n  }\n  setByPointer(pointerOrFn, val2) {\n    this.reduceByPointer(pointerOrFn, () => val2);\n  }\n  _checkUpdates(scope2, oldState, newState) {\n    if (oldState === newState)\n      return;\n    for (const cb of scope2.identityChangeListeners) {\n      cb(newState);\n    }\n    if (scope2.children.size === 0)\n      return;\n    const oldValueType = getTypeOfValue(oldState);\n    const newValueType = getTypeOfValue(newState);\n    if (oldValueType === 2 && oldValueType === newValueType)\n      return;\n    for (const [childKey, childScope] of scope2.children) {\n      const oldChildVal = getKeyOfValue(oldState, childKey, oldValueType);\n      const newChildVal = getKeyOfValue(newState, childKey, newValueType);\n      this._checkUpdates(childScope, oldChildVal, newChildVal);\n    }\n  }\n  _getOrCreateScopeForPath(path) {\n    let curScope = this._rootScope;\n    for (const pathEl of path) {\n      curScope = curScope.getOrCreateChild(pathEl);\n    }\n    return curScope;\n  }\n  pointerToPrism(pointer2) {\n    const { path } = getPointerParts(pointer2);\n    const subscribe = (listener) => this._onPointerValueChange(pointer2, listener);\n    const getValue2 = () => this._getIn(path);\n    return prism_default(() => {\n      return prism_default.source(subscribe, getValue2);\n    });\n  }\n};\n\n// src/pointerToPrism.ts\nvar identifyPrismWeakMap = new WeakMap();\nfunction isPointerToPrismProvider(val2) {\n  return typeof val2 === \"object\" && val2 !== null && val2[\"$$isPointerToPrismProvider\"] === true;\n}\nvar pointerToPrism = (pointer2) => {\n  const meta = getPointerMeta(pointer2);\n  let prismInstance = identifyPrismWeakMap.get(meta);\n  if (!prismInstance) {\n    const root2 = meta.root;\n    if (!isPointerToPrismProvider(root2)) {\n      throw new Error(`Cannot run pointerToPrism() on a pointer whose root is not an PointerToPrismProvider`);\n    }\n    prismInstance = root2.pointerToPrism(pointer2);\n    identifyPrismWeakMap.set(meta, prismInstance);\n  }\n  return prismInstance;\n};\n\n// src/val.ts\nvar val = (input) => {\n  if (isPointer(input)) {\n    return pointerToPrism(input).getValue();\n  } else if (isPrism(input)) {\n    return input.getValue();\n  } else {\n    return input;\n  }\n};\n\n// src/prism/iterateAndCountTicks.ts\nfunction* iterateAndCountTicks(pointerOrPrism) {\n  let d;\n  if (isPointer(pointerOrPrism)) {\n    d = pointerToPrism(pointerOrPrism);\n  } else if (isPrism(pointerOrPrism)) {\n    d = pointerOrPrism;\n  } else {\n    throw new Error(`Only pointers and prisms are supported`);\n  }\n  let ticksCountedSinceLastYield = 0;\n  const untap = d.onStale(() => {\n    ticksCountedSinceLastYield++;\n  });\n  try {\n    while (true) {\n      const ticks = ticksCountedSinceLastYield;\n      ticksCountedSinceLastYield = 0;\n      yield { value: d.getValue(), ticks };\n    }\n  } finally {\n    untap();\n  }\n}\n\n// src/Ticker.ts\nvar EMPTY_TICKS_BEFORE_GOING_DORMANT = 60 * 3;\nvar Ticker = class {\n  constructor(_conf) {\n    this._conf = _conf;\n    this._ticking = false;\n    this._dormant = true;\n    this._numberOfDormantTicks = 0;\n    this.__ticks = 0;\n    this._scheduledForThisOrNextTick = new Set();\n    this._scheduledForNextTick = new Set();\n    this._timeAtCurrentTick = 0;\n  }\n  get dormant() {\n    return this._dormant;\n  }\n  onThisOrNextTick(fn) {\n    this._scheduledForThisOrNextTick.add(fn);\n    if (this._dormant) {\n      this._goActive();\n    }\n  }\n  onNextTick(fn) {\n    this._scheduledForNextTick.add(fn);\n    if (this._dormant) {\n      this._goActive();\n    }\n  }\n  offThisOrNextTick(fn) {\n    this._scheduledForThisOrNextTick.delete(fn);\n  }\n  offNextTick(fn) {\n    this._scheduledForNextTick.delete(fn);\n  }\n  get time() {\n    if (this._ticking) {\n      return this._timeAtCurrentTick;\n    } else\n      return performance.now();\n  }\n  _goActive() {\n    var _a, _b;\n    if (!this._dormant)\n      return;\n    this._dormant = false;\n    (_b = (_a = this._conf) == null ? void 0 : _a.onActive) == null ? void 0 : _b.call(_a);\n  }\n  _goDormant() {\n    var _a, _b;\n    if (this._dormant)\n      return;\n    this._dormant = true;\n    this._numberOfDormantTicks = 0;\n    (_b = (_a = this._conf) == null ? void 0 : _a.onDormant) == null ? void 0 : _b.call(_a);\n  }\n  tick(t = performance.now()) {\n    if (process.env.NODE_ENV === \"development\") {\n      if (!(this instanceof Ticker)) {\n        throw new Error('ticker.tick must be called while bound to the ticker. As in, \"ticker.tick(time)\" or \"requestAnimationFrame((t) => ticker.tick(t))\" for performance.');\n      }\n    }\n    this.__ticks++;\n    if (!this._dormant) {\n      if (this._scheduledForNextTick.size === 0 && this._scheduledForThisOrNextTick.size === 0) {\n        this._numberOfDormantTicks++;\n        if (this._numberOfDormantTicks >= EMPTY_TICKS_BEFORE_GOING_DORMANT) {\n          this._goDormant();\n          return;\n        }\n      }\n    }\n    this._ticking = true;\n    this._timeAtCurrentTick = t;\n    for (const v of this._scheduledForNextTick) {\n      this._scheduledForThisOrNextTick.add(v);\n    }\n    this._scheduledForNextTick.clear();\n    this._tick(0);\n    this._ticking = false;\n  }\n  _tick(iterationNumber) {\n    const time = this.time;\n    if (iterationNumber > 10) {\n      console.warn(\"_tick() recursing for 10 times\");\n    }\n    if (iterationNumber > 100) {\n      throw new Error(`Maximum recursion limit for _tick()`);\n    }\n    const oldSet = this._scheduledForThisOrNextTick;\n    this._scheduledForThisOrNextTick = new Set();\n    for (const fn of oldSet) {\n      fn(time);\n    }\n    if (this._scheduledForThisOrNextTick.size > 0) {\n      return this._tick(iterationNumber + 1);\n    }\n  }\n};\n\n// src/prism/iterateOver.ts\nfunction* iterateOver(pointerOrPrism) {\n  let d;\n  if (isPointer(pointerOrPrism)) {\n    d = pointerToPrism(pointerOrPrism);\n  } else if (isPrism(pointerOrPrism)) {\n    d = pointerOrPrism;\n  } else {\n    throw new Error(`Only pointers and prisms are supported`);\n  }\n  const ticker = new Ticker();\n  const untap = d.onChange(ticker, (v) => {\n  });\n  try {\n    while (true) {\n      ticker.tick();\n      yield d.getValue();\n    }\n  } finally {\n    untap();\n  }\n}\n\n// src/PointerProxy.ts\nvar PointerProxy = class {\n  constructor(currentPointer) {\n    this.$$isPointerToPrismProvider = true;\n    this._currentPointerBox = new Atom(currentPointer);\n    this.pointer = pointer_default({ root: this, path: [] });\n  }\n  setPointer(p) {\n    this._currentPointerBox.set(p);\n  }\n  pointerToPrism(pointer2) {\n    const { path } = getPointerMeta(pointer2);\n    return prism_default(() => {\n      const currentPointer = this._currentPointerBox.prism.getValue();\n      const subPointer = path.reduce((pointerSoFar, pathItem) => pointerSoFar[pathItem], currentPointer);\n      return val(subPointer);\n    });\n  }\n};\n//# sourceMappingURL=index.js.map\n"],"names":["__defProp","__defProps","__getOwnPropDescs","__getOwnPropSymbols","__hasOwnProp","__propIsEnum","__defNormalProp","obj","key","value","__spreadValues","a","b","prop","__spreadProps","__markAsModule","target","__export","all","name","exports","Atom","PointerProxy","Ticker","getPointerParts","isPointer","isPrism","iterateAndCountTicks","iterateOver","pointer_default","pointerToPrism","prism_default","val","isArray","isArray_default","freeGlobal","global","freeGlobal_default","freeSelf","root","root_default","Symbol2","Symbol_default","objectProto","hasOwnProperty","nativeObjectToString","symToStringTag","getRawTag","isOwn","tag","unmasked","result","getRawTag_default","objectProto2","nativeObjectToString2","objectToString","objectToString_default","nullTag","undefinedTag","symToStringTag2","baseGetTag","baseGetTag_default","isObjectLike","isObjectLike_default","symbolTag","isSymbol","isSymbol_default","reIsDeepProp","reIsPlainProp","isKey","object","type","isKey_default","isObject","isObject_default","asyncTag","funcTag","genTag","proxyTag","isFunction","isFunction_default","coreJsData","coreJsData_default","maskSrcKey","uid","isMasked","func","isMasked_default","funcProto","funcToString","toSource","toSource_default","reRegExpChar","reIsHostCtor","funcProto2","objectProto3","funcToString2","hasOwnProperty2","reIsNative","baseIsNative","pattern","baseIsNative_default","getValue","getValue_default","getNative","getNative_default","nativeCreate","nativeCreate_default","hashClear","hashClear_default","hashDelete","hashDelete_default","HASH_UNDEFINED","objectProto4","hasOwnProperty3","hashGet","data","hashGet_default","objectProto5","hasOwnProperty4","hashHas","hashHas_default","HASH_UNDEFINED2","hashSet","hashSet_default","Hash","entries","index","length","entry","Hash_default","listCacheClear","listCacheClear_default","eq","other","eq_default","assocIndexOf","array","assocIndexOf_default","arrayProto","splice","listCacheDelete","lastIndex","listCacheDelete_default","listCacheGet","listCacheGet_default","listCacheHas","listCacheHas_default","listCacheSet","listCacheSet_default","ListCache","ListCache_default","Map2","Map_default","mapCacheClear","mapCacheClear_default","isKeyable","isKeyable_default","getMapData","map","getMapData_default","mapCacheDelete","mapCacheDelete_default","mapCacheGet","mapCacheGet_default","mapCacheHas","mapCacheHas_default","mapCacheSet","size","mapCacheSet_default","MapCache","MapCache_default","FUNC_ERROR_TEXT","memoize","resolver","memoized","args","cache","memoize_default","MAX_MEMOIZE_SIZE","memoizeCapped","memoizeCapped_default","rePropName","reEscapeChar","stringToPath","string","match","number","quote","subString","stringToPath_default","arrayMap","iteratee","arrayMap_default","INFINITY","symbolProto","symbolToString","baseToString","baseToString_default","toString","toString_default","castPath","castPath_default","INFINITY2","toKey","toKey_default","baseGet","path","baseGet_default","get","defaultValue","get_default","overArg","transform","arg","overArg_default","getPrototype","getPrototype_default","objectTag","funcProto3","objectProto6","funcToString3","hasOwnProperty5","objectCtorString","isPlainObject","proto","Ctor","isPlainObject_default","last","last_default","pointerMetaWeakMap","cachedSubPathPointersWeakMap","pointerMetaSymbol","proxyHandler","pointerKey","subPathPointers","existing","meta","subPointer","pointer","getPointerMeta","p","root2","_a","updateDeep","state2","reducer","hoop","s","restOfPath","oldVal","newVal","newS","Stack","head","node","d","createMechanism","noop","stack","noopCollector","possibleCollector","_d","collector","getSharedMechanism","varName","existingMechanism","mechanism","startIgnoringDependencies","stopIgnoringDependencies","reportResolutionEnd","reportResolutionStart","pushCollector","popCollector","voidFn","HotHandle","_fn","_prismInstance","HotScope","which","cleanupScopeStack","newValue","anActuallyStaleDepWasFound","dep","newDeps","observedDep","hookScopeStack","error","dependent","emptyObject","PrismInstance","ticker","listener","immediate","refresh","lastValue","callback","untap","fn","hotHandle","handle","val2","calculateColdPrism","_hotHandle","initialValue","ref2","ref3","cb","deps","effect2","depsHaveChanged","safelyRun","memo2","setValue","value2","subscribe","getValue2","sourceKey","scope2","sub2","returnValueInCaseOfError","ref","effect","oldDeps","len","i","memo","state","ensurePrism","scope","parentScope","subScope","ret","sub","prism","inPrism","source","ColdScope","ValueTypes","ValueTypes2","getTypeOfValue","v","getKeyOfValue","vType","isValidArrayIndex","inNumber","Scope","_parent","_path","child","initialState","pointer2","newState","oldState","pointerOrFn","oldValueType","newValueType","childKey","childScope","oldChildVal","newChildVal","curScope","pathEl","identifyPrismWeakMap","isPointerToPrismProvider","prismInstance","input","pointerOrPrism","ticksCountedSinceLastYield","ticks","EMPTY_TICKS_BEFORE_GOING_DORMANT","_conf","_b","t","iterationNumber","time","oldSet","currentPointer","pointerSoFar","pathItem"],"mappings":"oIAAA,IAAIA,EAAY,OAAO,eACnBC,GAAa,OAAO,iBACpBC,GAAoB,OAAO,0BAC3BC,EAAsB,OAAO,sBAC7BC,GAAe,OAAO,UAAU,eAChCC,GAAe,OAAO,UAAU,qBAChCC,EAAkB,CAACC,EAAKC,EAAKC,IAAUD,KAAOD,EAAMP,EAAUO,EAAKC,EAAK,CAAE,WAAY,GAAM,aAAc,GAAM,SAAU,GAAM,MAAAC,CAAO,CAAA,EAAIF,EAAIC,CAAG,EAAIC,EACtJC,GAAiB,CAACC,EAAGC,IAAM,CACpB,QAAAC,KAAQD,IAAMA,EAAI,CAAA,GACrBR,GAAa,KAAKQ,EAAGC,CAAI,GAC3BP,EAAgBK,EAAGE,EAAMD,EAAEC,CAAI,CAAC,EAChC,GAAAV,EACO,QAAAU,KAAQV,EAAoBS,CAAC,EAChCP,GAAa,KAAKO,EAAGC,CAAI,GAC3BP,EAAgBK,EAAGE,EAAMD,EAAEC,CAAI,CAAC,EAE/B,OAAAF,CACT,EACIG,GAAgB,CAACH,EAAGC,IAAMX,GAAWU,EAAGT,GAAkBU,CAAC,CAAC,EAC5DG,GAAkBC,GAAWhB,EAAUgB,EAAQ,aAAc,CAAE,MAAO,EAAA,CAAM,EAC5EC,GAAW,CAACD,EAAQE,IAAQ,CAC9BH,GAAeC,CAAM,EACrB,QAASG,KAAQD,EACLlB,EAAAgB,EAAQG,EAAM,CAAE,IAAKD,EAAIC,CAAI,EAAG,WAAY,EAAA,CAAM,CAChE,EAGAF,GAASG,GAAS,CAChB,KAAM,IAAMC,GACZ,aAAc,IAAMC,GACpB,OAAQ,IAAMC,GACd,gBAAiB,IAAMC,EACvB,UAAW,IAAMC,EACjB,QAAS,IAAMC,EACf,qBAAsB,IAAMC,GAC5B,YAAa,IAAMC,GACnB,QAAS,IAAMC,EACf,eAAgB,IAAMC,EACtB,MAAO,IAAMC,EACb,IAAK,IAAMC,EACb,CAAC,EAGD,IAAIC,GAAU,MAAM,QAChBC,EAAkBD,GAGlBE,GAAa,OAAOC,GAAU,UAAYA,GAAUA,EAAO,SAAW,QAAUA,EAChFC,GAAqBF,GAGrBG,GAAW,OAAO,MAAQ,UAAY,MAAQ,KAAK,SAAW,QAAU,KACxEC,GAAOF,IAAsBC,IAAY,SAAS,aAAa,EAAE,EACjEE,EAAeD,GAGfE,GAAUD,EAAa,OACvBE,EAAiBD,GAGjBE,EAAc,OAAO,UACrBC,GAAiBD,EAAY,eAC7BE,GAAuBF,EAAY,SACnCG,EAAiBJ,EAAiBA,EAAe,YAAc,OACnE,SAASK,GAAUtC,EAAO,CACpB,IAAAuC,EAAQJ,GAAe,KAAKnC,EAAOqC,CAAc,EAAGG,EAAMxC,EAAMqC,CAAc,EAC9E,GAAA,CACFrC,EAAMqC,CAAc,EAAI,OACxB,IAAII,EAAW,QACL,CACZ,CACI,IAAAC,EAASN,GAAqB,KAAKpC,CAAK,EAC5C,OAAIyC,IACEF,EACFvC,EAAMqC,CAAc,EAAIG,EAExB,OAAOxC,EAAMqC,CAAc,GAGxBK,CACT,CACA,IAAIC,GAAoBL,GAGpBM,GAAe,OAAO,UACtBC,GAAwBD,GAAa,SACzC,SAASE,GAAe9C,EAAO,CACtB,OAAA6C,GAAsB,KAAK7C,CAAK,CACzC,CACA,IAAI+C,GAAyBD,GAGzBE,GAAU,gBACVC,GAAe,qBACfC,EAAkBjB,EAAiBA,EAAe,YAAc,OACpE,SAASkB,GAAWnD,EAAO,CACzB,OAAIA,GAAS,KACJA,IAAU,OAASiD,GAAeD,GAEpCE,GAAmBA,KAAmB,OAAOlD,CAAK,EAAI2C,GAAkB3C,CAAK,EAAI+C,GAAuB/C,CAAK,CACtH,CACA,IAAIoD,EAAqBD,GAGzB,SAASE,GAAarD,EAAO,CACpB,OAAAA,GAAS,MAAQ,OAAOA,GAAS,QAC1C,CACA,IAAIsD,EAAuBD,GAGvBE,GAAY,kBAChB,SAASC,GAASxD,EAAO,CAChB,OAAA,OAAOA,GAAS,UAAYsD,EAAqBtD,CAAK,GAAKoD,EAAmBpD,CAAK,GAAKuD,EACjG,CACA,IAAIE,EAAmBD,GAGnBE,GAAe,mDACfC,GAAgB,QACpB,SAASC,GAAM5D,EAAO6D,EAAQ,CACxB,GAAApC,EAAgBzB,CAAK,EAChB,MAAA,GAET,IAAI8D,EAAO,OAAO9D,EACd,OAAA8D,GAAQ,UAAYA,GAAQ,UAAYA,GAAQ,WAAa9D,GAAS,MAAQyD,EAAiBzD,CAAK,EAC/F,GAEF2D,GAAc,KAAK3D,CAAK,GAAK,CAAC0D,GAAa,KAAK1D,CAAK,GAAK6D,GAAU,MAAQ7D,KAAS,OAAO6D,CAAM,CAC3G,CACA,IAAIE,GAAgBH,GAGpB,SAASI,GAAShE,EAAO,CACvB,IAAI8D,EAAO,OAAO9D,EAClB,OAAOA,GAAS,OAAS8D,GAAQ,UAAYA,GAAQ,WACvD,CACA,IAAIG,EAAmBD,GAGnBE,GAAW,yBACXC,GAAU,oBACVC,GAAS,6BACTC,GAAW,iBACf,SAASC,GAAWtE,EAAO,CACrB,GAAA,CAACiE,EAAiBjE,CAAK,EAClB,MAAA,GAEL,IAAAwC,EAAMY,EAAmBpD,CAAK,EAClC,OAAOwC,GAAO2B,IAAW3B,GAAO4B,IAAU5B,GAAO0B,IAAY1B,GAAO6B,EACtE,CACA,IAAIE,GAAqBD,GAGrBE,GAAazC,EAAa,oBAAoB,EAC9C0C,EAAqBD,GAGrBE,EAAa,UAAW,CACtB,IAAAC,EAAM,SAAS,KAAKF,GAAsBA,EAAmB,MAAQA,EAAmB,KAAK,UAAY,EAAE,EACxG,OAAAE,EAAM,iBAAmBA,EAAM,EACxC,IACA,SAASC,GAASC,EAAM,CACf,MAAA,CAAC,CAACH,GAAcA,KAAcG,CACvC,CACA,IAAIC,GAAmBF,GAGnBG,GAAY,SAAS,UACrBC,GAAeD,GAAU,SAC7B,SAASE,GAASJ,EAAM,CACtB,GAAIA,GAAQ,KAAM,CACZ,GAAA,CACK,OAAAG,GAAa,KAAKH,CAAI,OACnB,CACZ,CACI,GAAA,CACF,OAAOA,EAAO,QACJ,CACZ,CACF,CACO,MAAA,EACT,CACA,IAAIK,GAAmBD,GAGnBE,GAAe,sBACfC,GAAe,8BACfC,GAAa,SAAS,UACtBC,GAAe,OAAO,UACtBC,GAAgBF,GAAW,SAC3BG,GAAkBF,GAAa,eAC/BG,GAAa,OAAO,IAAMF,GAAc,KAAKC,EAAe,EAAE,QAAQL,GAAc,MAAM,EAAE,QAAQ,yDAA0D,OAAO,EAAI,GAAG,EAChL,SAASO,GAAa1F,EAAO,CAC3B,GAAI,CAACiE,EAAiBjE,CAAK,GAAK8E,GAAiB9E,CAAK,EAC7C,MAAA,GAET,IAAI2F,EAAUpB,GAAmBvE,CAAK,EAAIyF,GAAaL,GACvD,OAAOO,EAAQ,KAAKT,GAAiBlF,CAAK,CAAC,CAC7C,CACA,IAAI4F,GAAuBF,GAG3B,SAASG,GAAShC,EAAQ9D,EAAK,CAC7B,OAAO8D,GAAU,KAAO,OAASA,EAAO9D,CAAG,CAC7C,CACA,IAAI+F,GAAmBD,GAGvB,SAASE,GAAUlC,EAAQ9D,EAAK,CAC1B,IAAAC,EAAQ8F,GAAiBjC,EAAQ9D,CAAG,EACjC,OAAA6F,GAAqB5F,CAAK,EAAIA,EAAQ,MAC/C,CACA,IAAIgG,EAAoBD,GAGpBE,GAAeD,EAAkB,OAAQ,QAAQ,EACjDE,EAAuBD,GAG3B,SAASE,IAAY,CACnB,KAAK,SAAWD,EAAuBA,EAAqB,IAAI,EAAI,CAAA,EACpE,KAAK,KAAO,CACd,CACA,IAAIE,GAAoBD,GAGxB,SAASE,GAAWtG,EAAK,CACnB,IAAA2C,EAAS,KAAK,IAAI3C,CAAG,GAAK,OAAO,KAAK,SAASA,CAAG,EACjD,YAAA,MAAQ2C,EAAS,EAAI,EACnBA,CACT,CACA,IAAI4D,GAAqBD,GAGrBE,GAAiB,4BACjBC,GAAe,OAAO,UACtBC,GAAkBD,GAAa,eACnC,SAASE,GAAQ3G,EAAK,CACpB,IAAI4G,EAAO,KAAK,SAChB,GAAIT,EAAsB,CACpB,IAAAxD,EAASiE,EAAK5G,CAAG,EACd,OAAA2C,IAAW6D,GAAiB,OAAS7D,CAC9C,CACA,OAAO+D,GAAgB,KAAKE,EAAM5G,CAAG,EAAI4G,EAAK5G,CAAG,EAAI,MACvD,CACA,IAAI6G,GAAkBF,GAGlBG,GAAe,OAAO,UACtBC,GAAkBD,GAAa,eACnC,SAASE,GAAQhH,EAAK,CACpB,IAAI4G,EAAO,KAAK,SACT,OAAAT,EAAuBS,EAAK5G,CAAG,IAAM,OAAS+G,GAAgB,KAAKH,EAAM5G,CAAG,CACrF,CACA,IAAIiH,GAAkBD,GAGlBE,GAAkB,4BACtB,SAASC,GAAQnH,EAAKC,EAAO,CAC3B,IAAI2G,EAAO,KAAK,SAChB,YAAK,MAAQ,KAAK,IAAI5G,CAAG,EAAI,EAAI,EACjC4G,EAAK5G,CAAG,EAAImG,GAAwBlG,IAAU,OAASiH,GAAkBjH,EAClE,IACT,CACA,IAAImH,GAAkBD,GAGtB,SAASE,EAAKC,EAAS,CACrB,IAAIC,EAAQ,GAAIC,EAASF,GAAW,KAAO,EAAIA,EAAQ,OAEhD,IADP,KAAK,MAAM,EACJ,EAAEC,EAAQC,GAAQ,CACnB,IAAAC,EAAQH,EAAQC,CAAK,EACzB,KAAK,IAAIE,EAAM,CAAC,EAAGA,EAAM,CAAC,CAAC,CAC7B,CACF,CACAJ,EAAK,UAAU,MAAQhB,GACvBgB,EAAK,UAAU,OAAYd,GAC3Bc,EAAK,UAAU,IAAMR,GACrBQ,EAAK,UAAU,IAAMJ,GACrBI,EAAK,UAAU,IAAMD,GACrB,IAAIM,EAAeL,EAGnB,SAASM,IAAiB,CACxB,KAAK,SAAW,GAChB,KAAK,KAAO,CACd,CACA,IAAIC,GAAyBD,GAG7B,SAASE,GAAG5H,EAAO6H,EAAO,CACxB,OAAO7H,IAAU6H,GAAS7H,IAAUA,GAAS6H,IAAUA,CACzD,CACA,IAAIC,GAAaF,GAGjB,SAASG,GAAaC,EAAOjI,EAAK,CAEhC,QADIwH,EAASS,EAAM,OACZT,KACL,GAAIO,GAAWE,EAAMT,CAAM,EAAE,CAAC,EAAGxH,CAAG,EAC3B,OAAAwH,EAGJ,MAAA,EACT,CACA,IAAIU,EAAuBF,GAGvBG,GAAa,MAAM,UACnBC,GAASD,GAAW,OACxB,SAASE,GAAgBrI,EAAK,CAC5B,IAAI4G,EAAO,KAAK,SAAUW,EAAQW,EAAqBtB,EAAM5G,CAAG,EAChE,GAAIuH,EAAQ,EACH,MAAA,GAEL,IAAAe,EAAY1B,EAAK,OAAS,EAC9B,OAAIW,GAASe,EACX1B,EAAK,IAAI,EAEFwB,GAAA,KAAKxB,EAAMW,EAAO,CAAC,EAE5B,EAAE,KAAK,KACA,EACT,CACA,IAAIgB,GAA0BF,GAG9B,SAASG,GAAaxI,EAAK,CACzB,IAAI4G,EAAO,KAAK,SAAUW,EAAQW,EAAqBtB,EAAM5G,CAAG,EAChE,OAAOuH,EAAQ,EAAI,OAASX,EAAKW,CAAK,EAAE,CAAC,CAC3C,CACA,IAAIkB,GAAuBD,GAG3B,SAASE,GAAa1I,EAAK,CACzB,OAAOkI,EAAqB,KAAK,SAAUlI,CAAG,EAAI,EACpD,CACA,IAAI2I,GAAuBD,GAG3B,SAASE,GAAa5I,EAAKC,EAAO,CAChC,IAAI2G,EAAO,KAAK,SAAUW,EAAQW,EAAqBtB,EAAM5G,CAAG,EAChE,OAAIuH,EAAQ,GACV,EAAE,KAAK,KACPX,EAAK,KAAK,CAAC5G,EAAKC,CAAK,CAAC,GAEjB2G,EAAAW,CAAK,EAAE,CAAC,EAAItH,EAEZ,IACT,CACA,IAAI4I,GAAuBD,GAG3B,SAASE,EAAUxB,EAAS,CAC1B,IAAIC,EAAQ,GAAIC,EAASF,GAAW,KAAO,EAAIA,EAAQ,OAEhD,IADP,KAAK,MAAM,EACJ,EAAEC,EAAQC,GAAQ,CACnB,IAAAC,EAAQH,EAAQC,CAAK,EACzB,KAAK,IAAIE,EAAM,CAAC,EAAGA,EAAM,CAAC,CAAC,CAC7B,CACF,CACAqB,EAAU,UAAU,MAAQlB,GAC5BkB,EAAU,UAAU,OAAYP,GAChCO,EAAU,UAAU,IAAML,GAC1BK,EAAU,UAAU,IAAMH,GAC1BG,EAAU,UAAU,IAAMD,GAC1B,IAAIE,GAAoBD,EAGpBE,GAAO/C,EAAkBjE,EAAc,KAAK,EAC5CiH,GAAcD,GAGlB,SAASE,IAAgB,CACvB,KAAK,KAAO,EACZ,KAAK,SAAW,CACd,KAAQ,IAAIxB,EACZ,IAAO,IAAKuB,IAAeF,IAC3B,OAAU,IAAIrB,CAAa,CAE/B,CACA,IAAIyB,GAAwBD,GAG5B,SAASE,GAAUnJ,EAAO,CACxB,IAAI8D,EAAO,OAAO9D,EACX,OAAA8D,GAAQ,UAAYA,GAAQ,UAAYA,GAAQ,UAAYA,GAAQ,UAAY9D,IAAU,YAAcA,IAAU,IAC3H,CACA,IAAIoJ,GAAoBD,GAGxB,SAASE,GAAWC,EAAKvJ,EAAK,CAC5B,IAAI4G,EAAO2C,EAAI,SACR,OAAAF,GAAkBrJ,CAAG,EAAI4G,EAAK,OAAO5G,GAAO,SAAW,SAAW,MAAM,EAAI4G,EAAK,GAC1F,CACA,IAAI4C,EAAqBF,GAGzB,SAASG,GAAezJ,EAAK,CAC3B,IAAI2C,EAAS6G,EAAmB,KAAMxJ,CAAG,EAAE,OAAUA,CAAG,EACnD,YAAA,MAAQ2C,EAAS,EAAI,EACnBA,CACT,CACA,IAAI+G,GAAyBD,GAG7B,SAASE,GAAY3J,EAAK,CACxB,OAAOwJ,EAAmB,KAAMxJ,CAAG,EAAE,IAAIA,CAAG,CAC9C,CACA,IAAI4J,GAAsBD,GAG1B,SAASE,GAAY7J,EAAK,CACxB,OAAOwJ,EAAmB,KAAMxJ,CAAG,EAAE,IAAIA,CAAG,CAC9C,CACA,IAAI8J,GAAsBD,GAG1B,SAASE,GAAY/J,EAAKC,EAAO,CAC/B,IAAI2G,EAAO4C,EAAmB,KAAMxJ,CAAG,EAAGgK,EAAOpD,EAAK,KACjD,OAAAA,EAAA,IAAI5G,EAAKC,CAAK,EACnB,KAAK,MAAQ2G,EAAK,MAAQoD,EAAO,EAAI,EAC9B,IACT,CACA,IAAIC,GAAsBF,GAG1B,SAASG,EAAS5C,EAAS,CACzB,IAAIC,EAAQ,GAAIC,EAASF,GAAW,KAAO,EAAIA,EAAQ,OAEhD,IADP,KAAK,MAAM,EACJ,EAAEC,EAAQC,GAAQ,CACnB,IAAAC,EAAQH,EAAQC,CAAK,EACzB,KAAK,IAAIE,EAAM,CAAC,EAAGA,EAAM,CAAC,CAAC,CAC7B,CACF,CACAyC,EAAS,UAAU,MAAQf,GAC3Be,EAAS,UAAU,OAAYR,GAC/BQ,EAAS,UAAU,IAAMN,GACzBM,EAAS,UAAU,IAAMJ,GACzBI,EAAS,UAAU,IAAMD,GACzB,IAAIE,EAAmBD,EAGnBE,GAAkB,sBACtB,SAASC,EAAQvF,EAAMwF,EAAU,CAC/B,GAAI,OAAOxF,GAAQ,YAAcwF,GAAY,MAAQ,OAAOA,GAAY,WAChE,MAAA,IAAI,UAAUF,EAAe,EAErC,IAAIG,EAAW,UAAW,CACxB,IAAIC,EAAO,UAAWxK,EAAMsK,EAAWA,EAAS,MAAM,KAAME,CAAI,EAAIA,EAAK,CAAC,EAAGC,EAAQF,EAAS,MAC1F,GAAAE,EAAM,IAAIzK,CAAG,EACR,OAAAyK,EAAM,IAAIzK,CAAG,EAEtB,IAAI2C,EAASmC,EAAK,MAAM,KAAM0F,CAAI,EAClC,OAAAD,EAAS,MAAQE,EAAM,IAAIzK,EAAK2C,CAAM,GAAK8H,EACpC9H,CAAA,EAET,OAAA4H,EAAS,MAAQ,IAAKF,EAAQ,OAASF,GAChCI,CACT,CACAF,EAAQ,MAAQF,EAChB,IAAIO,GAAkBL,EAGlBM,GAAmB,IACvB,SAASC,GAAc9F,EAAM,CAC3B,IAAInC,EAAS+H,GAAgB5F,EAAM,SAAS9E,EAAK,CAC3C,OAAAyK,EAAM,OAASE,IACjBF,EAAM,MAAM,EAEPzK,CAAA,CACR,EACGyK,EAAQ9H,EAAO,MACZ,OAAAA,CACT,CACA,IAAIkI,GAAwBD,GAGxBE,GAAa,mGACbC,GAAe,WACfC,GAAeH,GAAsB,SAASI,EAAQ,CACxD,IAAItI,EAAS,CAAA,EACb,OAAIsI,EAAO,WAAW,CAAC,IAAM,IAC3BtI,EAAO,KAAK,EAAE,EAEhBsI,EAAO,QAAQH,GAAY,SAASI,EAAOC,EAAQC,EAAOC,EAAW,CAC5D1I,EAAA,KAAKyI,EAAQC,EAAU,QAAQN,GAAc,IAAI,EAAII,GAAUD,CAAK,CAAA,CAC5E,EACMvI,CACT,CAAC,EACG2I,GAAuBN,GAG3B,SAASO,GAAStD,EAAOuD,EAAU,CAE1B,QADHjE,EAAQ,GAAIC,EAASS,GAAS,KAAO,EAAIA,EAAM,OAAQtF,EAAS,MAAM6E,CAAM,EACzE,EAAED,EAAQC,GACf7E,EAAO4E,CAAK,EAAIiE,EAASvD,EAAMV,CAAK,EAAGA,EAAOU,CAAK,EAE9C,OAAAtF,CACT,CACA,IAAI8I,GAAmBF,GAGnBG,GAAW,IACXC,EAAczJ,EAAiBA,EAAe,UAAY,OAC1D0J,EAAiBD,EAAcA,EAAY,SAAW,OAC1D,SAASE,EAAa5L,EAAO,CACvB,GAAA,OAAOA,GAAS,SACX,OAAAA,EAEL,GAAAyB,EAAgBzB,CAAK,EAChB,OAAAwL,GAAiBxL,EAAO4L,CAAY,EAAI,GAE7C,GAAAnI,EAAiBzD,CAAK,EACxB,OAAO2L,EAAiBA,EAAe,KAAK3L,CAAK,EAAI,GAEvD,IAAI0C,EAAS1C,EAAQ,GACrB,OAAO0C,GAAU,KAAO,EAAI1C,GAAS,CAACyL,GAAW,KAAO/I,CAC1D,CACA,IAAImJ,GAAuBD,EAG3B,SAASE,GAAS9L,EAAO,CACvB,OAAOA,GAAS,KAAO,GAAK6L,GAAqB7L,CAAK,CACxD,CACA,IAAI+L,GAAmBD,GAGvB,SAASE,GAAShM,EAAO6D,EAAQ,CAC3B,OAAApC,EAAgBzB,CAAK,EAChBA,EAEF+D,GAAc/D,EAAO6D,CAAM,EAAI,CAAC7D,CAAK,EAAIqL,GAAqBU,GAAiB/L,CAAK,CAAC,CAC9F,CACA,IAAIiM,GAAmBD,GAGnBE,GAAY,IAChB,SAASC,GAAMnM,EAAO,CACpB,GAAI,OAAOA,GAAS,UAAYyD,EAAiBzD,CAAK,EAC7C,OAAAA,EAET,IAAI0C,EAAS1C,EAAQ,GACrB,OAAO0C,GAAU,KAAO,EAAI1C,GAAS,CAACkM,GAAY,KAAOxJ,CAC3D,CACA,IAAI0J,GAAgBD,GAGpB,SAASE,GAAQxI,EAAQyI,EAAM,CACtBA,EAAAL,GAAiBK,EAAMzI,CAAM,EAE7B,QADHyD,EAAQ,EAAGC,EAAS+E,EAAK,OACtBzI,GAAU,MAAQyD,EAAQC,GAC/B1D,EAASA,EAAOuI,GAAcE,EAAKhF,GAAO,CAAC,CAAC,EAEvC,OAAAA,GAASA,GAASC,EAAS1D,EAAS,MAC7C,CACA,IAAI0I,GAAkBF,GAGtB,SAASG,GAAI3I,EAAQyI,EAAMG,EAAc,CACvC,IAAI/J,EAASmB,GAAU,KAAO,OAAS0I,GAAgB1I,EAAQyI,CAAI,EAC5D,OAAA5J,IAAW,OAAS+J,EAAe/J,CAC5C,CACA,IAAIgK,GAAcF,GAGlB,SAASG,GAAQ9H,EAAM+H,EAAW,CAChC,OAAO,SAASC,EAAK,CACZ,OAAAhI,EAAK+H,EAAUC,CAAG,CAAC,CAAA,CAE9B,CACA,IAAIC,GAAkBH,GAGlBI,GAAeD,GAAgB,OAAO,eAAgB,MAAM,EAC5DE,GAAuBD,GAGvBE,GAAY,kBACZC,GAAa,SAAS,UACtBC,GAAe,OAAO,UACtBC,GAAgBF,GAAW,SAC3BG,GAAkBF,GAAa,eAC/BG,GAAmBF,GAAc,KAAK,MAAM,EAChD,SAASG,GAAcvN,EAAO,CAC5B,GAAI,CAACsD,EAAqBtD,CAAK,GAAKoD,EAAmBpD,CAAK,GAAKiN,GACxD,MAAA,GAEL,IAAAO,EAAQR,GAAqBhN,CAAK,EACtC,GAAIwN,IAAU,KACL,MAAA,GAET,IAAIC,EAAOJ,GAAgB,KAAKG,EAAO,aAAa,GAAKA,EAAM,YACxD,OAAA,OAAOC,GAAQ,YAAcA,aAAgBA,GAAQL,GAAc,KAAKK,CAAI,GAAKH,EAC1F,CACA,IAAII,GAAwBH,GAG5B,SAASI,GAAK3F,EAAO,CACnB,IAAIT,EAASS,GAAS,KAAO,EAAIA,EAAM,OACvC,OAAOT,EAASS,EAAMT,EAAS,CAAC,EAAI,MACtC,CACA,IAAIqG,GAAeD,GAGfE,MAAyB,QACzBC,OAAmC,QACnCC,GAAoB,OAAO,aAAa,EACxCC,GAAe,CACjB,IAAIC,EAAY7N,EAAM,CACpB,GAAIA,IAAS2N,GACJ,OAAAF,EAAmB,IAAII,CAAU,EACtC,IAAAC,EAAkBJ,GAA6B,IAAIG,CAAU,EAC5DC,IACHA,MAAsB,IACOJ,GAAA,IAAIG,EAAYC,CAAe,GAExD,MAAAC,EAAWD,EAAgB,IAAI9N,CAAI,EACzC,GAAI+N,IAAa,OACR,OAAAA,EACH,MAAAC,EAAOP,EAAmB,IAAII,CAAU,EACxCI,EAAaC,GAAQ,CAAE,KAAMF,EAAK,KAAM,KAAM,CAAC,GAAGA,EAAK,KAAMhO,CAAI,CAAG,CAAA,EAC1D,OAAA8N,EAAA,IAAI9N,EAAMiO,CAAU,EAC7BA,CACT,CACF,EACIE,EAAkBC,GACPA,EAAET,EAAiB,EAG9BhN,EAAmByN,GAAM,CAC3B,KAAM,CAAE,KAAMC,EAAO,KAAAnC,CAAK,EAAIiC,EAAeC,CAAC,EACvC,MAAA,CAAE,KAAMC,EAAO,KAAAnC,EACxB,EACA,SAASgC,GAAQ/D,EAAM,CACjB,IAAAmE,EACJ,MAAMN,EAAO,CACX,KAAM7D,EAAK,KACX,MAAOmE,EAAKnE,EAAK,OAAS,KAAOmE,EAAK,CAAC,CAAA,EAEnCT,EAAa,CAAA,EACA,OAAAJ,EAAA,IAAII,EAAYG,CAAI,EAChC,IAAI,MAAMH,EAAYD,EAAY,CAC3C,CACA,IAAI5M,EAAkBkN,GAClBtN,EAAawN,GACRA,GAAK,CAAC,CAACD,EAAeC,CAAC,EAIhC,SAASG,GAAWC,EAAQtC,EAAMuC,EAAS,CACzC,OAAIvC,EAAK,SAAW,EACXuC,EAAQD,CAAM,EAChBE,EAAKF,EAAQtC,EAAMuC,CAAO,CACnC,CACA,IAAIC,EAAO,CAACC,EAAGzC,EAAMuC,IAAY,CAC3B,GAAAvC,EAAK,SAAW,EAClB,OAAOuC,EAAQE,CAAC,EAEd,GAAA,MAAM,QAAQA,CAAC,EAAG,CACpB,GAAI,CAACzH,EAAO,GAAG0H,CAAU,EAAI1C,EAC7BhF,EAAQ,SAAS,OAAOA,CAAK,EAAG,EAAE,EAC9B,MAAMA,CAAK,IACLA,EAAA,GACJ,MAAA2H,EAASF,EAAEzH,CAAK,EAChB4H,EAASJ,EAAKG,EAAQD,EAAYH,CAAO,EAC/C,GAAII,IAAWC,EACN,OAAAH,EACH,MAAAI,EAAO,CAAC,GAAGJ,CAAC,EACb,OAAAI,EAAA,OAAO7H,EAAO,EAAG4H,CAAM,EACrBC,CACE,SAAA,OAAOJ,GAAM,UAAYA,IAAM,KAAM,CAC9C,KAAM,CAAChP,EAAK,GAAGiP,CAAU,EAAI1C,EACvB2C,EAASF,EAAEhP,CAAG,EACdmP,EAASJ,EAAKG,EAAQD,EAAYH,CAAO,EAC/C,OAAII,IAAWC,EACNH,EACI1O,GAAcJ,GAAe,CAAI,EAAA8O,CAAC,EAAG,CAAE,CAAChP,CAAG,EAAGmP,CAAA,CAAQ,CAC5D,KACF,CACL,KAAM,CAACnP,EAAK,GAAGiP,CAAU,EAAI1C,EACtB,MAAA,CAAE,CAACvM,CAAG,EAAG+O,EAAK,OAAQE,EAAYH,CAAO,EAClD,CACF,EAGIO,GAAQ,KAAM,CAChB,aAAc,CACZ,KAAK,MAAQ,MACf,CACA,MAAO,CACE,OAAA,KAAK,OAAS,KAAK,MAAM,IAClC,CACA,KAAM,CACJ,MAAMC,EAAO,KAAK,MAClB,GAAKA,EAGL,YAAK,MAAQA,EAAK,KACXA,EAAK,IACd,CACA,KAAK1I,EAAM,CACT,MAAM2I,EAAO,CAAE,KAAM,KAAK,MAAO,KAAA3I,CAAK,EACtC,KAAK,MAAQ2I,CACf,CACF,EAGA,SAASrO,EAAQsO,EAAG,CAClB,MAAO,CAAC,EAAEA,GAAKA,EAAE,SAAWA,EAAE,UAAY,GAC5C,CAGA,SAASC,IAAkB,CACzB,MAAMC,EAAO,IAAM,CAAA,EAEbC,EAAQ,IAAIN,GACZO,EAAgBF,EAiCf,MAAA,CACL,KAAM,+BACN,0BAxBiC,IAAM,CACvCC,EAAM,KAAKC,CAAa,CAAA,EAwBxB,yBAtBgC,IAAM,CAClCD,EAAM,SAAWC,GAKnBD,EAAM,IAAI,CACZ,EAgBA,sBAd8BH,GAAM,CAC9B,MAAAK,EAAoBF,EAAM,OAC5BE,GACFA,EAAkBL,CAAC,EAErBG,EAAM,KAAKC,CAAa,CAAA,EAUxB,oBAR4BE,GAAO,CACnCH,EAAM,IAAI,CAAA,EAQV,cAtCsBI,GAAc,CACpCJ,EAAM,KAAKI,CAAS,CAAA,EAsCpB,aApCqBA,GAAc,CAEnC,GADiBJ,EAAM,SACNI,EACT,MAAA,IAAI,MAAM,6CAA6C,EAE/DJ,EAAM,IAAI,CAAA,CA+BI,CAElB,CACA,SAASK,IAAqB,CAC5B,MAAMC,EAAU,6CACVvB,EAAQ,OAAO,OAAW,IAAc,OAAS,OAAO9M,EAAW,IAAcA,EAAS,GAChG,GAAI8M,EAAO,CACH,MAAAwB,EAAoBxB,EAAMuB,CAAO,EACvC,GAAIC,GAAqB,OAAOA,GAAsB,UAAYA,EAAkB,OAAS,+BACpF,OAAAA,EACF,CACL,MAAMC,EAAYV,KAClB,OAAAf,EAAMuB,CAAO,EAAIE,EACVA,CACT,CAAA,KAEA,QAAOV,GAAgB,CAE3B,CACA,GAAI,CACF,0BAAAW,EACA,yBAAAC,EACA,oBAAAC,GACA,sBAAAC,GACA,cAAAC,GACA,aAAAC,EACF,EAAIT,GAAmB,EAGnBU,GAAS,IAAM,CACnB,EACIC,GAAY,KAAM,CACpB,YAAYC,EAAKC,EAAgB,CAC/B,KAAK,IAAMD,EACX,KAAK,eAAiBC,EACtB,KAAK,0BAA4B,GACjC,KAAK,SAAW,GACX,KAAA,2BAA6B,IAC7B,KAAA,gBAAkB,IAClB,KAAA,kBAAoB,IACpB,KAAA,uBAAyB,IACzB,KAAA,OAAS,IAAIC,GAAS,IAAI,EAC/B,KAAK,WAAa,OAClB,KAAK,oBAAsB,GACtB,KAAA,6BAAgCC,GAAU,CACxC,KAAA,mBAAmB,IAAIA,CAAK,EACjC,KAAK,aAAa,CAAA,EAET,UAAAvB,KAAK,KAAK,cACjBA,EAAA,cAAc,KAAK,4BAA4B,EAEzBY,IAC1B,KAAK,SAAS,EACWC,GAC3B,CACA,IAAI,eAAgB,CACX,OAAA,KAAK,YAAY,KAAO,CACjC,CACA,gBAAgBb,EAAG,CACZ,KAAA,YAAY,OAAOA,CAAC,CAC3B,CACA,aAAaA,EAAG,CACT,KAAA,YAAY,IAAIA,CAAC,CACxB,CACA,SAAU,CACG,UAAAA,KAAK,KAAK,cACjBA,EAAA,iBAAiB,KAAK,4BAA4B,EAEtDwB,GAAkB,KAAK,MAAM,CAC/B,CACA,UAAW,CACL,GAAA,CAAC,KAAK,SAAU,CACZ,MAAAC,EAAW,KAAK,eACtB,KAAK,WAAaA,EAClB,KAAK,SAAW,GAChB,KAAK,0BAA4B,GACjC,KAAK,oBAAsB,EAC7B,CACA,OAAO,KAAK,UACd,CACA,cAAe,CACT,IAAAhR,EACA,GAAA,CAAC,KAAK,qBACJ,KAAK,mBAAmB,KAAO,EAAG,CACpC,IAAIiR,EAA6B,GACPd,IACf,UAAAe,KAAO,KAAK,mBACrB,GAAI,KAAK,uBAAuB,IAAIA,CAAG,IAAMA,EAAI,WAAY,CAC9BD,EAAA,GAC7B,KACF,CAIF,GAFyBb,IACzB,KAAK,mBAAmB,QACpB,CAACa,EACH,OAAO,KAAK,UAEhB,CAEI,MAAAE,MAAc,IACpB,KAAK,uBAAuB,QACtB,MAAArB,EAAasB,GAAgB,CACjCD,EAAQ,IAAIC,CAAW,EACvB,KAAK,eAAeA,CAAW,CAAA,EAEjCb,GAAcT,CAAS,EACRuB,EAAA,KAAK,KAAK,MAAM,EAC3B,GAAA,CACFrR,EAAQ,KAAK,YACNsR,EAAO,CACd,QAAQ,MAAMA,CAAK,CAAA,QACnB,CACsBD,EAAe,QACf,KAAK,QACzB,QAAQ,KAAK,kDAAkD,CAEnE,CACAb,GAAaV,CAAS,EACX,UAAAoB,KAAO,KAAK,cAChBC,EAAQ,IAAID,CAAG,GAClB,KAAK,kBAAkBA,CAAG,EAG9B,KAAK,cAAgBC,EACKhB,IAC1B,UAAWe,KAAOC,EAChB,KAAK,uBAAuB,IAAID,EAAKA,EAAI,UAAU,EAE5B,OAAAd,IAClBpQ,CACT,CACA,YAAa,CACX,KAAK,oBAAsB,GAC3B,KAAK,aAAa,CACpB,CACA,cAAe,CACb,GAAI,MAAK,0BAET,MAAK,0BAA4B,GACjC,KAAK,SAAW,GACL,UAAAuR,KAAa,KAAK,YAC3BA,EAAU,KAAK,cAAc,EAEjC,CACA,eAAehC,EAAG,CACZ,KAAK,cAAc,IAAIA,CAAC,IAEvB,KAAA,cAAc,IAAIA,CAAC,EACtBA,EAAA,cAAc,KAAK,4BAA4B,EACnD,CACA,kBAAkBA,EAAG,CACd,KAAK,cAAc,IAAIA,CAAC,IAExB,KAAA,cAAc,OAAOA,CAAC,EACzBA,EAAA,iBAAiB,KAAK,4BAA4B,EACtD,CACF,EACIiC,GAAc,CAAA,EACdC,GAAgB,KAAM,CACxB,YAAYd,EAAK,CACf,KAAK,IAAMA,EACX,KAAK,QAAU,GACf,KAAK,OAAS,CACZ,IAAK,GACL,OAAQ,MAAA,CAEZ,CACA,IAAI,OAAQ,CACV,OAAO,KAAK,OAAO,GACrB,CACA,SAASe,EAAQC,EAAUC,EAAY,GAAO,CAC5C,MAAML,EAAY,IAAM,CACtBG,EAAO,iBAAiBG,CAAO,CAAA,EAEjC,IAAIC,EAAYN,GAChB,MAAMK,EAAU,IAAM,CACd,MAAAb,EAAW,KAAK,WAClBA,IAAac,IAELA,EAAAd,EACZW,EAASX,CAAQ,EAAA,EAEnB,YAAK,cAAcO,CAAS,EACxBK,IACFE,EAAY,KAAK,WACjBH,EAASG,CAAS,GAEA,IAAM,CACxB,KAAK,iBAAiBP,CAAS,EAC/BG,EAAO,kBAAkBG,CAAO,EAChCH,EAAO,YAAYG,CAAO,CAAA,CAG9B,CACA,QAAQE,EAAU,CAChB,MAAMC,EAAQ,IAAM,CAClB,KAAK,iBAAiBC,CAAE,CAAA,EAEpBA,EAAK,IAAMF,IACjB,YAAK,cAAcE,CAAE,EACdD,CACT,CACA,SAAU,CACD,OAAA,KAAK,QAAQ,IAAM,CAAA,CACzB,CACH,CACA,cAAczC,EAAG,CACV,KAAK,OAAO,KACf,KAAK,OAAO,EAET,KAAA,OAAO,OAAO,aAAaA,CAAC,CACnC,CACA,QAAS,CACP,MAAM2C,EAAY,IAAIxB,GAAU,KAAK,IAAK,IAAI,EAC9C,KAAK,OAAS,CACZ,IAAK,GACL,OAAQwB,CAAA,CAEZ,CACA,iBAAiB3C,EAAG,CAClB,MAAMX,EAAS,KAAK,OAChB,GAAA,CAACA,EAAO,IACV,OAEF,MAAMuD,EAASvD,EAAO,OACtBuD,EAAO,gBAAgB5C,CAAC,EACnB4C,EAAO,gBACV,KAAK,OAAS,CAAE,IAAK,GAAO,OAAQ,QACpCA,EAAO,QAAQ,EAEnB,CACA,UAAW,CACT7B,GAAsB,IAAI,EAC1B,MAAM1B,EAAS,KAAK,OAChB,IAAAwD,EACJ,OAAIxD,EAAO,IACFwD,EAAAxD,EAAO,OAAO,WAEdwD,EAAAC,GAAmB,KAAK,GAAG,EAEpChC,GAAoB,IAAI,EACjB+B,CACT,CACF,EACIvB,GAAW,KAAM,CACnB,YAAYyB,EAAY,CACtB,KAAK,WAAaA,EACb,KAAA,UAAY,IACjB,KAAK,aAAe,GACpB,KAAK,KAAO,GACP,KAAA,YAAc,IACd,KAAA,UAAY,GACnB,CACA,IAAIvS,EAAKwS,EAAc,CACrB,IAAIC,EAAO,KAAK,MAAM,IAAIzS,CAAG,EAC7B,GAAIyS,IAAS,OACJ,OAAAA,EACF,CACL,MAAMC,EAAO,CACX,QAASF,CAAA,EAEN,YAAA,MAAM,IAAIxS,EAAK0S,CAAI,EACjBA,CACT,CACF,CACA,OAAO1S,EAAK2S,EAAIC,EAAM,CACpB,IAAIC,EAAU,KAAK,QAAQ,IAAI7S,CAAG,EAC9B6S,IAAY,SACJA,EAAA,CACR,QAASnC,GACT,KAAM,MAAA,EAEH,KAAA,QAAQ,IAAI1Q,EAAK6S,CAAO,GAE3BC,GAAgBD,EAAQ,KAAMD,CAAI,IACpCC,EAAQ,QAAQ,EACUzC,IAC1ByC,EAAQ,QAAUE,EAAUJ,EAAIjC,EAAM,EAAE,MACfL,IACzBwC,EAAQ,KAAOD,EAEnB,CACA,KAAK5S,EAAKkS,EAAIU,EAAM,CAClB,IAAII,EAAQ,KAAK,MAAM,IAAIhT,CAAG,EAC9B,OAAIgT,IAAU,SACJA,EAAA,CACN,YAAa,KACb,KAAM,MAAA,EAEH,KAAA,MAAM,IAAIhT,EAAKgT,CAAK,GAEvBF,GAAgBE,EAAM,KAAMJ,CAAI,IACRxC,IAC1B4C,EAAM,YAAcD,EAAUb,EAAI,MAAM,EAAE,MACjB7B,IACzB2C,EAAM,KAAOJ,GAERI,EAAM,WACf,CACA,MAAMhT,EAAKwS,EAAc,CACjB,KAAA,CAAE,MAAAvS,EAAO,SAAAgT,CAAS,EAAI,KAAK,KAAK,SAAWjT,EAAK,IAAM,CACpD,MAAAkT,EAAS,CAAE,QAASV,GAK1B,MAAO,CAAE,MAAOU,EAAQ,SAJLjC,GAAa,CAC9BiC,EAAO,QAAUjC,EACjB,KAAK,WAAW,YAAW,CAEe,CAC9C,EAAG,CAAE,CAAA,EACE,MAAA,CAAChR,EAAM,QAASgT,CAAQ,CACjC,CACA,IAAIjT,EAAK,CACP,OAAK,KAAK,KAAKA,CAAG,IAChB,KAAK,KAAKA,CAAG,EAAI,IAAI8Q,GAAS,KAAK,UAAU,GAExC,KAAK,KAAK9Q,CAAG,CACtB,CACA,gBAAiB,CACf,UAAW6S,KAAW,KAAK,QAAQ,OAAA,EACvBE,EAAAF,EAAQ,QAAS,MAAM,EAEnC,KAAK,QAAQ,OACf,CACA,OAAOM,EAAWC,EAAW,CAC3B,MAAMC,EAAY,gBACb,YAAA,OAAOA,EAAW,IACPF,EAAU,IAAM,CAC5B,KAAK,WAAW,YAAW,CAC5B,EAEA,CAACA,CAAS,CAAC,EACPC,EAAU,CACnB,CACF,EACA,SAASpC,GAAkBsC,EAAQ,CACjC,UAAWC,KAAQ,OAAO,OAAOD,EAAO,IAAI,EAC1CtC,GAAkBuC,CAAI,EAExBD,EAAO,eAAe,CACxB,CACA,SAASP,EAAUb,EAAIsB,EAA0B,CAC3C,GAAA,CACF,MAAO,CAAE,MAAOtB,EAAG,EAAG,GAAI,EAAK,QACxBX,EAAO,CACd,kBAAW,UAA4B,CAC/B,MAAAA,CAAA,CACP,EACM,CAAE,MAAOiC,EAA0B,GAAI,EAAM,CACtD,CACF,CACA,IAAIlC,EAAiB,IAAIjC,GACzB,SAASoE,GAAIzT,EAAKwS,EAAc,CACxB,MAAAc,EAAShC,EAAe,OAC9B,GAAI,CAACgC,EACG,MAAA,IAAI,MAAM,kDAAkD,EAE7D,OAAAA,EAAO,IAAItT,EAAKwS,CAAY,CACrC,CACA,SAASkB,GAAO1T,EAAK2S,EAAIC,EAAM,CACvB,MAAAU,EAAShC,EAAe,OAC9B,GAAI,CAACgC,EACG,MAAA,IAAI,MAAM,qDAAqD,EAEvE,OAAOA,EAAO,OAAOtT,EAAK2S,EAAIC,CAAI,CACpC,CACA,SAASE,GAAgBa,EAASvC,EAAS,CACrC,GAAAuC,IAAY,QAAUvC,IAAY,OAC7B,MAAA,GAET,MAAMwC,EAAMD,EAAQ,OACpB,GAAIC,IAAQxC,EAAQ,OACX,MAAA,GACT,QAASyC,EAAI,EAAGA,EAAID,EAAKC,IACvB,GAAIF,EAAQE,CAAC,IAAMzC,EAAQyC,CAAC,EACnB,MAAA,GAEJ,MAAA,EACT,CACA,SAASC,GAAK9T,EAAKkS,EAAIU,EAAM,CACrB,MAAAU,EAAShC,EAAe,OAC9B,GAAI,CAACgC,EACG,MAAA,IAAI,MAAM,mDAAmD,EAErE,OAAOA,EAAO,KAAKtT,EAAKkS,EAAIU,CAAI,CAClC,CACA,SAASmB,GAAM/T,EAAKwS,EAAc,CAC1B,MAAAc,EAAShC,EAAe,OAC9B,GAAI,CAACgC,EACG,MAAA,IAAI,MAAM,oDAAoD,EAE/D,OAAAA,EAAO,MAAMtT,EAAKwS,CAAY,CACvC,CACA,SAASwB,IAAc,CAErB,GAAI,CADW1C,EAAe,OAEtB,MAAA,IAAI,MAAM,0DAA0D,CAE9E,CACA,SAAS2C,GAAMjU,EAAKkS,EAAI,CAChB,MAAAgC,EAAc5C,EAAe,OACnC,GAAI,CAAC4C,EACG,MAAA,IAAI,MAAM,oDAAoD,EAEhE,MAAAC,EAAWD,EAAY,IAAIlU,CAAG,EACpCsR,EAAe,KAAK6C,CAAQ,EAC5B,MAAMC,EAAMrB,EAAUb,EAAI,MAAM,EAAE,MAClC,OAAAZ,EAAe,IAAI,EACZ8C,CACT,CACA,SAASC,GAAIrU,EAAKkS,EAAIU,EAAM,CACnB,OAAAkB,GAAK9T,EAAK,IAAMsU,EAAMpC,CAAE,EAAGU,CAAI,EAAE,UAC1C,CACA,SAAS2B,IAAU,CACV,MAAA,CAAC,CAACjD,EAAe,MAC1B,CACA,SAASkD,GAAOrB,EAAWC,EAAW,CAC9B,MAAAE,EAAShC,EAAe,OAC9B,GAAI,CAACgC,EACG,MAAA,IAAI,MAAM,qDAAqD,EAEhE,OAAAA,EAAO,OAAOH,EAAWC,CAAS,CAC3C,CACA,IAAIkB,EAASpC,GACJ,IAAIR,GAAcQ,CAAE,EAEzBuC,GAAY,KAAM,CACpB,OAAOzU,EAAK2S,EAAIC,EAAM,CACpB,QAAQ,KAAK,4CAA4C,CAC3D,CACA,KAAK5S,EAAKkS,EAAIU,EAAM,CAClB,OAAOV,EAAG,CACZ,CACA,MAAMlS,EAAKwS,EAAc,CAChB,MAAA,CAACA,EAAc,IAAM,CAAA,CAC3B,CACH,CACA,IAAIxS,EAAKwS,EAAc,CACd,MAAA,CAAE,QAASA,EACpB,CACA,IAAIxS,EAAK,CACP,OAAO,IAAIyU,EACb,CACA,OAAOtB,EAAWC,EAAW,CAC3B,OAAOA,EAAU,CACnB,CACF,EACA,SAASd,GAAmBJ,EAAI,CACxB,MAAAoB,EAAS,IAAImB,GACnBnD,EAAe,KAAKgC,CAAM,EACtB,IAAArT,EACA,GAAA,CACFA,EAAQiS,EAAG,QACJX,EAAO,CACd,QAAQ,MAAMA,CAAK,CAAA,QACnB,CACsBD,EAAe,QACfgC,GACpB,QAAQ,KAAK,kDAAkD,CAEnE,CACO,OAAArT,CACT,CACAqU,EAAM,IAAMb,GACZa,EAAM,OAASZ,GACfY,EAAM,KAAOR,GACbQ,EAAM,YAAcN,GACpBM,EAAM,MAAQP,GACdO,EAAM,MAAQL,GACdK,EAAM,IAAMD,GACZC,EAAM,QAAUC,GAChBD,EAAM,OAASE,GACf,IAAIjT,EAAgB+S,EAGhBI,IACH,SAASC,EAAa,CACrBA,EAAYA,EAAY,KAAU,CAAC,EAAI,OACvCA,EAAYA,EAAY,MAAW,CAAC,EAAI,QACxCA,EAAYA,EAAY,MAAW,CAAC,EAAI,OACvC,GAAAD,KAAeA,GAAa,CAAG,EAAA,EAClC,IAAIE,EAAkBC,GAChB,MAAM,QAAQA,CAAC,EACV,EACLlH,GAAsBkH,CAAC,EAClB,EACF,EAELC,GAAgB,CAACD,EAAG7U,EAAK+U,EAAQH,EAAeC,CAAC,IAC/CE,IAAU,GAAK,OAAO/U,GAAQ,UAEvB+U,IAAU,GAAKC,GAAkBhV,CAAG,EADtC6U,EAAE7U,CAAG,EAIL,OAGPgV,GAAqBhV,GAAQ,CAC/B,MAAMiV,EAAW,OAAOjV,GAAQ,SAAWA,EAAM,SAASA,EAAK,EAAE,EAC1D,MAAA,CAAC,MAAMiV,CAAQ,GAAKA,GAAY,GAAKA,EAAW,MAAaA,EAAW,KAAOA,CACxF,EACIC,GAAQ,KAAM,CAChB,YAAYC,EAASC,EAAO,CAC1B,KAAK,QAAUD,EACf,KAAK,MAAQC,EACR,KAAA,aAAe,IACf,KAAA,4BAA8B,GACrC,CACA,0BAA0BzC,EAAI,CACvB,KAAA,wBAAwB,IAAIA,CAAE,CACrC,CACA,6BAA6BA,EAAI,CAC1B,KAAA,wBAAwB,OAAOA,CAAE,EACtC,KAAK,YAAY,CACnB,CACA,YAAY3S,EAAK,CACV,KAAA,SAAS,OAAOA,CAAG,EACxB,KAAK,YAAY,CACnB,CACA,SAASA,EAAK,CACL,OAAA,KAAK,SAAS,IAAIA,CAAG,CAC9B,CACA,iBAAiBA,EAAK,CACpB,IAAIqV,EAAQ,KAAK,SAAS,IAAIrV,CAAG,EACjC,OAAKqV,IACKA,EAAAA,EAAQ,IAAIH,GAAM,KAAM,KAAK,MAAM,OAAO,CAAClV,CAAG,CAAC,CAAC,EACnD,KAAA,SAAS,IAAIA,EAAKqV,CAAK,GAEvBA,CACT,CACA,aAAc,CACR,KAAK,wBAAwB,KAAO,GAEpC,KAAK,SAAS,KAAO,GAErB,KAAK,SACP,KAAK,QAAQ,YAAYxH,GAAa,KAAK,KAAK,CAAC,CAErD,CACF,EACIhN,GAAO,KAAM,CACf,YAAYyU,EAAc,CACxB,KAAK,2BAA6B,GAC7B,KAAA,QAAUjU,EAAgB,CAAE,KAAM,KAAM,KAAM,GAAI,EACvD,KAAK,MAAQ,KAAK,eAAe,KAAK,OAAO,EACxC,KAAA,sBAAwB,CAACkU,EAAU5C,IAAO,CAC7C,KAAM,CAAE,KAAApG,CAAA,EAASvL,EAAgBuU,CAAQ,EACnCjC,EAAS,KAAK,yBAAyB/G,CAAI,EAC1C,OAAA+G,EAAA,wBAAwB,IAAIX,CAAE,EACjB,IAAM,CACjBW,EAAA,wBAAwB,OAAOX,CAAE,CAAA,CAEnC,EAET,KAAK,cAAgB2C,EACrB,KAAK,WAAa,IAAIJ,GAAM,OAAQ,CAAE,CAAA,CACxC,CACA,IAAIM,EAAU,CACZ,MAAMC,EAAW,KAAK,cACtB,KAAK,cAAgBD,EACrB,KAAK,cAAc,KAAK,WAAYC,EAAUD,CAAQ,CACxD,CACA,KAAM,CACJ,OAAO,KAAK,aACd,CACA,aAAaE,EAAa,CACxB,MAAMH,EAAWtU,EAAUyU,CAAW,EAAIA,EAAcA,EAAY,KAAK,OAAO,EAC1EnJ,EAAOvL,EAAgBuU,CAAQ,EAAE,KAChC,OAAA,KAAK,OAAOhJ,CAAI,CACzB,CACA,OAAOA,EAAM,CACJ,OAAAA,EAAK,SAAW,EAAI,KAAK,MAAQI,GAAY,KAAK,IAAI,EAAGJ,CAAI,CACtE,CACA,OAAO2F,EAAI,CACT,KAAK,IAAIA,EAAG,KAAK,IAAA,CAAK,CAAC,CACzB,CACA,gBAAgBwD,EAAa5G,EAAS,CACpC,MAAMyG,EAAWtU,EAAUyU,CAAW,EAAIA,EAAcA,EAAY,KAAK,OAAO,EAC1EnJ,EAAOvL,EAAgBuU,CAAQ,EAAE,KACjCC,EAAW5G,GAAW,KAAK,IAAI,EAAGrC,EAAMuC,CAAO,EACrD,KAAK,IAAI0G,CAAQ,CACnB,CACA,aAAaE,EAAarD,EAAM,CACzB,KAAA,gBAAgBqD,EAAa,IAAMrD,CAAI,CAC9C,CACA,cAAciB,EAAQmC,EAAUD,EAAU,CACxC,GAAIC,IAAaD,EACf,OACS,UAAA7C,KAAMW,EAAO,wBACtBX,EAAG6C,CAAQ,EAET,GAAAlC,EAAO,SAAS,OAAS,EAC3B,OACI,MAAAqC,EAAef,EAAea,CAAQ,EACtCG,EAAehB,EAAeY,CAAQ,EACxC,GAAA,EAAAG,IAAiB,GAAKA,IAAiBC,GAE3C,SAAW,CAACC,EAAUC,CAAU,IAAKxC,EAAO,SAAU,CACpD,MAAMyC,EAAcjB,GAAcW,EAAUI,EAAUF,CAAY,EAC5DK,GAAclB,GAAcU,EAAUK,EAAUD,CAAY,EAC7D,KAAA,cAAcE,EAAYC,EAAaC,EAAW,CACzD,CACF,CACA,yBAAyBzJ,EAAM,CAC7B,IAAI0J,EAAW,KAAK,WACpB,UAAWC,KAAU3J,EACR0J,EAAAA,EAAS,iBAAiBC,CAAM,EAEtC,OAAAD,CACT,CACA,eAAeV,EAAU,CACvB,KAAM,CAAE,KAAAhJ,CAAA,EAASvL,EAAgBuU,CAAQ,EACnCpC,EAAavB,GAAa,KAAK,sBAAsB2D,EAAU3D,CAAQ,EACvEwB,EAAY,IAAM,KAAK,OAAO7G,CAAI,EACxC,OAAOhL,EAAc,IACZA,EAAc,OAAO4R,EAAWC,CAAS,CACjD,CACH,CACF,EAGI+C,OAA2B,QAC/B,SAASC,GAAyB/D,EAAM,CACtC,OAAO,OAAOA,GAAS,UAAYA,IAAS,MAAQA,EAAK,6BAAkC,EAC7F,CACA,IAAI/Q,EAAkBiU,GAAa,CAC3B,MAAAlH,EAAOG,EAAe+G,CAAQ,EAChC,IAAAc,EAAgBF,GAAqB,IAAI9H,CAAI,EACjD,GAAI,CAACgI,EAAe,CAClB,MAAM3H,EAAQL,EAAK,KACf,GAAA,CAAC+H,GAAyB1H,CAAK,EAC3B,MAAA,IAAI,MAAM,sFAAsF,EAExF2H,EAAA3H,EAAM,eAAe6G,CAAQ,EACxBY,GAAA,IAAI9H,EAAMgI,CAAa,CAC9C,CACO,OAAAA,CACT,EAGI7U,GAAO8U,GACLrV,EAAUqV,CAAK,EACVhV,EAAegV,CAAK,EAAE,WACpBpV,EAAQoV,CAAK,EACfA,EAAM,WAENA,EAKX,SAAUnV,GAAqBoV,EAAgB,CACzC,IAAA/G,EACA,GAAAvO,EAAUsV,CAAc,EAC1B/G,EAAIlO,EAAeiV,CAAc,UACxBrV,EAAQqV,CAAc,EAC3B/G,EAAA+G,MAEE,OAAA,IAAI,MAAM,wCAAwC,EAE1D,IAAIC,EAA6B,EAC3B,MAAAvE,EAAQzC,EAAE,QAAQ,IAAM,CAC5BgH,GAAA,CACD,EACG,GAAA,CACF,OAAa,CACX,MAAMC,EAAQD,EACeA,EAAA,EAC7B,KAAM,CAAE,MAAOhH,EAAE,WAAY,MAAAiH,CAAM,CACrC,CAAA,QACA,CACMxE,GACR,CACF,CAGA,IAAIyE,GAAmC,GAAK,EACxC3V,GAAS,KAAM,CACjB,YAAY4V,EAAO,CACjB,KAAK,MAAQA,EACb,KAAK,SAAW,GAChB,KAAK,SAAW,GAChB,KAAK,sBAAwB,EAC7B,KAAK,QAAU,EACV,KAAA,gCAAkC,IAClC,KAAA,0BAA4B,IACjC,KAAK,mBAAqB,CAC5B,CACA,IAAI,SAAU,CACZ,OAAO,KAAK,QACd,CACA,iBAAiBzE,EAAI,CACd,KAAA,4BAA4B,IAAIA,CAAE,EACnC,KAAK,UACP,KAAK,UAAU,CAEnB,CACA,WAAWA,EAAI,CACR,KAAA,sBAAsB,IAAIA,CAAE,EAC7B,KAAK,UACP,KAAK,UAAU,CAEnB,CACA,kBAAkBA,EAAI,CACf,KAAA,4BAA4B,OAAOA,CAAE,CAC5C,CACA,YAAYA,EAAI,CACT,KAAA,sBAAsB,OAAOA,CAAE,CACtC,CACA,IAAI,MAAO,CACT,OAAI,KAAK,SACA,KAAK,mBAEL,YAAY,KACvB,CACA,WAAY,CACV,IAAIvD,EAAIiI,EACH,KAAK,WAEV,KAAK,SAAW,IACfA,GAAMjI,EAAK,KAAK,QAAU,KAAO,OAASA,EAAG,WAAa,MAAgBiI,EAAG,KAAKjI,CAAE,EACvF,CACA,YAAa,CACX,IAAIA,EAAIiI,EACJ,KAAK,WAET,KAAK,SAAW,GAChB,KAAK,sBAAwB,GAC5BA,GAAMjI,EAAK,KAAK,QAAU,KAAO,OAASA,EAAG,YAAc,MAAgBiI,EAAG,KAAKjI,CAAE,EACxF,CACA,KAAKkI,EAAI,YAAY,MAAO,CAOtB,GADC,KAAA,UACD,CAAC,KAAK,UACJ,KAAK,sBAAsB,OAAS,GAAK,KAAK,4BAA4B,OAAS,IAChF,KAAA,wBACD,KAAK,uBAAyBH,IAAkC,CAClE,KAAK,WAAW,EAChB,MACF,CAGJ,KAAK,SAAW,GAChB,KAAK,mBAAqBG,EACf,UAAAhC,KAAK,KAAK,sBACd,KAAA,4BAA4B,IAAIA,CAAC,EAExC,KAAK,sBAAsB,QAC3B,KAAK,MAAM,CAAC,EACZ,KAAK,SAAW,EAClB,CACA,MAAMiC,EAAiB,CACrB,MAAMC,EAAO,KAAK,KAIlB,GAHID,EAAkB,IACpB,QAAQ,KAAK,gCAAgC,EAE3CA,EAAkB,IACd,MAAA,IAAI,MAAM,qCAAqC,EAEvD,MAAME,EAAS,KAAK,4BACf,KAAA,gCAAkC,IACvC,UAAW9E,KAAM8E,EACf9E,EAAG6E,CAAI,EAEL,GAAA,KAAK,4BAA4B,KAAO,EACnC,OAAA,KAAK,MAAMD,EAAkB,CAAC,CAEzC,CACF,EAGA,SAAU1V,GAAYmV,EAAgB,CAChC,IAAA/G,EACA,GAAAvO,EAAUsV,CAAc,EAC1B/G,EAAIlO,EAAeiV,CAAc,UACxBrV,EAAQqV,CAAc,EAC3B/G,EAAA+G,MAEE,OAAA,IAAI,MAAM,wCAAwC,EAEpD,MAAA5E,EAAS,IAAI5Q,GACbkR,EAAQzC,EAAE,SAASmC,EAASkD,GAAM,CAAA,CACvC,EACG,GAAA,CACF,OACElD,EAAO,KAAK,EACZ,MAAMnC,EAAE,UACV,QACA,CACMyC,GACR,CACF,CAGA,IAAInR,GAAe,KAAM,CACvB,YAAYmW,EAAgB,CAC1B,KAAK,2BAA6B,GAC7B,KAAA,mBAAqB,IAAIpW,GAAKoW,CAAc,EAC5C,KAAA,QAAU5V,EAAgB,CAAE,KAAM,KAAM,KAAM,GAAI,CACzD,CACA,WAAWoN,EAAG,CACP,KAAA,mBAAmB,IAAIA,CAAC,CAC/B,CACA,eAAe8G,EAAU,CACvB,KAAM,CAAE,KAAAhJ,CAAA,EAASiC,EAAe+G,CAAQ,EACxC,OAAOhU,EAAc,IAAM,CACzB,MAAM0V,EAAiB,KAAK,mBAAmB,MAAM,SAAS,EACxD3I,EAAa/B,EAAK,OAAO,CAAC2K,EAAcC,IAAaD,EAAaC,CAAQ,EAAGF,CAAc,EACjG,OAAOzV,GAAI8M,CAAU,CAAA,CACtB,CACH","x_google_ignoreList":[0]}