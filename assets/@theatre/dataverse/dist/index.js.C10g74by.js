import{c as v}from"../../../@chevrotain/cst-dts-gen/lib/src/api.js.Cpj98o6Y.js";import{d as Dn}from"./index.js_commonjs-exports.CmPFFxNR.js";(function(be){var j=Object.defineProperty,Se=Object.defineProperties,Pe=Object.getOwnPropertyDescriptors,R=Object.getOwnPropertySymbols,Te=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable,$=(e,t,r)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ce=(e,t)=>{for(var r in t||(t={}))Te.call(t,r)&&$(e,r,t[r]);if(R)for(var r of R(t))we.call(t,r)&&$(e,r,t[r]);return e},Oe=(e,t)=>Se(e,Pe(t)),ke=e=>j(e,"__esModule",{value:!0}),De=(e,t)=>{ke(e);for(var r in t)j(e,r,{get:t[r],enumerable:!0})};De(be,{Atom:()=>_e,PointerProxy:()=>kn,Ticker:()=>me,getPointerParts:()=>y,isPointer:()=>p,isPrism:()=>O,iterateAndCountTicks:()=>wn,iterateOver:()=>On,pointer:()=>H,pointerToPrism:()=>x,prism:()=>D,val:()=>ge});var xe=Array.isArray,I=xe,je=typeof v=="object"&&v&&v.Object===Object&&v,Ie=je,Me=typeof self=="object"&&self&&self.Object===Object&&self,Ve=Ie||Me||Function("return this")(),M=Ve,Ne=M.Symbol,l=Ne,L=Object.prototype,Ae=L.hasOwnProperty,Ee=L.toString,g=l?l.toStringTag:void 0;function Fe(e){var t=Ae.call(e,g),r=e[g];try{e[g]=void 0;var n=!0}catch{}var s=Ee.call(e);return n&&(t?e[g]=r:delete e[g]),s}var He=Fe,ze=Object.prototype,Ge=ze.toString;function Re(e){return Ge.call(e)}var $e=Re,Le="[object Null]",Ke="[object Undefined]",K=l?l.toStringTag:void 0;function Be(e){return e==null?e===void 0?Ke:Le:K&&K in Object(e)?He(e):$e(e)}var V=Be;function Ue(e){return e!=null&&typeof e=="object"}var B=Ue,We="[object Symbol]";function Ye(e){return typeof e=="symbol"||B(e)&&V(e)==We}var N=Ye,qe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Je=/^\w*$/;function Xe(e,t){if(I(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||N(e)?!0:Je.test(e)||!qe.test(e)||t!=null&&e in Object(t)}var Ze=Xe;function Qe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var U=Qe,et="[object AsyncFunction]",tt="[object Function]",rt="[object GeneratorFunction]",nt="[object Proxy]";function st(e){if(!U(e))return!1;var t=V(e);return t==tt||t==rt||t==et||t==nt}var ot=st,it=M["__core-js_shared__"],A=it,W=function(){var e=/[^.]+$/.exec(A&&A.keys&&A.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function at(e){return!!W&&W in e}var ct=at,ht=Function.prototype,lt=ht.toString;function ut(e){if(e!=null){try{return lt.call(e)}catch{}try{return e+""}catch{}}return""}var dt=ut,ft=/[\\^$.*+?()[\]{}|]/g,pt=/^\[object .+?Constructor\]$/,_t=Function.prototype,vt=Object.prototype,gt=_t.toString,mt=vt.hasOwnProperty,yt=RegExp("^"+gt.call(mt).replace(ft,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function bt(e){if(!U(e)||ct(e))return!1;var t=ot(e)?yt:pt;return t.test(dt(e))}var St=bt;function Pt(e,t){return e==null?void 0:e[t]}var Tt=Pt;function wt(e,t){var r=Tt(e,t);return St(r)?r:void 0}var Y=wt,Ct=Y(Object,"create"),m=Ct;function Ot(){this.__data__=m?m(null):{},this.size=0}var kt=Ot;function Dt(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var xt=Dt,jt="__lodash_hash_undefined__",It=Object.prototype,Mt=It.hasOwnProperty;function Vt(e){var t=this.__data__;if(m){var r=t[e];return r===jt?void 0:r}return Mt.call(t,e)?t[e]:void 0}var Nt=Vt,At=Object.prototype,Et=At.hasOwnProperty;function Ft(e){var t=this.__data__;return m?t[e]!==void 0:Et.call(t,e)}var Ht=Ft,zt="__lodash_hash_undefined__";function Gt(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=m&&t===void 0?zt:t,this}var Rt=Gt;function u(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}u.prototype.clear=kt,u.prototype.delete=xt,u.prototype.get=Nt,u.prototype.has=Ht,u.prototype.set=Rt;var q=u;function $t(){this.__data__=[],this.size=0}var Lt=$t;function Kt(e,t){return e===t||e!==e&&t!==t}var Bt=Kt;function Ut(e,t){for(var r=e.length;r--;)if(Bt(e[r][0],t))return r;return-1}var P=Ut,Wt=Array.prototype,Yt=Wt.splice;function qt(e){var t=this.__data__,r=P(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Yt.call(t,r,1),--this.size,!0}var Jt=qt;function Xt(e){var t=this.__data__,r=P(t,e);return r<0?void 0:t[r][1]}var Zt=Xt;function Qt(e){return P(this.__data__,e)>-1}var er=Qt;function tr(e,t){var r=this.__data__,n=P(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var rr=tr;function d(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}d.prototype.clear=Lt,d.prototype.delete=Jt,d.prototype.get=Zt,d.prototype.has=er,d.prototype.set=rr;var nr=d,sr=Y(M,"Map"),or=sr;function ir(){this.size=0,this.__data__={hash:new q,map:new(or||nr),string:new q}}var ar=ir;function cr(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var hr=cr;function lr(e,t){var r=e.__data__;return hr(t)?r[typeof t=="string"?"string":"hash"]:r.map}var T=lr;function ur(e){var t=T(this,e).delete(e);return this.size-=t?1:0,t}var dr=ur;function fr(e){return T(this,e).get(e)}var pr=fr;function _r(e){return T(this,e).has(e)}var vr=_r;function gr(e,t){var r=T(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var mr=gr;function f(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}f.prototype.clear=ar,f.prototype.delete=dr,f.prototype.get=pr,f.prototype.has=vr,f.prototype.set=mr;var J=f,yr="Expected a function";function E(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(yr);var r=function(){var n=arguments,s=t?t.apply(this,n):n[0],o=r.cache;if(o.has(s))return o.get(s);var a=e.apply(this,n);return r.cache=o.set(s,a)||o,a};return r.cache=new(E.Cache||J),r}E.Cache=J;var br=E,Sr=500;function Pr(e){var t=br(e,function(n){return r.size===Sr&&r.clear(),n}),r=t.cache;return t}var Tr=Pr,wr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Cr=/\\(\\)?/g,Or=Tr(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(wr,function(r,n,s,o){t.push(s?o.replace(Cr,"$1"):n||r)}),t}),kr=Or;function Dr(e,t){for(var r=-1,n=e==null?0:e.length,s=Array(n);++r<n;)s[r]=t(e[r],r,e);return s}var xr=Dr,jr=1/0,X=l?l.prototype:void 0,Z=X?X.toString:void 0;function Q(e){if(typeof e=="string")return e;if(I(e))return xr(e,Q)+"";if(N(e))return Z?Z.call(e):"";var t=e+"";return t=="0"&&1/e==-jr?"-0":t}var Ir=Q;function Mr(e){return e==null?"":Ir(e)}var Vr=Mr;function Nr(e,t){return I(e)?e:Ze(e,t)?[e]:kr(Vr(e))}var Ar=Nr,Er=1/0;function Fr(e){if(typeof e=="string"||N(e))return e;var t=e+"";return t=="0"&&1/e==-Er?"-0":t}var Hr=Fr;function zr(e,t){t=Ar(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[Hr(t[r++])];return r&&r==n?e:void 0}var Gr=zr;function Rr(e,t,r){var n=e==null?void 0:Gr(e,t);return n===void 0?r:n}var $r=Rr;function Lr(e,t){return function(r){return e(t(r))}}var Kr=Lr,Br=Kr(Object.getPrototypeOf,Object),Ur=Br,Wr="[object Object]",Yr=Function.prototype,qr=Object.prototype,ee=Yr.toString,Jr=qr.hasOwnProperty,Xr=ee.call(Object);function Zr(e){if(!B(e)||V(e)!=Wr)return!1;var t=Ur(e);if(t===null)return!0;var r=Jr.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&ee.call(r)==Xr}var Qr=Zr;function en(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var tn=en,F=new WeakMap,te=new WeakMap,re=Symbol("pointerMeta"),rn={get(e,t){if(t===re)return F.get(e);let r=te.get(e);r||(r=new Map,te.set(e,r));const n=r.get(t);if(n!==void 0)return n;const s=F.get(e),o=ne({root:s.root,path:[...s.path,t]});return r.set(t,o),o}},w=e=>e[re],y=e=>{const{root:t,path:r}=w(e);return{root:t,path:r}};function ne(e){var t;const r={root:e.root,path:(t=e.path)!=null?t:[]},n={};return F.set(n,r),new Proxy(n,rn)}var H=ne,p=e=>e&&!!w(e);function nn(e,t,r){return t.length===0?r(e):C(e,t,r)}var C=(e,t,r)=>{if(t.length===0)return r(e);if(Array.isArray(e)){let[n,...s]=t;n=parseInt(String(n),10),isNaN(n)&&(n=0);const o=e[n],a=C(o,s,r);if(o===a)return e;const h=[...e];return h.splice(n,1,a),h}else if(typeof e=="object"&&e!==null){const[n,...s]=t,o=e[n],a=C(o,s,r);return o===a?e:Oe(Ce({},e),{[n]:a})}else{const[n,...s]=t;return{[n]:C(void 0,s,r)}}},se=class{constructor(){this._head=void 0}peek(){return this._head&&this._head.data}pop(){const e=this._head;if(e)return this._head=e.next,e.data}push(e){const t={next:this._head,data:e};this._head=t}};function O(e){return!!(e&&e.isPrism&&e.isPrism===!0)}function oe(){const e=()=>{},t=new se,r=e;return{type:"Dataverse_discoveryMechanism",startIgnoringDependencies:()=>{t.push(r)},stopIgnoringDependencies:()=>{t.peek()!==r||t.pop()},reportResolutionStart:_=>{const G=t.peek();G&&G(_),t.push(r)},reportResolutionEnd:_=>{t.pop()},pushCollector:_=>{t.push(_)},popCollector:_=>{if(t.peek()!==_)throw new Error("Popped collector is not on top of the stack");t.pop()}}}function sn(){const e="__dataverse_discoveryMechanism_sharedStack",t=typeof window<"u"?window:typeof v<"u"?v:{};if(t){const r=t[e];if(r&&typeof r=="object"&&r.type==="Dataverse_discoveryMechanism")return r;{const n=oe();return t[e]=n,n}}else return oe()}var{startIgnoringDependencies:b,stopIgnoringDependencies:S,reportResolutionEnd:on,reportResolutionStart:an,pushCollector:cn,popCollector:hn}=sn(),ie=()=>{},ln=class{constructor(e,t){this._fn=e,this._prismInstance=t,this._didMarkDependentsAsStale=!1,this._isFresh=!1,this._cacheOfDendencyValues=new Map,this._dependents=new Set,this._dependencies=new Set,this._possiblyStaleDeps=new Set,this._scope=new ae(this),this._lastValue=void 0,this._forciblySetToStale=!1,this._reactToDependencyGoingStale=r=>{this._possiblyStaleDeps.add(r),this._markAsStale()};for(const r of this._dependencies)r._addDependent(this._reactToDependencyGoingStale);b(),this.getValue(),S()}get hasDependents(){return this._dependents.size>0}removeDependent(e){this._dependents.delete(e)}addDependent(e){this._dependents.add(e)}destroy(){for(const e of this._dependencies)e._removeDependent(this._reactToDependencyGoingStale);ce(this._scope)}getValue(){if(!this._isFresh){const e=this._recalculate();this._lastValue=e,this._isFresh=!0,this._didMarkDependentsAsStale=!1,this._forciblySetToStale=!1}return this._lastValue}_recalculate(){let e;if(!this._forciblySetToStale&&this._possiblyStaleDeps.size>0){let n=!1;b();for(const s of this._possiblyStaleDeps)if(this._cacheOfDendencyValues.get(s)!==s.getValue()){n=!0;break}if(S(),this._possiblyStaleDeps.clear(),!n)return this._lastValue}const t=new Set;this._cacheOfDendencyValues.clear();const r=n=>{t.add(n),this._addDependency(n)};cn(r),i.push(this._scope);try{e=this._fn()}catch(n){console.error(n)}finally{i.pop()!==this._scope&&console.warn("The Prism hook stack has slipped. This is a bug.")}hn(r);for(const n of this._dependencies)t.has(n)||this._removeDependency(n);this._dependencies=t,b();for(const n of t)this._cacheOfDendencyValues.set(n,n.getValue());return S(),e}forceStale(){this._forciblySetToStale=!0,this._markAsStale()}_markAsStale(){if(!this._didMarkDependentsAsStale){this._didMarkDependentsAsStale=!0,this._isFresh=!1;for(const e of this._dependents)e(this._prismInstance)}}_addDependency(e){this._dependencies.has(e)||(this._dependencies.add(e),e._addDependent(this._reactToDependencyGoingStale))}_removeDependency(e){this._dependencies.has(e)&&(this._dependencies.delete(e),e._removeDependent(this._reactToDependencyGoingStale))}},un={},dn=class{constructor(e){this._fn=e,this.isPrism=!0,this._state={hot:!1,handle:void 0}}get isHot(){return this._state.hot}onChange(e,t,r=!1){const n=()=>{e.onThisOrNextTick(o)};let s=un;const o=()=>{const h=this.getValue();h!==s&&(s=h,t(h))};return this._addDependent(n),r&&(s=this.getValue(),t(s)),()=>{this._removeDependent(n),e.offThisOrNextTick(o),e.offNextTick(o)}}onStale(e){const t=()=>{this._removeDependent(r)},r=()=>e();return this._addDependent(r),t}keepHot(){return this.onStale(()=>{})}_addDependent(e){this._state.hot||this._goHot(),this._state.handle.addDependent(e)}_goHot(){const e=new ln(this._fn,this);this._state={hot:!0,handle:e}}_removeDependent(e){const t=this._state;if(!t.hot)return;const r=t.handle;r.removeDependent(e),r.hasDependents||(this._state={hot:!1,handle:void 0},r.destroy())}getValue(){an(this);const e=this._state;let t;return e.hot?t=e.handle.getValue():t=Sn(this._fn),on(this),t}},ae=class{constructor(e){this._hotHandle=e,this._refs=new Map,this.isPrismScope=!0,this.subs={},this.effects=new Map,this.memos=new Map}ref(e,t){let r=this._refs.get(e);if(r!==void 0)return r;{const n={current:t};return this._refs.set(e,n),n}}effect(e,t,r){let n=this.effects.get(e);n===void 0&&(n={cleanup:ie,deps:void 0},this.effects.set(e,n)),he(n.deps,r)&&(n.cleanup(),b(),n.cleanup=k(t,ie).value,S(),n.deps=r)}memo(e,t,r){let n=this.memos.get(e);return n===void 0&&(n={cachedValue:null,deps:void 0},this.memos.set(e,n)),he(n.deps,r)&&(b(),n.cachedValue=k(t,void 0).value,S(),n.deps=r),n.cachedValue}state(e,t){const{value:r,setValue:n}=this.memo("state/"+e,()=>{const s={current:t};return{value:s,setValue:a=>{s.current=a,this._hotHandle.forceStale()}}},[]);return[r.current,n]}sub(e){return this.subs[e]||(this.subs[e]=new ae(this._hotHandle)),this.subs[e]}cleanupEffects(){for(const e of this.effects.values())k(e.cleanup,void 0);this.effects.clear()}source(e,t){return this.effect("$$source/blah",()=>e(()=>{this._hotHandle.forceStale()}),[e]),t()}};function ce(e){for(const t of Object.values(e.subs))ce(t);e.cleanupEffects()}function k(e,t){try{return{value:e(),ok:!0}}catch(r){return setTimeout(function(){throw r}),{value:t,ok:!1}}}var i=new se;function fn(e,t){const r=i.peek();if(!r)throw new Error("prism.ref() is called outside of a prism() call.");return r.ref(e,t)}function pn(e,t,r){const n=i.peek();if(!n)throw new Error("prism.effect() is called outside of a prism() call.");return n.effect(e,t,r)}function he(e,t){if(e===void 0||t===void 0)return!0;const r=e.length;if(r!==t.length)return!0;for(let n=0;n<r;n++)if(e[n]!==t[n])return!0;return!1}function le(e,t,r){const n=i.peek();if(!n)throw new Error("prism.memo() is called outside of a prism() call.");return n.memo(e,t,r)}function _n(e,t){const r=i.peek();if(!r)throw new Error("prism.state() is called outside of a prism() call.");return r.state(e,t)}function vn(){if(!i.peek())throw new Error("The parent function is called outside of a prism() call.")}function gn(e,t){const r=i.peek();if(!r)throw new Error("prism.scope() is called outside of a prism() call.");const n=r.sub(e);i.push(n);const s=k(t,void 0).value;return i.pop(),s}function mn(e,t,r){return le(e,()=>c(t),r).getValue()}function yn(){return!!i.peek()}function bn(e,t){const r=i.peek();if(!r)throw new Error("prism.source() is called outside of a prism() call.");return r.source(e,t)}var c=e=>new dn(e),ue=class{effect(e,t,r){console.warn("prism.effect() does not run in cold prisms")}memo(e,t,r){return t()}state(e,t){return[t,()=>{}]}ref(e,t){return{current:t}}sub(e){return new ue}source(e,t){return t()}};function Sn(e){const t=new ue;i.push(t);let r;try{r=e()}catch(n){console.error(n)}finally{i.pop()!==t&&console.warn("The Prism hook stack has slipped. This is a bug.")}return r}c.ref=fn,c.effect=pn,c.memo=le,c.ensurePrism=vn,c.state=_n,c.scope=gn,c.sub=mn,c.inPrism=yn,c.source=bn;var D=c,de;(function(e){e[e.Dict=0]="Dict",e[e.Array=1]="Array",e[e.Other=2]="Other"})(de||(de={}));var z=e=>Array.isArray(e)?1:Qr(e)?0:2,fe=(e,t,r=z(e))=>r===0&&typeof t=="string"||r===1&&Pn(t)?e[t]:void 0,Pn=e=>{const t=typeof e=="number"?e:parseInt(e,10);return!isNaN(t)&&t>=0&&t<1/0&&(t|0)===t},pe=class{constructor(e,t){this._parent=e,this._path=t,this.children=new Map,this.identityChangeListeners=new Set}addIdentityChangeListener(e){this.identityChangeListeners.add(e)}removeIdentityChangeListener(e){this.identityChangeListeners.delete(e),this._checkForGC()}removeChild(e){this.children.delete(e),this._checkForGC()}getChild(e){return this.children.get(e)}getOrCreateChild(e){let t=this.children.get(e);return t||(t=t=new pe(this,this._path.concat([e])),this.children.set(e,t)),t}_checkForGC(){this.identityChangeListeners.size>0||this.children.size>0||this._parent&&this._parent.removeChild(tn(this._path))}},_e=class{constructor(e){this.$$isPointerToPrismProvider=!0,this.pointer=H({root:this,path:[]}),this.prism=this.pointerToPrism(this.pointer),this._onPointerValueChange=(t,r)=>{const{path:n}=y(t),s=this._getOrCreateScopeForPath(n);return s.identityChangeListeners.add(r),()=>{s.identityChangeListeners.delete(r)}},this._currentState=e,this._rootScope=new pe(void 0,[])}set(e){const t=this._currentState;this._currentState=e,this._checkUpdates(this._rootScope,t,e)}get(){return this._currentState}getByPointer(e){const t=p(e)?e:e(this.pointer),r=y(t).path;return this._getIn(r)}_getIn(e){return e.length===0?this.get():$r(this.get(),e)}reduce(e){this.set(e(this.get()))}reduceByPointer(e,t){const r=p(e)?e:e(this.pointer),n=y(r).path,s=nn(this.get(),n,t);this.set(s)}setByPointer(e,t){this.reduceByPointer(e,()=>t)}_checkUpdates(e,t,r){if(t===r)return;for(const o of e.identityChangeListeners)o(r);if(e.children.size===0)return;const n=z(t),s=z(r);if(!(n===2&&n===s))for(const[o,a]of e.children){const h=fe(t,o,n),ye=fe(r,o,s);this._checkUpdates(a,h,ye)}}_getOrCreateScopeForPath(e){let t=this._rootScope;for(const r of e)t=t.getOrCreateChild(r);return t}pointerToPrism(e){const{path:t}=y(e),r=s=>this._onPointerValueChange(e,s),n=()=>this._getIn(t);return D(()=>D.source(r,n))}},ve=new WeakMap;function Tn(e){return typeof e=="object"&&e!==null&&e.$$isPointerToPrismProvider===!0}var x=e=>{const t=w(e);let r=ve.get(t);if(!r){const n=t.root;if(!Tn(n))throw new Error("Cannot run pointerToPrism() on a pointer whose root is not an PointerToPrismProvider");r=n.pointerToPrism(e),ve.set(t,r)}return r},ge=e=>p(e)?x(e).getValue():O(e)?e.getValue():e;function*wn(e){let t;if(p(e))t=x(e);else if(O(e))t=e;else throw new Error("Only pointers and prisms are supported");let r=0;const n=t.onStale(()=>{r++});try{for(;;){const s=r;r=0,yield{value:t.getValue(),ticks:s}}}finally{n()}}var Cn=60*3,me=class{constructor(e){this._conf=e,this._ticking=!1,this._dormant=!0,this._numberOfDormantTicks=0,this.__ticks=0,this._scheduledForThisOrNextTick=new Set,this._scheduledForNextTick=new Set,this._timeAtCurrentTick=0}get dormant(){return this._dormant}onThisOrNextTick(e){this._scheduledForThisOrNextTick.add(e),this._dormant&&this._goActive()}onNextTick(e){this._scheduledForNextTick.add(e),this._dormant&&this._goActive()}offThisOrNextTick(e){this._scheduledForThisOrNextTick.delete(e)}offNextTick(e){this._scheduledForNextTick.delete(e)}get time(){return this._ticking?this._timeAtCurrentTick:performance.now()}_goActive(){var e,t;this._dormant&&(this._dormant=!1,(t=(e=this._conf)==null?void 0:e.onActive)==null||t.call(e))}_goDormant(){var e,t;this._dormant||(this._dormant=!0,this._numberOfDormantTicks=0,(t=(e=this._conf)==null?void 0:e.onDormant)==null||t.call(e))}tick(e=performance.now()){if(this.__ticks++,!this._dormant&&this._scheduledForNextTick.size===0&&this._scheduledForThisOrNextTick.size===0&&(this._numberOfDormantTicks++,this._numberOfDormantTicks>=Cn)){this._goDormant();return}this._ticking=!0,this._timeAtCurrentTick=e;for(const t of this._scheduledForNextTick)this._scheduledForThisOrNextTick.add(t);this._scheduledForNextTick.clear(),this._tick(0),this._ticking=!1}_tick(e){const t=this.time;if(e>10&&console.warn("_tick() recursing for 10 times"),e>100)throw new Error("Maximum recursion limit for _tick()");const r=this._scheduledForThisOrNextTick;this._scheduledForThisOrNextTick=new Set;for(const n of r)n(t);if(this._scheduledForThisOrNextTick.size>0)return this._tick(e+1)}};function*On(e){let t;if(p(e))t=x(e);else if(O(e))t=e;else throw new Error("Only pointers and prisms are supported");const r=new me,n=t.onChange(r,s=>{});try{for(;;)r.tick(),yield t.getValue()}finally{n()}}var kn=class{constructor(e){this.$$isPointerToPrismProvider=!0,this._currentPointerBox=new _e(e),this.pointer=H({root:this,path:[]})}setPointer(e){this._currentPointerBox.set(e)}pointerToPrism(e){const{path:t}=w(e);return D(()=>{const r=this._currentPointerBox.prism.getValue(),n=t.reduce((s,o)=>s[o],r);return ge(n)})}}})(Dn);
