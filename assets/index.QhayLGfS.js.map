{"version":3,"file":"index.QhayLGfS.js","sources":["../../src/demo2/15/Scan.tsx","../../src/demo2/15/index.tsx"],"sourcesContent":["import React from 'react';\nimport { useGLTF } from '@react-three/drei';\nimport TWEEN from '@tweenjs/tween.js';\nimport { GLTFResult } from '~/types/use_gltf';\n\nexport function Model({ controls }: any) {\n  const { nodes, materials } = useGLTF(\n    '/models/scan-transformed.glb'\n  ) as GLTFResult;\n\n  return (\n    <group dispose={null}>\n      <mesh geometry={nodes.Mesh_0.geometry} material={materials.material_0} />\n\n      {/* A box used for raycasting since the photogrammetry geometry has so many faces that it makes the raycaster slow */}\n      <mesh\n        position={[0, -0.25, -0.6]}\n        rotation-y={-Math.PI / 64}\n        onDoubleClick={({ point }) => {\n          new TWEEN.Tween(controls.current.target)\n            .to(\n              {\n                x: point.x,\n                y: point.y,\n                z: point.z,\n              },\n              500\n            )\n            .easing(TWEEN.Easing.Cubic.Out)\n            .start();\n        }}\n      >\n        <boxGeometry args={[30, 3, 0.1]} />\n        <meshBasicMaterial wireframe visible={false} />\n      </mesh>\n    </group>\n  );\n}\n\nuseGLTF.preload('/models/scan-transformed.glb');\n","import {\n  Html,\n  OrbitControls,\n  Environment,\n  useProgress,\n} from '@react-three/drei';\nimport { Canvas, useFrame } from '@react-three/fiber';\nimport { update } from '@tweenjs/tween.js';\nimport { Suspense, useRef } from 'react';\nimport { Model } from './Scan';\n\n/**\n * 摄影测量\n */\nexport const Demo2v15 = () => {\n  const ref = useRef<any>(null);\n  return (\n    <>\n      <Canvas shadows camera={{ position: [4, 0, 3] }}>\n        <Suspense fallback={<Loader />}>\n          <Environment preset=\"forest\" />\n          <OrbitControls ref={ref} target={[4, 0, 0]} />\n          <Model controls={ref} />\n          <Tween />\n        </Suspense>\n      </Canvas>\n      <div id=\"instructions\">Doubleclick to change OrbitControls target</div>\n    </>\n  );\n};\n\nfunction Loader() {\n  const { progress } = useProgress();\n  return <Html center>{progress} % loaded</Html>;\n}\n\nfunction Tween() {\n  useFrame(() => {\n    update();\n  });\n  return null;\n}\n\nexport default Demo2v15;\n"],"names":["Model","controls","nodes","materials","useGLTF","jsxs","jsx","point","TWEEN","Demo2v15","ref","useRef","Fragment","Canvas","Suspense","Loader","Environment","OrbitControls","Tween","progress","useProgress","Html","useFrame","update"],"mappings":"24GAKgB,SAAAA,EAAM,CAAE,SAAAC,GAAiB,CACjC,KAAA,CAAE,MAAAC,EAAO,UAAAC,CAAA,EAAcC,EAC3B,8BAAA,EAIA,OAAAC,EAAA,KAAC,QAAM,CAAA,QAAS,KACd,SAAA,CAAAC,MAAC,QAAK,SAAUJ,EAAM,OAAO,SAAU,SAAUC,EAAU,WAAY,EAGvEE,EAAA,KAAC,OAAA,CACC,SAAU,CAAC,EAAG,KAAO,GAAI,EACzB,aAAY,CAAC,KAAK,GAAK,GACvB,cAAe,CAAC,CAAE,MAAAE,KAAY,CAC5B,IAAIC,EAAM,MAAMP,EAAS,QAAQ,MAAM,EACpC,GACC,CACE,EAAGM,EAAM,EACT,EAAGA,EAAM,EACT,EAAGA,EAAM,CACX,EACA,GAAA,EAED,OAAOC,EAAM,OAAO,MAAM,GAAG,EAC7B,OACL,EAEA,SAAA,CAAAF,EAAA,IAAC,eAAY,KAAM,CAAC,GAAI,EAAG,EAAG,EAAG,EAChCA,EAAA,IAAA,oBAAA,CAAkB,UAAS,GAAC,QAAS,GAAO,CAAA,CAAA,CAC/C,CACF,CAAA,CAAA,CAEJ,CAEAF,EAAQ,QAAQ,8BAA8B,ECzBvC,MAAMK,GAAW,IAAM,CACtB,MAAAC,EAAMC,SAAY,IAAI,EAC5B,OAEIN,EAAA,KAAAO,WAAA,CAAA,SAAA,CAAAN,MAACO,GAAO,QAAO,GAAC,OAAQ,CAAE,SAAU,CAAC,EAAG,EAAG,CAAC,GAC1C,SAAAR,OAACS,EAAAA,UAAS,SAAUR,EAAAA,IAACS,IAAO,EAC1B,SAAA,CAACT,EAAAA,IAAAU,EAAA,CAAY,OAAO,QAAS,CAAA,EAC7BV,MAACW,GAAc,IAAAP,EAAU,OAAQ,CAAC,EAAG,EAAG,CAAC,EAAG,EAC5CJ,EAAAA,IAACN,EAAM,CAAA,SAAUU,CAAK,CAAA,QACrBQ,EAAM,EAAA,CAAA,CAAA,CACT,CACF,CAAA,EACCZ,EAAA,IAAA,MAAA,CAAI,GAAG,eAAe,SAA0C,6CAAA,CACnE,CAAA,CAAA,CAEJ,EAEA,SAASS,GAAS,CACV,KAAA,CAAE,SAAAI,GAAaC,IACd,OAAAf,EAAA,KAACgB,EAAK,CAAA,OAAM,GAAE,SAAA,CAAAF,EAAS,WAAS,CAAA,CAAA,CACzC,CAEA,SAASD,GAAQ,CACf,OAAAI,EAAS,IAAM,CACNC,GAAA,CACR,EACM,IACT"}