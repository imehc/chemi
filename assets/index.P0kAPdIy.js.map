{"version":3,"file":"index.P0kAPdIy.js","sources":["../../src/demo/22/Button.tsx","../../src/demo/22/Rig.tsx","../../src/demo/22/index.tsx"],"sourcesContent":["import { useRef, useState, useMemo, useCallback } from 'react';\nimport { MeshProps, useFrame } from '@react-three/fiber';\nimport { MathUtils, Mesh, MeshStandardMaterial } from 'three';\nimport { Color } from 'three';\n\nconst black = new Color('black');\nexport const Button: React.FC<MeshProps> = (props) => {\n  const ref = useRef<Mesh>(null);\n  const [hovered, setHovered] = useState(false);\n  const [selected, setSelected] = useState(false);\n  const colorTo = useMemo(\n    () => new Color(Math.floor(Math.random() * 16777216)),\n    []\n  );\n\n  const lerp = useCallback((from: number, to: number, speed: number) => {\n    const r = (1 - speed) * from + speed * to;\n    return Math.abs(from - to) < 0.001 ? to : r;\n  }, []);\n\n  useFrame(() => {\n    if (!ref.current) return;\n    ref.current.rotation.x = hovered\n      ? lerp(ref.current.rotation.x, -Math.PI * 2, 0.025)\n      : lerp(ref.current.rotation.x, 0, 0.025);\n    // ? MathUtils.lerp(ref.current.rotation.x, -Math.PI * 2, 0.025)\n    // : MathUtils.lerp(ref.current.rotation.x, 0, 0.025);\n\n    ref.current.position.z = selected\n      ? // ? MathUtils.lerp(ref.current.position.z, 0, 0.025)\n        // : MathUtils.lerp(ref.current.position.z, -3, 0.025);\n        lerp(ref.current.position.z, 0, 0.025)\n      : lerp(ref.current.position.z, -3, 0.025);\n\n    (ref.current.material as MeshStandardMaterial).color.lerp(\n      selected ? colorTo : black,\n      0.025\n    );\n  });\n\n  return (\n    <mesh\n      {...props}\n      ref={ref}\n      onPointerDown={() => {\n        setSelected(!selected);\n      }}\n      onPointerOver={() => setHovered(true)}\n      onPointerOut={() => setHovered(false)}\n    >\n      <icosahedronGeometry />\n      <meshPhysicalMaterial\n        roughness={0}\n        metalness={0}\n        thickness={3.12}\n        ior={1.74}\n        transmission={1.0}\n      />\n    </mesh>\n  );\n};\n","import { useFrame } from '@react-three/fiber';\nimport { useMemo } from 'react';\nimport { Vector3 } from 'three';\n\nexport const Rig = () => {\n  const vec = useMemo(() => new Vector3(), []);\n\n  return useFrame(({ camera, pointer }) => {\n    vec.set(pointer.x * 2, pointer.y * 2, camera.position.z);\n    camera.position.lerp(vec, 0.025);\n    camera.lookAt(0, 0, 0);\n  });\n};\n","import { Center, Environment, Stats } from '@react-three/drei';\nimport { Canvas } from '@react-three/fiber';\nimport { Button } from './Button';\nimport { Rig } from './Rig';\n\n/**\n * 使用插值 （Lerp） 对对象变换和材质属性进行动画处理。\n */\nconst Demo22: React.FC = () => {\n  return (\n    <Canvas camera={{ position: [0, 0, 5] }}>\n      <Environment preset=\"forest\" background />\n      <Center>\n        {[...Array(5).keys()].map((x) =>\n          [...Array(3).keys()].map((y) => (\n            <Button key={x + y * 5} position={[x * 2.5, y * 2.5, 0]} />\n          ))\n        )}\n      </Center>\n      <Rig />\n      <Stats />\n    </Canvas>\n  );\n};\n\nexport default Demo22;\n"],"names":["black","Color","Button","props","ref","useRef","hovered","setHovered","useState","selected","setSelected","colorTo","useMemo","lerp","useCallback","from","to","speed","r","useFrame","jsxs","jsx","Rig","vec","Vector3","camera","pointer","Demo22","Canvas","Environment","Center","x","y","Stats"],"mappings":"wrFAKA,MAAMA,EAAQ,IAAIC,EAAM,OAAO,EAClBC,EAA+BC,GAAU,CAC9C,MAAAC,EAAMC,SAAa,IAAI,EACvB,CAACC,EAASC,CAAU,EAAIC,WAAS,EAAK,EACtC,CAACC,EAAUC,CAAW,EAAIF,WAAS,EAAK,EACxCG,EAAUC,EAAA,QACd,IAAM,IAAIX,EAAM,KAAK,MAAM,KAAK,OAAA,EAAW,QAAQ,CAAC,EACpD,CAAC,CAAA,EAGGY,EAAOC,EAAA,YAAY,CAACC,EAAcC,EAAYC,IAAkB,CACpE,MAAMC,GAAK,EAAID,GAASF,EAAOE,EAAQD,EACvC,OAAO,KAAK,IAAID,EAAOC,CAAE,EAAI,KAAQA,EAAKE,CAC5C,EAAG,CAAE,CAAA,EAEL,OAAAC,EAAS,IAAM,CACRf,EAAI,UACLA,EAAA,QAAQ,SAAS,EAAIE,EACrBO,EAAKT,EAAI,QAAQ,SAAS,EAAG,CAAC,KAAK,GAAK,EAAG,IAAK,EAChDS,EAAKT,EAAI,QAAQ,SAAS,EAAG,EAAG,IAAK,EAIrCA,EAAA,QAAQ,SAAS,EAAIK,EAGrBI,EAAKT,EAAI,QAAQ,SAAS,EAAG,EAAG,IAAK,EACrCS,EAAKT,EAAI,QAAQ,SAAS,EAAG,GAAI,IAAK,EAEzCA,EAAI,QAAQ,SAAkC,MAAM,KACnDK,EAAWE,EAAUX,EACrB,IAAA,EACF,CACD,EAGCoB,EAAA,KAAC,OAAA,CACE,GAAGjB,EACJ,IAAAC,EACA,cAAe,IAAM,CACnBM,EAAY,CAACD,CAAQ,CACvB,EACA,cAAe,IAAMF,EAAW,EAAI,EACpC,aAAc,IAAMA,EAAW,EAAK,EAEpC,SAAA,CAAAc,EAAA,IAAC,sBAAoB,EAAA,EACrBA,EAAA,IAAC,uBAAA,CACC,UAAW,EACX,UAAW,EACX,UAAW,KACX,IAAK,KACL,aAAc,CAAA,CAChB,CAAA,CAAA,CAAA,CAGN,ECxDaC,EAAM,IAAM,CACvB,MAAMC,EAAMX,EAAAA,QAAQ,IAAM,IAAIY,EAAW,CAAE,CAAA,EAE3C,OAAOL,EAAS,CAAC,CAAE,OAAAM,EAAQ,QAAAC,KAAc,CACnCH,EAAA,IAAIG,EAAQ,EAAI,EAAGA,EAAQ,EAAI,EAAGD,EAAO,SAAS,CAAC,EAChDA,EAAA,SAAS,KAAKF,EAAK,IAAK,EACxBE,EAAA,OAAO,EAAG,EAAG,CAAC,CAAA,CACtB,CACH,ECJME,GAAmB,IAErBP,OAACQ,EAAO,CAAA,OAAQ,CAAE,SAAU,CAAC,EAAG,EAAG,CAAC,CAAA,EAClC,SAAA,CAAAP,EAAA,IAACQ,EAAY,CAAA,OAAO,SAAS,WAAU,GAAC,EACxCR,MAACS,GACE,SAAC,CAAA,GAAG,MAAM,CAAC,EAAE,KAAM,CAAA,EAAE,IAAKC,GACzB,CAAC,GAAG,MAAM,CAAC,EAAE,KAAM,CAAA,EAAE,IAAKC,SACvB9B,EAAuB,CAAA,SAAU,CAAC6B,EAAI,IAAKC,EAAI,IAAK,CAAC,GAAzCD,EAAIC,EAAI,CAAoC,CAC1D,CAAA,EAEL,QACCV,EAAI,EAAA,QACJW,EAAM,EAAA,CACT,CAAA,CAAA"}